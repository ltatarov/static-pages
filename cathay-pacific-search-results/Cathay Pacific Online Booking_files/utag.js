//tealium universal tag - utag.loader ut4.0.201604220435, Copyright 2016 Tealium.com Inc. All Rights Reserved.
var cxDataLayer=cxDataLayer||{};cxDataLayer.config=cxDataLayer.config||{coremetrics:{},optimizely:{},tealium:{}};cxDataLayer.config.tealium={version:"201604220435"}
if(typeof utag_err=='undefined')var utag_err=[];window._tealium_old_error=window._tealium_old_error||window.onerror||function(){};window.onerror=function(m,u,l){if(typeof u!=='undefined'&&u.indexOf('/utag.')>0&&utag_err.length<5)utag_err.push({e:m,s:u,l:l,t:'js'});window._tealium_old_error(m,u,l)};var utag_condload=false;try{(function(){function ul(src,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;a.getElementsByTagName('head')[0].appendChild(b)};if((""+document.cookie).match("utag_env_cathaypacific_main=([^\S;]*)")){if(RegExp.$1.indexOf("/prod/")===-1){ul(RegExp.$1);utag_condload=true;__tealium_default_path='//tags.tiqcdn.com/utag/cathaypacific/main/prod/';}}})();}catch(e){};try{(function(e){"use strict";var b=function(a,d,c){return 1===arguments.length?b.get(a):b.set(a,d,c)};b._document=document;b._navigator=navigator;b.defaults={path:"/"};b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();return b._cache[a]};b.set=function(a,d,c){c=b._getExtendedOptions(c);c.expires=b._getExpiresDate(d===e?-1:c.expires);b._document.cookie=b._generateCookieString(a,d,c);return b};b.expire=function(a,d){return b.set(a,e,d)};b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==e?a.secure:b.defaults.secure}};b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())};b._getExpiresDate=function(a,d){d=d||new Date;switch(typeof a){case"number":a=new Date(d.getTime()+1E3*a);break;case"string":a=new Date(a)}if(a&&!b._isValidDate(a))throw Error("`expires` parameter cannot be converted to a valid Date instance");return a};b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent);a=a.replace(/\(/g,"%28").replace(/\)/g,"%29");b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);c=c||{};a=a+"="+b+(c.path?";path="+c.path:"");a+=c.domain?";domain="+c.domain:"";a+=c.expires?";expires="+c.expires.toUTCString():"";return a+=c.secure?";secure":""};b._getCookieObjectFromString=function(a){var d={};a=a?a.split("; "):[];for(var c=0;c<a.length;c++){var f=b._getKeyValuePairFromCookieString(a[c]);d[f.key]===e&&(d[f.key]=f.value)}return d};b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("="),b=0>b?a.length:b;return{key:decodeURIComponent(a.substr(0,b)),value:decodeURIComponent(a.substr(b+1))}};b._renewCache=function(){b._cache=b._getCookieObjectFromString(b._document.cookie);b._cachedDocumentCookie=b._document.cookie};b._areEnabled=function(){var a="1"===b.set("cookies.js",1).get("cookies.js");b.expire("cookies.js");return a};b.enabled=b._areEnabled();"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.Cookies=b):window.Cookies=b})();if(document.domain.indexOf('cathaypacific.com')!==-1){var domain='cathaypacific.com'}else{var domain='dragonair.com'};Cookies.defaults={path:'/',domain:domain};}catch(e){};if(!utag_condload){try{eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(7(j){j.12=7(){4 i=7(){5 i.17.19(j,8)};i.1k="1.1.0";i.x=7(s){6(!s)5{};6(s.9("=")===-1&&s.9("&")===-1)5{};s=i.A(s);4 a={};4 b=s.B("&");C(4 c y b){6(b.z(c)){4 d=b[c].B("=");4 e=M(d[0]),18=M(d[1]);i.w(a,e,18)}}5 a};i.11=7(s){s=M(s);Y(s.9("+")>-1){s=s.V("+"," ")};5 s};i.w=7(a,b,c){4 d=l c!=="o";4 e=-1;4 f={\'F\':F,\'K\':K,\'16\':16};6(l b==\'T\'||1e.1j(b)==\'[D 1m]\'){e=b.I(/[\\.\\[]/)}6(e===-1){6(i.S){c=c&&!1h(c)?+c:c===\'o\'?o:f[c]!==o?f[c]:i.11(c)}5 d?(a[b]=c):a[b]}4 g=b.v(0,e);4 h=b.v(e+1);E(b.1c(e)){u\'[\':a[g]=a[g]||[];h=h.V(\']\',\'\');6(h.I(/[\\.\\[]/)===-1){h=1f(h,10)}5 i.w(a[g],h,c);u\'.\':a[g]=a[g]||{};5 i.w(a[g],h,c)}5 a};i.t=7(a,b){E(l(a)){u"D":4 c=[];4 d;C(4 e y a){6(!a.z(e))W;4 f=a[e];6(l(e)==="o"||e.r===0||l(f)==="o")W;d=b?b+"."+e:e;6(l a.r!=="o"){d=b?b+"["+e+"]":e}6(l f==="D"){c.n(i.t(f,d))}1a{c.n(G(d)+"="+G(f))}}5 c.13("&")}5 G(a)};i.1d=7(){4 a=(i.14?i.H:i.m);4 b=[J.1i,a];4 c={};E(8.r){u 1:b.n(i.t(8[0]));U;u 2:b[0]=i.L(8[0]);c=i.x(8[0]);c=i.X(c,8[1]);b.n(i.t(c));U;u 3:b[0]=i.L(8[0]);b[1]=i.m;b.n(i.t(8[1]));(l(8[2])==="T")?b.n(i.q):b.n(i.H);b.n(i.t(8[2]))}4 s=b.13("");6(s.9(a)==s.r-a.r){s=s.v(0,s.r-a.r)}5 s};i.14=K;i.m="?";i.q="#";i.H="#?";i.S=F;i.Z=7(){4 a=i.x(i.N()+"&"+i.O());5 i.P?i.P:i.P=a};i.17=7(a,b){4 c=i.w(i.Z(),a);5 l(c)==="o"?b:c};i.1g=7(){5 i.Q?i.Q:i.Q=i.x(i.N())};i.15=7(){5 i.R?i.R:i.R=i.x(i.O())};i.N=7(){5 i.A(J.I)};i.O=7(){5 i.A(J.15)};i.A=7(s){6(s.9(i.m)>-1)s=s.B(i.m)[1];6(s.9(i.q)>-1)s=s.B(i.q)[1];6(s.9("=")===-1&&s.9("&")===-1)5"";Y(s.9(i.q)==0||s.9(i.m)==0)s=s.v(1);5 s};i.L=7(p){6(p.9(i.m)>-1)p=p.v(0,p.9(i.m));6(p.9(i.q)>-1)p=p.v(0,p.9(i.q));5 p};i.X=7(){4 a={};C(4 b y 8){6(8.z(b)){C(4 k y 8[b]){6(8[b].z(k)){a[k]=8[b][k]}}}}5 a};5 i};j.1l=12()})(1b);',62,85,'||||var|return|if|function|arguments|indexOf||||||||||||typeof|querySeperator|push|undefined||hashSeperator|length||stringify|case|substr|_access|parse|in|hasOwnProperty|_cleanParamStr|split|for|object|switch|true|encodeURIComponent|hashQuerySeperator|search|location|false|_cleanPath|decodeURIComponent|querystring|hashstring|_all|_query|_hash|coerceMode|string|break|replace|continue|merge|while|all||__decode|MakeArg|join|urlUseHash|hash|null|get|val|apply|else|window|charAt|url|toString|parseInt|query|isNaN|pathname|call|version|Arg|String'.split('|'),0,{}));}catch(e){}};if(!utag_condload){try{;(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory()}(this,function(){'use strict';var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==='[object Array]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}}
return m._isValid;}
function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
function isUndefined(input){return input===void 0;}
var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}
if(!isUndefined(from._i)){to._i=from._i;}
if(!isUndefined(from._f)){to._f=from._f;}
if(!isUndefined(from._l)){to._l=from._l;}
if(!isUndefined(from._strict)){to._strict=from._strict;}
if(!isUndefined(from._tzm)){to._tzm=from._tzm;}
if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}
if(!isUndefined(from._offset)){to._offset=from._offset;}
if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}
if(!isUndefined(from._locale)){to._locale=from._locale;}
if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function absFloor(number){if(number<0){return Math.ceil(number);}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&(typeof console!=='undefined')&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){warn(msg+'\nArguments: '+Array.prototype.slice.call(arguments).join(', ')+'\n'+(new Error()).stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
utils_hooks__hooks.suppressDeprecationWarnings=false;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}
function isObject(input){return Object.prototype.toString.call(input)==='[object Object]';}
function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this['_'+i]=prop;}}
this._config=config;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}
function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}
return res;}
function Locale(config){if(config!=null){this.set(config);}}
var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return null;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&(typeof module!=='undefined')&&module&&module.exports){try{oldLocale=globalLocale._abbr;require('./locale/'+name);locale_locales__getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=locale_locales__getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}}
return globalLocale._abbr;}
function defineLocale(name,config){if(config!==null){config.abbr=name;if(locales[name]!=null){deprecateSimple('defineLocaleOverride','use moment.updateLocale(localeName, config) to change '+
'an existing locale. moment.defineLocale(localeName, '+
'config) should only be used for creating a new locale');config=mergeConfigs(locales[name]._config,config);}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){config=mergeConfigs(locales[config.parentLocale]._config,config);}else{deprecateSimple('parentLocaleUndefined','specified parentLocale is not defined yet');}}
locales[name]=new Locale(config);locale_locales__getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function updateLocale(name,config){if(config!=null){var locale;if(locales[name]!=null){config=mergeConfigs(locales[name]._config,config);}
locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;locale_locales__getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;}else if(locales[name]!=null){delete locales[name];}}}
return locales[name];}
function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
function locale_locales__listLocales(){return Object.keys(locales);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this;}else{return get_set__get(this,unit);}};}
function get_set__get(mom,unit){return mom.isValid()?mom._d['get'+(mom._isUTC?'UTC':'')+unit]():NaN;}
function get_set__set(mom,unit,value){if(mom.isValid()){mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}}
function getSet(units,value){var unit;if(typeof units==='object'){for(unit in units){this.set(unit,units[unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}
return this;}
function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?'+':''):'-')+
Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}
var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='';for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return regexEscape(s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}
function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(typeof callback==='number'){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken('MMMM',function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m,format){return isArray(this._months)?this._months[m.month()]:this._months[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m,format){return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}
if(typeof value==='string'){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(typeof value!=='number'){return mom;}}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this;}else{return get_set__get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}
var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}
function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}
var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,''));longPieces.push(this.months(mom,''));mixedPieces.push(this.months(mom,''));mixedPieces.push(this.monthsShort(mom,''));}
shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._monthsRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp('^('+longPieces.join('|')+')$','i');this._monthsShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')$','i');}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}
if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}
getParsingFlags(m).overflow=overflow;}
return m;}
var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,false],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,false],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,false],['YYYYDDD',/\d{7}/]];var isoTimes=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}
if(dateFormat==null){config._isValid=false;return;}
if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||' ')+isoTimes[i][0];break;}}
if(timeFormat==null){config._isValid=false;return;}}
if(!allowTime&&timeFormat!=null){config._isValid=false;return;}
if(match[4]){if(tzRegex.exec(match[4])){tzFormat='Z';}else{config._isValid=false;return;}}
config._f=dateFormat+(timeFormat||'')+(tzFormat||'');configFromStringAndFormat(config);}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config);}}
utils_hooks__hooks.createFromInputFallback=deprecate('moment construction falls back to js Date. This is '+
'discouraged and will be removed in upcoming major '+
'release. Please refer to '+
'https://github.com/moment/moment/issues/1407 for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y);}
return date;}
function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}
return date;}
addFormatToken('Y',0,0,function(){var y=this.year();return y<=9999?''+y:'+'+y;});addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input);});addParseToken('Y',function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',false);function getIsLeapYear(){return isLeapYear(this.year());}
function firstWeekOffset(year,dow,doy){var
fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}
return{year:resYear,dayOfYear:resDayOfYear};}
function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}
return{week:resWeek,year:resYear};}
function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}
function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var nowValue=new Date(utils_hooks__hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}
if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}
utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||(format===undefined&&input==='')){return valid__createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else if(isDate(input)){config._d=input;}else{configFromInput(config);}
if(!valid__isValid(config)){config._d=null;}
return config;}
function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date(utils_hooks__hooks.now());}else if(isDate(input)){config._d=new Date(+input);}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(typeof(input)==='object'){configFromObject(config);}else if(typeof(input)==='number'){config._d=new Date(input);}else{utils_hooks__hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof(locale)==='boolean'){strict=locale;locale=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return valid__createInvalid();}});var prototypeMax=deprecate('moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return valid__createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return local__createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
var now=function(){return Date.now?Date.now():+(new Date());};function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*36e5;this._days=+days+
weeks*7;this._months=+months+
quarters*3+
years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchShortOffset);addRegexToken('ZZ',matchShortOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=((string||'').match(matcher)||[]);var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-(+res);res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res;}else{return local__createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){if(typeof input==='string'){input=offsetFromString(matchShortOffset,input);}else if(Math.abs(input)<16){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm);}else if(typeof this._i==='string'){this.utcOffset(offsetFromString(matchOffset,this._i));}
return this;}
function hasAlignedHourOffset(input){if(!this.isValid()){return false;}
input=input?local__createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}
var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return this.isValid()?!this._isUTC:false;}
function isUtcOffset(){return this.isValid()?this._isUTC:false;}
function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}
var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var isoRegex=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(typeof input==='number'){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};}else if(!!(match=isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+
(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}
other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period).');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this;};}
function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}
updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding);}
if(days){get_set__set(mom,'Date',get_set__get(mom,'Date')+days*isAdding);}
if(months){setMonth(mom,get_set__get(mom,'Month')+months*isAdding);}
if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months);}}
var add_subtract__add=createAdder(1,'add');var add_subtract__subtract=createAdder(-1,'subtract');function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf('day'),diff=this.diff(sod,'days',true),format=diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';var output=formats&&(isFunction(formats[format])?formats[format]():formats[format]);return this.format(output||this.localeData().calendar(format,this,local__createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var localInput=isMoment(input)?input:local__createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return+this>+localInput;}else{return+localInput<+this.clone().startOf(units);}}
function isBefore(input,units){var localInput=isMoment(input)?input:local__createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return+this<+localInput;}else{return+this.clone().endOf(units)<+localInput;}}
function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);}
function isSame(input,units){var localInput=isMoment(input)?input:local__createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units||'millisecond');if(units==='millisecond'){return+this===+localInput;}else{inputMs=+localInput;return+(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units));}}
function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}
function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}
function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN;}
that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}
zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter'){output=output/3;}else if(units==='year'){output=output/12;}}else{delta=this-that;output=units==='second'?delta/1e3:units==='minute'?delta/6e4:units==='hour'?delta/36e5:units==='day'?(delta-zoneDelta)/864e5:units==='week'?(delta-zoneDelta)/6048e5:delta;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust);}
utils_hooks__hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if(isFunction(Date.prototype.toISOString)){return this.toDate().toISOString();}else{return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}else{return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}
function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||local__createLocal(time).isValid())){return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||local__createLocal(time).isValid())){return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}
if(units==='week'){this.weekday(0);}
if(units==='isoWeek'){this.isoWeekday(1);}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}
return this;}
function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}
function to_type__valueOf(){return+this._d-((this._offset||0)*60000);}
function unix(){return Math.floor(+this/1000);}
function toDate(){return this._offset?new Date(+this):this._d;}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function toJSON(){return this.isValid()?this.toISOString():null;}
function moment_valid__isValid(){return valid__isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}
function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}
return setWeekAll.call(this,input,week,weekday,dow,doy);}}
function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}
addFormatToken('Q',0,'Qo','quarter');addUnitAlias('quarter','Q');addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',matchWord);addRegexToken('ddd',matchWord);addRegexToken('dddd',matchWord);addWeekParseToken(['dd','ddd','dddd'],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}
return null;}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m,format){return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?'format':'standalone'][m.day()];}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return this._weekdaysShort[m.day()];}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return this._weekdaysMin[m.day()];}
function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}
for(i=0;i<7;i++){mom=local__createLocal([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp('^'+this.weekdays(mom,'').replace('.','\.?')+'$','i');this._shortWeekdaysParse[i]=new RegExp('^'+this.weekdaysShort(mom,'').replace('.','\.?')+'$','i');this._minWeekdaysParse[i]=new RegExp('^'+this.weekdaysMin(mom,'').replace('.','\.?')+'$','i');}
if(!this._weekdaysParse[i]){regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='dddd'&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='ddd'&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='dd'&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
return input==null?this.day()||7:this.day(this.day()%7?input:input-7);}
addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
function hFormat(){return this.hours()%12||12;}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,hFormat);addFormatToken('hmm',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken('hmmss',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});addFormatToken('Hmm',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2);});addFormatToken('Hmmss',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addRegexToken('hmm',match3to4);addRegexToken('hmmss',match5to6);addRegexToken('Hmm',match3to4);addRegexToken('Hmmss',match5to6);addParseToken(['H','HH'],HOUR);addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken('hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken('hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken('Hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken('Hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}
for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}
var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isSameOrAfter=isSameOrAfter;momentPrototype__proto.isSameOrBefore=isSameOrBefore;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toObject=toObject;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=toJSON;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.creationData=creationData;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);momentPrototype__proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);momentPrototype__proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);momentPrototype__proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779',getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1000);}
function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone();}
var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return isFunction(output)?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
function preParsePostFormat(string){return string;}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(isFunction(output))?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return isFunction(format)?format(output):format.replace(/%s/i,output);}
var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto._monthsRegex=defaultMonthsRegex;prototype__proto.monthsRegex=monthsRegex;prototype__proto._monthsShortRegex=defaultMonthsShortRegex;prototype__proto.monthsShortRegex=monthsShortRegex;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format);}
function list(format,index,field,count,setter){if(typeof format==='number'){index=format;format=undefined;}
format=format||'';if(index!=null){return lists__get(format,index,field,setter);}
var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter);}
return out;}
function lists__listMonths(format,index){return list(format,index,'months',12,'month');}
function lists__listMonthsShort(format,index){return list(format,index,'monthsShort',12,'month');}
function lists__listWeekdays(format,index){return list(format,index,'weekdays',7,'day');}
function lists__listWeekdaysShort(format,index){return list(format,index,'weekdaysShort',7,'day');}
function lists__listWeekdaysMin(format,index){return list(format,index,'weekdaysMin',7,'day');}
locale_locales__getSetGlobalLocale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});utils_hooks__hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1);}
function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==='month'?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function duration_as__valueOf(){return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function duration_get__get(units){units=normalizeUnits(units);return this[units+'s']();}
function makeGetter(name){return function(){return this._data[name];};}
var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<thresholds.s&&['s',seconds]||minutes<=1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours<=1&&['h']||hours<thresholds.h&&['hh',hours]||days<=1&&['d']||days<thresholds.d&&['dd',days]||months<=1&&['M']||months<thresholds.M&&['MM',months]||years<=1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;return true;}
function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var iso_string__abs=Math.abs;function iso_string__toISOString(){var seconds=iso_string__abs(this._milliseconds)/1000;var days=iso_string__abs(this._days);var months=iso_string__abs(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return'P0D';}
return(total<0?'-':'')+
'P'+
(Y?Y+'Y':'')+
(M?M+'M':'')+
(D?D+'D':'')+
((h||m||s)?'T':'')+
(h?h+'H':'')+
(m?m+'M':'')+
(s?s+'S':'');}
var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});utils_hooks__hooks.version='2.12.0';setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.now=now;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.updateLocale=updateLocale;utils_hooks__hooks.locales=locale_locales__listLocales;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;utils_hooks__hooks.prototype=momentPrototype;var _moment=utils_hooks__hooks;return _moment;}));}catch(e){}};if(!utag_condload){try{utag_trackingOptOut=function(){document.cookie='utag_optout=1;path=/;domain='+utag.cfg.domain+';expires=expires=Thu, 31 Dec 2099 00:00:00 GMT;'};utag_trackingOptIn=function(){document.cookie='utag_optout=0;path=/;domain='+utag.cfg.domain+';expires=expires=Thu, 31 Dec 2099 00:00:00 GMT;'};if(document.cookie.indexOf('utag_optout=1')>-1){if(typeof utag_cfg_ovrd=='undefined')utag_cfg_ovrd={};utag_cfg_ovrd['noload']=1}}catch(e){}};if(!utag_condload){try{window.cxTealium=(function(d){var debug_mode=true;var verbose_mode=true;var utag_domain="tags.tiqcdn.com";var utag_async_url="//tags.tiqcdn.com/utag/cathaypacific/main/prod/utag.js";var utag_sync_url="//tags.tiqcdn.com/utag/cathaypacific/main/prod/utag.sync.js";return{helper:{flatten:function(ob){var toReturn={};for(var i in ob){if(!ob.hasOwnProperty(i))continue;if(typeof ob[i]=='object'&&!(ob[i]instanceof Array)){var flatObject=DataLayer.Helper.flatten(ob[i]);for(var x in flatObject){if(!flatObject.hasOwnProperty(x))continue;toReturn[i+'.'+x]=flatObject[x];}}else{toReturn[i]=ob[i];}}
return toReturn;},capitalise:function(string){return string.charAt(0).toUpperCase()+string.slice(1).toLowerCase()},cabin_name:function(code){cabin={"Y":"ECONOMY","W":"PEY","C":"BUSINESS","F":"FIRST"}
return cabin[code]},concat:function(array,delimiter){var d=delimiter||"|";return array.join(d);},map:function(array,attr){var new_array=[];for(var i=0;i<array.length;i++){item=array[i][attr];new_array.push(item);};return array.map(function(a){return a[attr];});},map_and_concat:function(array,attr,delimiter){var new_array=cxTealium.helper.map(array,attr);return cxTealium.helper.concat(new_array,delimiter);},pad:function(str,_char,len,to){if(!str||!_char||str.length>=len){return str;}
to=to||0;var ret=str;var max=(len-str.length)/_char.length+1;while(--max){ret=(to)?ret+_char:_char+ret;}
return ret;},sum:function(array){var count=0;for(var i=array.length;i--;){count+=parseFloat(array[i]);}
return count},map_with_qty:function(array,attr){var attrs=[];for(var i=0;i<array.length;i++){for(var q=0;q<array[i].qty;q++){attrs.push(eval("array[i]"+'["'+attr.replace(/\./g,'"]["')+'"]'))};};return attrs;},sum_with_qty:function(array,attr){floats=[];mapped_items=cxTealium.helper.map_with_qty(array,attr)
for(var i=0;i<mapped_items.length;i++){floats.push(parseFloat(mapped_items[i]));};var sum=this.sum(floats)
return parseFloat(parseFloat(sum).toFixed(2))},event_raiser:function(evt){switch(evt){case'HOMEPAGE::PRIMARY-BANNER':tealium_event_data={event_id:'BANNER_IMPRESSION::PRIMARY_BANNER::'+$('.primary-promotion > div.description > div.item > div > a').attr('manual_cm_sp'),event_category:'BANNER_IMPRESSION',event_action:'BANNER_IMPRESSION::PRIMARY_BANNER',event_label:$('.primary-promotion > div.description > div.item > div > a').attr('manual_cm_sp'),event_value:0}
cxTealium.track.event(tealium_event_data);$('.primary-promotion > div.description > div.item > div > a').click(function(){tealium_event_data={event_id:'BANNER_CLICK::PRIMARY_BANNER::'+$('.primary-promotion > div.description > div.item > div > a').attr('manual_cm_sp'),event_category:'BANNER_CLICK',event_action:'BANNER_CLICK::PRIMARY_BANNER',event_label:$('.primary-promotion > div.description > div.item > div > a').attr('manual_cm_sp'),event_value:0}
cxTealium.track.event(tealium_event_data);})
break;default:break;}
cxTealium.log('[Event Raiser] '+evt);},},currency:{rates:(function(c){var tealiumiq_currency=window.tealiumiq_currency||{};var rates;if(c&&c!="undefined"&&c!=""&&c!="{}"){rates=JSON.parse(c);}else if(tealiumiq_currency.rates){sessionStorage.setItem("tealium_currency",JSON.stringify(tealiumiq_currency.rates));rates=tealiumiq_currency.rates;}
return rates}(sessionStorage.tealium_currency)),convert:function(a,f,t){var isString=typeof a=="string",converted=isString?[a]:a;for(var i=0;i<converted.length;i++){converted[i]=parseFloat(converted[i]);f=f.toUpperCase();t=t.toUpperCase();if(converted[i]>0&&this.rates[f]>0&&this.rates[t]>0){var v=converted[i]/this.rates[f]*this.rates[t];converted[i]=v.toFixed(2);}}
if(isString)return converted[0];else return converted;}},privacy:{opt_in:function(){utag_trackingOptIn();utag.cfg.noload=0;utag.loader.PINIT();cxTealium.utag.view(d);tealium_event_data={event_id:'PRIVACY::OPT-IN::ALL',event_category:'PRIVACY',event_action:'PRIVACY::OPT-IN',event_label:'PRIVACY::OPT-IN::ALL',event_value:1};cxTealium.track.event(tealium_event_data);cxTealium.debug("opt_in");},opt_out:function(){tealium_event_data={event_id:'PRIVACY::OPT-OUT::ALL',event_category:'PRIVACY',event_action:'PRIVACY::OPT-OUT',event_label:'PRIVACY::OPT-OUT::ALL',event_value:1};cxTealium.track.event(tealium_event_data);utag_trackingOptOut();cxTealium.debug("opt_out");}},cart:{addition:function(p){cxTealium.log("[Cart-Addition] "+p.product_id);},removal:function(p){cxTealium.log("[Cart-Removal] "+p.product_id);}},utag:{load:{async:function(f,e,h,g,cb){f=utag_async_url;e=document;h="script";g=e.createElement(h);g.src=f;g.type="text/java"+h;g.async=true;f=e.getElementsByTagName(h)[0];f.parentNode.insertBefore(g,f)}},link:function(udo){udo=cxTealium.helper.flatten(udo);utag.link(udo);},view:function(udo){udo=cxTealium.helper.flatten(udo);utag.view(udo);},},event:function(eval_id,eval_category,eval_action,eval_label,eval_value){cxTealium.track.event({event_id:eval_id,event_category:eval_category,event_action:eval_action,event_label:eval_label,event_value:eval_value});cxTealium.debug("cxTealium.event is deprecated. Please use cxTealium.track.event(event)");},track:{errors:function(){if(d.errors){d.errors.map(function(e){d.config.tag_trigger="cxTealium.track.error";d.config.tag_type="error";d.error_description=e.error_description.replace(/<(?:.|\n)*?>/gm,'');d.error=e;cxTealium.utag.link(d);cxTealium.log("[Error] "+e.error_code+d.error_description);})};},funnel:function(f){cxTealium.log("[Funnel] "+f.step_id);},exception:function(e){d.exception={exp_name:e.name,exp_message:e.message,exp_description:"["+e.name+"] "+e.message};d.config.tag_trigger="cxTealium.track.exception";d.config.tag_type="exception";cxTealium.utag.link(d);cxTealium.log("[Exception] "+d.exception.exp_description);},event:function(e){d.config.tag_trigger="cxTealium.track.event";if(e.event_category!='TIMETABLE'){d.event=e;cxTealium.utag.link(d);delete d.event;cxTealium.log("[Event] "+e.event_id);}},pageview:function(p,s){d.config.tag_trigger="cxTealium.track.pageview";d.config.tag_type="pageview";d.page=p;d.page.search_keyword=s.keyword;cxTealium.utag.view(d);cxTealium.log("[PageView] "+p.page_id)},link:function(l){cxTealium.log("[Link] "+l.attr('data-cxlinktag-name'));},registration:function(r){cxDataLayer.registration.track(r)},element:function(e){cxTealium.log("[Element] "+e.element_id);},},log:function(m){(function(a){function b(){}
for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})(function(){try{console.log();return window.console;}catch(a){return(window.console={});}}());if(verbose_mode){console.log("[cxTealium] "+m)};},debug:function(m){if(debug_mode){cxTealium.log(m);};},prettify:function(udo){udo=udo||cxDataLayer
cxTealium.log("=======================================")
cxTealium.log(JSON.stringify(udo,null,"\t"));cxTealium.log("=======================================")}};})(cxDataLayer);}catch(e){}};if(!utag_condload){try{window.optimizely=window.optimizely||[];window.cxOptimizely=window.cxOptimizely||{};cxOptimizely.event=function(event_name){if(typeof(event_name)!="undefined"&event_name!=""){cxTealium.log("[Optimizely] Event: "+event_name);window['optimizely'].push({type:"event",eventName:event_name});};};cxOptimizely.dimension=function(dimension_id,value){cxTealium.log("[Optimizely] Dimension: "+dimension_id+" - "+value);window.optimizely.push(['setDimensionValue',dimension_id,value]);};cxOptimizely.set_user_id=function(user_id){cxTealium.log("[Optimizely] User ID: "+user_id);window.optimizely.push(["setUserId",user_id]);};cxOptimizely.revenue=function(transaction_id,subtotal_in_hkd){cxTealium.log("[Optimizely] Revenue: "+transaction_id+"@HKD$"+subtotal_in_hkd);window['optimizely'].push({type:"event",eventName:"purchase",tags:{transaction_id:transaction_id,revenue:subtotal_in_hkd}});};cxOptimizely.activate=function(experiment_id){cxTealium.log("[Optimizely] Activated: "+String(experiment_id));window.optimizely.push(["activate",experiment_id]);};cxOptimizely.log=function(){window.optimizely.push(["log"]);};cxOptimizely.push=function(arg){window.optimizely.push(arg)};}catch(e){}};if(!utag_condload){try{window.tmsCoremetricsEventTag=function(event_id,action_type,event_category,points,attr){try{if(event_id.indexOf('Flight Msg - New Request')!=-1){attr=points
points=0};setTimeout(cmCreateConversionEventTag,1000,event_id,action_type,event_category,points,attr);}catch(e){console.log(e.msg)}};window.tmsCoremetricsRegistrationTag=function(userProfile){};window.tmsCoremetricsElementTag=function(element_id,element_category,attr){$(document).ready(function(){cmCreateElementTag(element_id,element_category,attr);});};window.tmsCoremetricsPageViewTag=function(page_id,category_id,search_term,search_results,attr){$(document).ready(function(){datalayer.page.search_keyword=search_term;if(document.URL.indexOf('investor-relations/announcements.html')!=-1){search_term="IR::"+search_term};datalayer.page.search_results=search_results;utag.view({force_load:true,'page.search_keyword':search_term,'page.search_results':search_results});});};window.tmsCoremetricsLinkClickTag=function(href,link_name,page_id){cmCreateManualLinkClickTag(href,link_name,page_id);};}catch(e){}};if(!utag_condload){try{window.cxTagLogger=function(m){cxTealium.log("[Deprecated] "+m);};}catch(e){}};if(!utag_condload){try{window.cxDataLayer.patch=function(){if(this.patched!=true){if(typeof this.indicator=='undefined'){this.indicator={}};if(typeof this.member=='undefined'){this.member={}};if(typeof this.page.search=='undefined'){this.page.search={}};if(typeof this.page.system=='undefined'){this.page.system={}};if(document.domain.indexOf('cathaypacific.com')!==-1){this.page.brand='CX'}else{this.page.brand='KA'};if(this.page.system.name=='CQ5'){if(typeof core_pageID=='undefined'){var core_pageID};if(typeof core_categoryID=='undefined'){var core_categoryID};this.page.page_id=core_pageID||this.page.page_id.replace('.html','');this.page.page_category=core_categoryID||this.page.page_category.replace('.html','');if(this.page.page_id=='/cx'||this.page.page_id=='/ka'){this.page.page_id=this.page.brand+'-SPLASH'
this.page.page_category='en_INTL'};if(this.page.page_id.split("/")[3]=="flightoffer"){var path=document.URL.split('/')
this.page.page_id="/"+[path[3],path[4],path[5].replace(".html","")].join("/")};if(this.page.page_category=='/cx'||this.page.page_category=='/ka'){this.page.page_category=this.page.page_id};};if(this.page.system.name=="IBE"){if(this.member){this.member.username=""};if(typeof document.getElementsByName('ENTRYCOUNTRY')[0]!=='undefined'){var country=document.getElementsByName('ENTRYCOUNTRY')[0].value
var language=document.getElementsByName('ENTRYLANGUAGE')[0].value
var locale=[language,country].join('_')
Cookies.set('locale',locale)
this.page.country=country
this.page.language=language.replace("zh_CN","sc").replace("zh_TW","zh")
this.page.locale=locale
cxTealium.log('Save Locale in IBE')};this.page.timestamp=this.page.timestamp+'+00:00'
var c=this.page.page_code;if(typeof this.page.system.promotion!=='undefined'){var promo=this.page.system.promotion
this.page.system.params.promotion={promo_code:promo.code,fare_id:promo.fare_id};}else{this.page.system.params.promotion={}};if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AWCR'||c=='AWCL'||c=='AVAI'){this.itinerary.datetime_arrival=this.page.system.params.date_return;this.itinerary.datetime_depart=this.page.system.params.date_depart;this.page.system.params.route=this.itinerary.route;this.page.system.params.trip_type=this.itinerary.trip_type;this.page.system.params.cabin=this.itinerary.cabin;this.itinerary.segments=[];};if(this.page.page_name.indexOf('Select_Flights')!=-1||c=="FFPR"||c=='FFPC'||c=='AVAI'){delete(this.products);};if(this.page.page_id.indexOf('::BOH::')!=-1){var stream=this.page.system.params.flow.split('_')[0];if(stream=='Promotion'){stream='REVENUE'};this.page.page_id=this.page.page_id.replace("::BOH::","::"+stream+"::")+"-BOH"};};if(document.URL.indexOf("icheckin2/")!=-1){this.application=this.app
delete this.app
this.page.page_id.replace("KAOLCI","OLCI");this.page.page_category.replace("KAOLCI","OLCI");this.itinerary=this.itinereary||{};if(!this.itinerary.pax){this.itinerary.pax={adult:0,child:0,infant:0};};if(!this.itinerary.outbound){this.itinerary.outbound={};this.itinerary.inbound={};};this.itinerary.segments=[];};};this.patched=true;cxTealium.log('cxDataLayer patched.');return this;};try{window.cxDataLayer.patch();}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.patch]"+e.message})};}catch(e){}};if(!utag_condload){try{var cxDataLayer=(function(){d=cxDataLayer||{};h=document.domain;e=(h=='www.cathaypacific.com'||h=='book.cathaypacific.com'||h=='cdn.cathaypacific.com'||h=='www.dragonair.com'||h=='book.dragonair.com'||h=='cdn.dragonair.com'||h=='holidays.cathaypacific.com')?('prod'):('qa')
b=(h.indexOf('cathaypacific.com')!==-1)?('cx'):('ka')
c=cxDataLayer.page.country
d.config={env:e,tag_trigger:"utag.view",tag_type:"pageview",random_id:(Math.floor(Math.random()*90000)+100000),tealium:{version:d.config.tealium.version||"##UTVERSION##"},optimizely:{project_id:(e=='prod')?('1370244502'):('1633341726')},coremetrics:{client_id:(function(){client_ids={cx:{AU:'90293196',BH:'90293333',CA:'90293470',CH:'90296434',CN:'90293607',GZ:'90291004',DK:'90298228',FR:'90293744',DE:'90293881',HK:'90293059',IN:'90294018',ID:'90294155',IE:'90326009',IT:'90294292',JP:'90294429',KR:'90294566',MY:'90294703',MV:'90296408',NL:'90294840',NZ:'90294977',PK:'90295114',PH:'90295251',QA:'90383589',RU:'90325872',SA:'90295388',SG:'90295525',ZA:'90295662',LK:'90295799',TW:'90295936',TH:'90296073',AE:'90296210',GB:'90296347',US:'90296369',VN:'90296382',INTL:'90298215'},ka:{BD:'90291415',KH:'90363958',CN:'90291552',GZ:'90291141',HK:'90291689',IN:'90291826',JP:'90291963',MM:'90296395',MY:'90292100',NP:'90292648',PH:'90292785',TW:'90292237',TH:'90292374',VN:'90292511',INTL:'90292922'}};client_id_local=client_ids[b][c]||client_ids[b]['INTL'];client_id_master=(b=='cx')?('90291278'):('90290867');var special_handling='';if(new RegExp(/\/cx-mobile\/|\/timetable-mobile/).test(cxDataLayer.page.page_id)){special_handling='mobile';}else if(cxDataLayer.page.country=='ES'||cxDataLayer.page.country=='IL'){special_handling='multisite';}
switch(special_handling){case'multisite':client_id_master=client_id_master.replace('90291278','51500000');client_id_master=((e!=='prod')?client_id_master.replace('5','8'):client_id_master);client_id_local=b.toUpperCase()+c.toUpperCase();return[client_id_master,client_id_local].join('|');break;case'mobile':d['application']={env:e};d['screenView']=true;return'90227263';break;default:client_id_master=((e!=='prod')?client_id_master.replace('9','6'):client_id_master);client_id_local=((e!=='prod')?client_id_local.replace('9','6'):client_id_local);return d.config.coremetrics.client_id||[client_id_master,client_id_local].join(';');break;}})(),cookie_domain:(b=='cx')?('cathaypacific.com'):('dragonair.com'),datacollection_domain:(e=='prod')?('data.coremetrics.com'):('testdata.coremetrics.com')},ga:{tracker_id:(function(){switch(e){case'dev':tid='UA-54513972-1'
break;case'qa':tid='UA-54513972-1'
break;case'prod':tid='UA-54513972-3'
break;}
if(new RegExp(/\/cx-mobile\//).test(cxDataLayer.page.page_id)){tid='UA-54513972-4';}
return tid})()}};return d})();}catch(e){}};if(!utag_condload){try{try{cxDataLayer.application=(function(d,t){var url=document.URL
a=d.application||{};var host=document.domain
if(host.indexOf("www")!=-1||host.indexOf("cdn")!=-1){a={name:"AEM",version:"NA"}};if(d.page.page_id.indexOf("IBE::")!=-1){a={name:"IBE",version:document.getElementsByTagName("link")[1].getAttribute("href").split("/")[0].replace("cui-","")}};if(d.page.page_id.indexOf("TRP::")!=-1){a={name:"TRP",version:"NA"}};if(url.indexOf("icheckin2/")!=-1){a=cxDataLayer.app;delete cxDataLayer.app;};if(url.indexOf("manage-booking/")!=-1){a={name:"MMB",version:"NA"}};if(url.indexOf("/book-a-trip/timetable.html")!=-1){a={name:"TIMETABLE",version:"NA"}};if(url.indexOf("/frequent-flyers/")!=-1){a={name:"FFP",version:"NA"}};return a;}(cxDataLayer,cxTealium));}catch(e){};}catch(e){}};if(!utag_condload){try{try{cxDataLayer.page=(function(d,t){var url=document.URL;var host=document.domain;p=cxDataLayer.page||{};var page_id=p.page_id.toUpperCase();if(d.application.name=="IBE"){p.stream=d.page.system.params.stream.toUpperCase().substring(0,3);p.flow=(function(flow){var f;flows={"ATC_STANDARD_SCHEDDRIVEN":"SD","ATC_STANDARD_SHOPPER":"FP","PROMOTION_GETAWAYSURPRISE":"PROMO-FANFARES","PROMOTION_GV":"PROMO-GV","PROMOTION_MICE":"PROMO-MICE","PROMOTION_SENIOR_YOUTH_STUDENT":"PROMO-SYS","PROMOTION_SPECIALFARES":"PROMO-SPECIAL","PROMOTION_US_LEVERAGE":"PROMO-US_LEVERAGE","REDEMPTION_COMPANION_SCHEDULEDRIVEN":"SD-COMPANION","REDEMPTION_STANDARD_FLEXPRICER":"FP","REDEMPTION_STANDARD_SCHEDULEDRIVEN":"SD","REVENUE_BOH":"BOH","REVENUE_COMPLEXFLEX":"FP-COMPLEX","REVENUE_COMPLEXSCHEDULEDRIVEN":"SD-COMPLEX","REVENUE_COTS":"COTS","REVENUE_FLEXPRICER":"FP","REVENUE_SCHEDULEDRIVEN":"SD"}
f=flows[flow];return f;}(d.page.system.params.flow.toUpperCase()));};if(d.application.name=="TRP"){p.stream="REV"
p.flow=(function(page_id){var f;if(page_id.indexOf("HOTEL")!=-1){f="HTL";}else if(page_id.indexOf("PACKAGE")!=-1){f="PKG";};return f;}(p.page_id.toUpperCase()));};return p;}(cxDataLayer,cxTealium));}catch(e){};}catch(e){}};if(!utag_condload){try{try{cxDataLayer.search=(function(d,t){var url=document.URL;var host=document.domain;s=cxDataLayer.search||{};if(d.application.name=="IBE"){var c=d.page.page_code;var i=d.itinerary;if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AWCR'||c=='AWCL'||c=='AVAI'){i=this.itinerary;s={type:"TICKET",keyword:["TICKET",i.route,i.trip_type,t.helper.cabin_name(i.cabin)].join('::'),params:{date_outbound:d.page.system.params.date_depart,date_inbound:d.page.system.params.date_return,cabin:i.cabin,trip_type:i.trip_type,pax:{adult:i.pax.adult,child:i.pax.child,infant:i.pax.infant,total:i.pax.adult+i.pax.child+i.pax.infant}}};};};if(false){if(url.indexOf("/hotel/searchResults.do")!=-1){s={type:"HTL",keyword:"HTL",params:{}}}else if(url.indexOf("/package/searchResults.do")!=-1){s={type:"PKG",keyword:"PKG",params:{}}}};return s;}(cxDataLayer,cxTealium));}catch(e){};}catch(e){}};if(!utag_condload){try{try{cxDataLayer.funnel=(function(d,t){step_no=(function(d,t){var n;var a=d.application.name;var f=d.page.flow;var page_id=d.page.page_id.toUpperCase();var url=document.URL;if(a=="IBE"){if(f.indexOf("FP")!=-1||f.indexOf("PROMO")!=-1){if(page_id.indexOf("SELECT_DATES")!=-1){n=1}else if(page_id.indexOf("SELECT_FLIGHTS")!=-1){n=2}else if(page_id.indexOf("FARE_DETAILS")!=-1){n=3}else if(page_id.indexOf("PASSENGERS")!=-1){n=4}else if(page_id.indexOf("PAYMENT")!=-1){n=5}else if(page_id.indexOf("CONFIRMATION")!=-1){n=6}}else if(f.indexOf("SD")!=-1){if(page_id.indexOf("AVAILABILITY")!=-1){n=1}else if(page_id.indexOf("FARE_DETAILS")!=-1){n=2}else if(page_id.indexOf("PASSENGERS")!=-1){n=3}else if(page_id.indexOf("PAYMENT")!=-1){n=4}else if(page_id.indexOf("CONFIRMATION")!=-1){n=5}}else if(p.flow.indexOf("BOH")!=-1){if(page_id.indexOf("PAYMENT")!=-1){n=2}else if(page_id.indexOf("CONFIRMATION")){n=3}};}
else if(a=="TRP"){if(f.indexOf("HTL")!=-1){if(url.indexOf("searchResults")!=-1){n=1}else if(url.indexOf("reviewHotel")!=-1){n=2}else if(url.indexOf("shoppingCart")!=-1){n=3}else if(url.indexOf("passengerDetails")!=-1){n=4}else if(url.indexOf("confirmation")!=-1){n=6}}else if(f.indexOf("PKG")!=-1){if(url.indexOf("searchResults")!=-1){n=1}else if(url.indexOf("reviewPackage")!=-1){n=2}else if(url.indexOf("changeFlight")!=-1){n="2a"}else if(url.indexOf("reservePackage")!=-1){n=3}else if(url.indexOf("passengerDetails")!=-1){n=4}else if(url.indexOf("confirmation")!=-1){n=6}}}else if(false){}
return n}(d,t));funnel_steps_template={IBE:{FP:{0:"FLIGHT SEARCH",1:"SELECT DATES",2:"SELECT FLIGHTS",3:"FARE DETAILS",4:"PASSENGERS",5:"PAYMENT",6:"CONFIRMATION"},SD:{0:"FLIGHT SEARCH",1:"SELECT FLIGHTS",2:"FARE DETAILS",3:"PASSENGERS",4:"PAYMENT",5:"CONFIRMATION"}},BOH:{1:"BOOKING ON-HOLD",2:"PAYMENT",3:"CONFIRMATION"},TRP:{HTL:{1:"SEARCH RESULTS",2:"HOTEL DETAILS",3:"REVIEW",4:"PASSENGERS",5:"PAYMENT",6:"CONFIRMATION"},PKG:{1:"SEARCH RESULTS",2:"PACKAGE DETAILS","2a":"PACKAGE DETAILS - CHANGE FLIGHTS",3:"REVIEW",4:"PASSENGERS",5:"PAYMENT",6:"CONFIRMATION"}}}
funnels={IBE:{REV:{FP:{funnel_name:"IBE REVENUE FLEXPRICER",funnel_id:"[IBE][REV][FP]",funnel_steps:funnel_steps_template["IBE"]["FP"]},SD:{funnel_name:"IBE REVENUE SCHEDULE-DRIVEN",funnel_id:"[IBE][REV][SD]",funnel_steps:funnel_steps_template["IBE"]["SD"]},BOH:{funnel_name:"IBE REVENUE BOOKING ON-HOLD",funnel_id:"[IBE][REV][BOH]",funnel_steps:funnel_steps_template["IBE"]["BOH"]},"FP-M":{funnel_name:"IBE REVENUE FLEXPRICER MULTI-CITY",funnel_id:"[IBE][REV][FP-M]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"SD-M":{funnel_name:"IBE REVENUE SCHEDULE-DRIVEN MULTI-CITY",funnel_id:"[IBE][REV][SD-M]",funnel_steps:funnel_steps_template["IBE"]["SD"]},RIBE:{funnel_name:"IBE REVENUE RESPONSIVE",funnel_id:"[IBE][REV][RIBE]",funnel_steps:{1:"",2:"FARE CALENDAR",3:"Passenger Info & Services"}},"PROMO-FANFARES":{funnel_name:"IBE REVENUE PROMO",funnel_id:"[IBE][REV][PROMO-FANFARES]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"PROMO-GV":{funnel_name:"IBE REVENUE PROMO",funnel_id:"[IBE][REV][PROMO-GV]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"PROMO-MICE":{funnel_name:"IBE REVENUE PROMO MICE",funnel_id:"[IBE][REV][PROMO-MICE]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"PROMO-GV":{funnel_name:"IBE REVENUE GV",funnel_id:"[IBE][REV][PROMO-GV]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"PROMO-SYS":{funnel_name:"IBE REVENUE SENIOR-YOUTH-STUDENT",funnel_id:"[IBE][REV][PROMO-SYS]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"PROMO-US_LEVERAGE":{funnel_name:"IBE REVENUE US-LEVERAGE",funnel_id:"[IBE][REV][PROMO-US_LEVERAGE]",funnel_steps:funnel_steps_template["IBE"]["FP"]},COTS:{funnel_name:"IBE REVENUE COTS",funnel_id:"[IBE][REV][COTS]",funnel_steps:funnel_steps_template["IBE"]["FP"]}},RED:{"FP":{funnel_name:"IBE REDEMPTION FLEXPRICER",funnel_id:"[IBE][RED][FP]",funnel_steps:funnel_steps_template["IBE"]["FP"]},"SD":{funnel_name:"IBE REDEMPTION SCHEDULE-DRIVEN",funnel_id:"[IBE][RED][SD]",funnel_steps:funnel_steps_template["IBE"]["SD"]},"SD-COMPANION":{funnel_name:"IBE REVENUE ",funnel_id:"[IBE][REV][PROMO-US_LEVERAGE]",funnel_steps:funnel_steps_template["IBE"]["FP"]}}},TRP:{REV:{HTL:{funnel_name:"TRP REVENUE HOTEL",funnel_id:"[TRP][REV][HTL]",funnel_steps:funnel_steps_template["TRP"]["HTL"]},PKG:{funnel_name:"TRP REVENUE PACKAGE",funnel_id:"[TRP][REV][PKG]",funnel_steps:funnel_steps_template["TRP"]["PKG"]}}}}
return(function(a,s,flow,n){if(n){f=funnels[a][s][flow];funnel_step={step_id:f.funnel_id+'[STEP-'+n+'] '+f.funnel_steps[n],step_no:n,funnel_id:f.funnel_id,funnel_name:f.funnel_name,step_name:"["+n+"] "+f.funnel_steps[n]};t.log("[Funnel] "+funnel_step.step_id)
return funnel_step}}(d.application.name,d.page.stream,d.page.flow,step_no))}(cxDataLayer,cxTealium))}catch(e){};}catch(e){}};if(!utag_condload){try{try{cxDataLayer.itinerary=(function(d,t){if(d.itinerary&&d.application.name=="IBE"){i=cxDataLayer.itinerary||{};p=d.page||{};var dd=i.datetime_depart!=''&&typeof(i.datetime_depart)!='undefined'?moment(i.datetime_depart):moment(p.system.params.date_depart);var rd=i.datetime_arrival!=''&&typeof(i.datetime_arrival)!='undefined'?moment(i.datetime_arrival):moment(p.system.params.date_return);var s=i.segments;itinerary={route:i.route,cabin:i.cabin,outbound:{datetime:dd.format(),datetime_unix:dd.valueOf(),date:dd.format('YYYY-MM-DD'),date_L:dd.format('L'),month:dd.format('YYYY-MM'),year:dd.format('YYYY')},inbound:{datetime:rd.format(),date:rd.format('YYYY-MM-DD'),datetime_unix:dd.valueOf(),date_L:rd.format('L'),month:rd.format('YYYY-MM'),year:rd.format('YYYY')},origin:{airport:i.origin_airport,city:i.origin_city,city_name:"",country:i.origin_country},destination:{airport:i.destination_airport,city:i.destination_city,city_name:sessionStorage.getItem("itinerary.destination.city_name"),country:i.destination_country},trip_type:i.trip_type,days_advance:dd.diff(moment(),'days'),flight_duration:s==''||typeof(s)=='undefined'?'':t.helper.sum(t.helper.map(s,"datetime_duration")),trip_duration:rd.diff(dd,'days'),pax:{adult:i.pax.adult,child:i.pax.child,infant:i.pax.infant,total:parseInt(i.pax.adult)+parseInt(i.pax.child)+parseInt(i.pax.infant),combination:(function(d,t){var pax=d.itinerary.pax;var pax_initials=[];for(x in pax){for(var i=0,no_of_pax=pax[x],l=no_of_pax;i<l;i++){pax_initials.push(x.charAt(0).toUpperCase());}};return(t.helper.pad(pax_initials.join(''),'0',8,1));}(d,t))},segment_count:i.segments==''||typeof(i.segments)=='undefined'?'':i.segments.length,flights:i.flights,segmented_flights:i.segments==''||typeof(i.segments)=='undefined'?'':t.helper.map_and_concat(s,"flight"),segmented_carriers:i.segments==''||typeof(i.segments)=='undefined'?'':t.helper.map_and_concat(s,"carrier"),segmented_cabins:i.segments==''||typeof(i.segments)=='undefined'?'':t.helper.map_and_concat(s,"cabin"),segmented_rbds:i.segments==''||typeof(i.segments)=='undefined'?'':t.helper.map_and_concat(s,"rbd"),segmented_durations:i.segments==''||typeof(i.segments)=='undefined'?'':t.helper.map_and_concat(s,"datetime_duration"),segmented_airports:i.segments==''||typeof(i.segments)=='undefined'?'':(function(s,t){var airports=[];for(var i=0;i<s.length;i++){origin_destination=[s[i].origin,s[i].destination].join('_');airports.push(origin_destination);};return airports.join("|")}(s,t)),segments:s};if(d.itinerary&&d.application.name=="TRP"){};return itinerary;}}(cxDataLayer,cxTealium));}catch(e){cxTealium.log(e.message)};}catch(e){}};if(!utag_condload){try{try{cxDataLayer.booking=(function(d,t){var url=document.URL;var host=document.domain;var i=d.itinerary;booking=cxDataLayer.booking||{};if(d.application.name=="IBE"){booking={booking_id:(function(d,t){var p=d.page;var date_local=moment(p.timestamp).zone('+0800').format('YYYY-MM-DD');var country=p.country;var booking_id=[date_local,d.page.country,p.brand,"IBE",p.stream,d.transaction.pnr,i.pax.combination].join('::')
return booking_id.toUpperCase();}(d,t)),pnr:d.transaction.pnr,supplier_ref:"",destination:i.destination,route:i.route,pax:i.pax,ticket:"",days_advance:"",booked_at:"",confirmed_at:"",held_at:"",hold_till:"",carted_at:(function(d,t){carted_at=sessionStorage['cxDataLayer.booking.carted_at']||"";return carted_at;}(d,t)),checkin_at:"",cancelled_at:"",changed_at:"",booked_from:"",status:"",type:"",fxmp:"",subtotal:d.transaction.payment.subtotal,subtotal_in_hkd:"",fxmp_currency:"",subtotal_fxmp_currency:""}};if(cxDataLayer.booking&&cxDataLayer.itinerary){booking["pax"].total=parseInt(i["pax"].adult)+parseInt(i["pax"].child)+parseInt(i["pax"].infant);}
if(d.application.name=="TRP"){};return booking;}(cxDataLayer,cxTealium));}catch(e){console.log(e.message)};}catch(e){}};if(!utag_condload){try{window.cxTagTracker=function(e,prefix){try{cxTagLogger([prefix,'ERROR',e.name,e.message].join('::'));}catch(e){cxTagLogger('[cxTagTracker] Error.')
}};}catch(e){}};if(!utag_condload){try{cxTealium.log("==================================================")
cxTealium.log("[Version] "+cxDataLayer.config.tealium.version);}catch(e){}};if(!utag_condload){try{cxTealium.channel_map={"asiamiles.com":"asiamiles.com","facebook.com":"Facebook","fourqusare.com":"Foursquare","instagram.com":"instagram","linkedin.com":"LinkedIn","pinterest.com":"Pinterest","renren.com":"RenRen","weibo.cn":"Weibo","weibo.com":"Weibo","youtube.com":"YouTube","twitter.com":"Twitter","aviationtraining.cathaypacific.com":"CX Mini Sites","www.cathayholidays.co.jp":"cathayholidays.co.jp","cathaypacific-campaign.com":"cathaypacific-campaign.com","cathaypacificcargo.com":"cathaypacificcargo.com","cathaypacificinsights.com":"cathaypacificinsights.com","www.cxagents.com":"CX Agents","www.cxholidays.com":"CX Holidays","cxleverage.com":"cxleverage.com","discovery.cathaypacific.com":"discovery.cathaypacific.com","downloads.cathaypacific.com":"downloads.cathaypacific.com","www.dragonaircargo.com":"dragonaircargo.com","dragonairhost.com":"CX Mini Sites","events.cathaypacific.com":"events.cathaypacific.com","iconnect.cathaypacific.com":"iconnect.cathaypacific.com","intracx.cathaypacific.com":"IntraCX","japanunlimited.cathaypacific.com":"CX Mini Sites","jobsatcathaypacific.com":"jobsatcathaypacific.com","www.kaagents.com":"KA Agents","www.cxholidays.com":"www.cxholidays.com","kayouthaviationacademy.com":"CX Mini Sites","learning.cathaypacific.com":"learning.cathaypacific.com","neweconomyclass.cathaypacific.com":"neweconomyclass.cathaypacific.com","oneworld.com":"oneworld.com","people.cathaypacific.com":"CX Mini Sites","premiumeconomyclass.cathaypacific.com":"CX Mini Sites","training.cathaypacific.com":"training.cathaypacific.com"};if(document.domain=='www.cathaypacific.com'){cxTealium.channel_map['www.dragonair.com']='dragonair.com'};if(document.domain=='www.dragonair.com'){cxTealium.channel_map['www.cathaypacific.com']='cathaypacific.com'};domain_filter=function(domain){for(d in cxTealium.channel_map){if(domain.indexOf(d)!=-1){var referral_domain=d
break;};};return referral_domain};if(document.referrer&&document.referrer!==""&&document.URL.indexOf("cm_mmc=")==-1){var referral_domain=document.referrer.split('/')[2];if(referral_domain!=document.domain){var channel=cxTealium.channel_map[domain_filter(referral_domain)]
if(referral_domain=='t.co'){channel='Twitter'};if(channel!=undefined){window.manual_cm_mmc=[channel,referral_domain,'NA','NA'].join("-_-")};};};}catch(e){}};if(!utag_condload){try{DataLayer=function(d){this.application=d.application;this.config=d.config;this.page=new DataLayer.Page(d);if(d.booking){this.booking=d.booking};if(d.search){this.search=d.search};if(d.member){this.member=new DataLayer.Member(d)};if(d.itinerary){this.itinerary=d.itinerary};cxTealium.log('----------------------------');if(d.products){this.products=new DataLayer.Products(d)};if(d.transaction){this.transaction=new DataLayer.Transaction(d)}
if(d.indicator){this.indicator=new DataLayer.Indicator(d)};this.collection=new DataLayer.Collection(this);this.event=new DataLayer.Event(this);this.errors=d.errors;this.funnel=d.funnel;this.campaign={};if(document.domain=="book.cathaypacific.com"&&document.referrer.indexOf("utm_medium")!=-1){args=Arg.parse(document.referrer)
this.utm={medium:args["utm_medium"],source:args["utm_source"],term:args["utm_term"],content:args["utm_content"],campaign:args["utm_campaign"]}};};DataLayer.Page=function(d){try{var p=d.page;p.search=p.search||{};p.meta=p.meta||{};return{env:p.env,timestamp:p.timestamp,timestamp_local:moment().format(),brand:p.brand||((document.domain.indexOf('cathaypacific.com')!=-1)?"CX":"KA"),page_id:(new RegExp(/\/cx-mobile\/|\/timetable-mobile/).test(cxDataLayer.page.page_id))?'APP::'+cxDataLayer.page.page_id.match(/.+\/[a-zA-Z0-9]{2}_[a-zA-Z0-9]{2}\/(.+)/)[1].toUpperCase().replace('/','::'):p.page_id,page_id_slashified:p.page_id.replace(/::/gi,"/").split("?cm_mmc")[0].replace(".html",""),page_id_slashified_experimental:this.page_id_slashified_experimental(p),page_name:p.page_name,page_code:p.page_code,page_category:this.page_category(d),page_category_slashified:this.page_category(d).replace(/::/gi,"/"),page_type:this.page_type(p),page_event:this.page_event(d),error_code:p.error_code,error_page_id:this.error_page_id(d),country:this.country(d),language:this.language(d).replace("zh_CN","sc").replace("zh_TW","zh").replace("tc","zh"),locale:this.locale(d),currency:p.currency,cm_mmc:this.cm_mmc(),cm_re:d.page.cm_re,search_keyword:this.search_keyword(p),search_results:p.search.results,meta:{city:p.meta.city},system:{name:p.system.name,params:this.params(d)}}}catch(e){cxTealium.track.exception({name:"cxDataLayer",messsage:"[cxDataLayer.page] "+e.message})};};DataLayer.Page.prototype.page_id_slashified_experimental=function(p){var page_id
if(p.page_type=="homepage"){page_id="HOMEPAGE"}else if(p.page_id.indexOf("/cx/")!=-1||p.page_id.indexOf("/ka/")!=-1){url_slugs=p.page_id.split("/")
url_slugs.splice(0,3)
page_id=url_slugs.join("/").split("?cm_mmc")[0]}else if(p.page_id.indexOf("::")!=-1){page_id=p.page_id.replace(/::/gi,"\/")}else{page_id=p.page_id};return page_id.toUpperCase()};DataLayer.Page.prototype.cm_mmc=function(){if(document.referrer.indexOf('cm_mmc=')!=-1){var cm_mmc=Arg.parse(document.referrer).cm_mmc.replace(/-_-/g,"::");}else if(document.URL.indexOf('cm_mmc=')!=-1){var cm_mmc=Arg.parse(document.URL).cm_mmc.replace(/-_-/g,"::");}else{var cm_mmc='Direct Load'}
if(typeof Cookies.get('cm_mmc')=='undefined'){Cookies.set('cm_mmc',cm_mmc,{expires:2592000})}
return cm_mmc};DataLayer.Page.prototype.country=function(d){var country;if(d.page.page_category!=='en_INTL'){country=d.page.country||Cookies.get('country')
Cookies.set('country',d.page.country)}else{if(document.referrer.indexOf('www.cathaypacific.com/cx/')!==-1||document.referrer.indexOf('www.dragonair.com/ka/')!==-1){country=Cookies.get('country');}else{country='INTL'}}
return country;};DataLayer.Page.prototype.error_page_id=function(d){var error_page_id;var p=d.page
var system=p.system.name;switch(system){case('IBE'):if(p.page_code!=='GERR'){error_page_id=p.page_id
Cookies.set('page_id',p.page_id)}else{error_page_id=Cookies.get('page_id')};break;};return(error_page_id);};DataLayer.Page.prototype.page_event=function(d){var page_event;var system=d.page.system.name;switch(system){case('IBE'):if(false){page_event="registration"}else if(d.page.page_code=="FARE"||d.page.page_code=="FARR"||d.page.page_code=="AWFA"){page_event="product_view"}else if(d.page.page_code=="ALPI"||d.page.page_code=="AWPI"||d.page.page_code=="PURR"){page_event="cart"}else if(typeof d.transaction!='undefined'&&!d.indicator.booking_on_hold){page_event="order"}else if(d.indicator.booking_on_hold){page_event="booking_on_hold"}else{page_event="none"}
break;case('TRP'):break;};return(page_event);};DataLayer.Page.prototype.page_category=function(d){var p=d.page
var page_category;switch(p.system.name){case('IBE'):locale=Cookies.get('locale')||p.locale
c=p.page_category+'::'+locale
break;default:c=p.page_category
break;};return(c);};DataLayer.Page.prototype.language=function(d){var p=d.page;var l;switch(p.system.name){case('IBE'):l=Cookies.get('locale').split('_')[0]||p.language
break;default:l=p.language
break;};return(l);};DataLayer.Page.prototype.params=function(d){var p=d.page.system.params;if(typeof p!="undefined"){p.promotion=p.promotion||{};switch(d.page.system.name){case('CQ5'):var params={}
break;case('IBE'):var route=p.route||d.itinerary.route||Cookies.get('route')
Cookies.set('route',route)
var params={date_depart:p.date_depart,date_return:p.date_return,date_depart_and_date_return:[p.date_depart,p.date_return].join('|'),cabin:p.cabin,route:route,external_id:p.external_id,jsession_id:p.jsession_id,flow:p.flow,stream:p.stream,office_id:p.office_id||p.officeID,sitecode:p.sitecode,promotion:{promo_code:p.promotion.promo_code,fare_id:p.promotion.fare_id}}
break;}
return params}}
DataLayer.Page.prototype.search_keyword=function(p){var k;try{switch(p.system.name){case('IBE'):var c=p.page_code
if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AVAI'||c=='AWCR'||c=='AWCL'){var params=p.system.params;if(c=='FFCL'||c=='FFPC'||c=='FFCR'||c=='FFCC'||c=='AVAI'){product='TICKET'}else if(c=='AWCR'||c=='AWCL'){product='AWARD-TKT'}
cabin=cxTealium.helper.cabin_name(cxDataLayer.itinerary.cabin)
k=[product,cxDataLayer.itinerary.route,cxDataLayer.itinerary.trip_type,cabin].join('::')}
break;case('CQ5'):if(document.URL.indexOf("/press-release/press-release-search-result.html?keyword=")!==-1){k=["Press Release",Arg.query().keyword].join("::")}
break;}}catch(e){k='KEYWORD ERROR'}
return k};DataLayer.Page.prototype.locale=function(d){try{var p=d.page;var locale;switch(p.system.name){case('CQ5'):if(p.page_id!='CX-SPLASH'&&p.page_id!='KA-SPLASH'){locale=document.URL.split('/')[4].split('.')[0]||Cookies.get('selectedLocale')||'en_INTL'}else{locale=Cookies.get('selectedLocale')||'en_INTL'}
break;case('IBE'):locale=document.getElementsByName('ENTRYLANGUAGE')[0]['value']+'_'+document.getElementsByName('ENTRYCOUNTRY')[0]['value']
break;default:locale='en_INTL'
break;}
Cookies.set('locale',locale)
return locale;}catch(e){return Cookies.get('selectedLocale')||Cookies.get('locale');}}
DataLayer.Page.prototype.page_type=function(p){switch(p.system.name){case('CQ5'):var url=document.URL
site_search=url.indexOf('hidden-pages/search-results')!==-1
timetable=url.indexOf('timetable/timetable-search-result-page')!==-1
flight_status=url.indexOf('flight-status/flight-status-search-result-page')!==-1
press_release=url.indexOf('press-release/press-release-search-result')!==-1
faq=url.indexOf('hidden-pages/faq-search-results')!==-1
if(site_search||timetable||flight_status||press_release||faq){page_type='search'}else if(p.page_type=='homepage'){page_type='homepage'}else if(url.indexOf('destinations')!=-1){page_type='destination guide'}else{page_type='content'};break;case('IBE'):map={"CONF":"confirmation","ALPI":"passenger","PURC":"payment"};page_type=map[p.page_code];break;default:page_type=''
break;}
return(page_type);};DataLayer.Member=function(d){try{var m=d.member;if(d.member.title){if(d.user){var email=d.user.email};var member={member_id:m.membership_no||email,email:m.email,membership_no:m.membership_no,tier:m.tier.replace("Green","GR").replace("Silver","SL").replace("Gold","GO").replace("Diamond","DM"),title:m.title.toUpperCase(),}}
return member}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.member] "+e.message})};};DataLayer.Products=function(d){try{var products=d.products;var pdts=[];for(var n=0;n<products.length;n++){var product=new DataLayer.Product(products[n],d)
pdts.push(product)}
return pdts}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.products] "+e.message})}};DataLayer.Product=function(product,d){var p=product;var products=[];var currency=d.page.currency;var product_id;var product_name;var product_category;var qty;var ffcode;var tax_and_surcharge;var route=d.itinerary.route;var trip_type=p['trip_type']||d.itinerary.trip_type;var flow=d.page.system.params.flow.toUpperCase();switch(p['type'].toUpperCase()){case'TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=cxTealium.helper.cabin_name(cabin_code);var ffcode=p['ffcode'];if(flow=='REVENUE_FLEXPRICER'||flow=='REVENUE_COTS'){ffcode=cxDataLayer.indicator.upsell_tracking.split('_').pop();};var farefamily_brand=DataLayer.Helper.farefamily_brand_name(ffcode,flow);var pax_type=p['pax_type']||"UNDEFINED";var product_id=['TICKET',route,trip_type,cabin,farefamily_brand,pax_type].join('::')||'UNDEFINED';var product_name=['TICKET',route,trip_type,cabin].join('::')||'UNDEFINED';var product_category=['TICKET',cabin,farefamily_brand].join('::')||'UNDEFINED';var qty=p['qty']||1;var price=parseFloat(p['price']).toFixed(2)||0.01;var tax_and_surcharge=parseFloat(p['tax']+p['surcharge']).toFixed(2);break;case'AWARD-TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=cxTealium.helper.cabin_name(cabin_code);var pax_type=p['pax_type'];var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],cxDataLayer.page.system.params.flow);var product_id=['AWARD-TKT',route,trip_type,cabin,farefamily_brand,pax_type].join('::')||'UNDEFINED';var product_name=['AWARD-TKT',route,trip_type,cabin].join('::')||'UNDEFINED';var product_category=['AWARD-TKT',cabin].join('::')||'UNDEFINED';var ffcode=p['ffcode'];var qty=p['qty'];var price=0;var tax_and_surcharge=parseFloat(p['tax']+p['surcharge']).toFixed(2);break;case'ATC-TICKET':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=cxTealium.helper.cabin_name(cabin_code);var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],d.page.system.params.flow);var pax_type=p['pax_type'];var pnr=cxDataLayer.page.system.params.pnr;var product_id=['ATC-TKT',route,trip_type,cabin,farefamily_brand,pax_type,pnr].join('::');var product_name=['ATC-TKT',route,trip_type].join('::');var product_category="ATC-TKT";var ffcode=p['ffcode'];var qty=p['qty'];var price=parseFloat(p.fare_diff).toFixed(2);var tax_and_surcharge=parseFloat(p.tax_and_surcharge_diff).toFixed(2);break;case'AWARD-TOPUP':var cabin_code=p['cabin']||cxDataLayer.itinerary.cabin;var cabin=cxTealium.helper.cabin_name(cabin_code);var farefamily_brand=DataLayer.Helper.farefamily_brand_name(p['ffcode'],cxDataLayer.page.system.params.flow);var pax_type=p['pax_type'];var product_id=['AWARD-TOPUP',route,trip_type,cabin,farefamily_brand,pax_type].join('::');var product_name=["AWARD-TOPUP",route,trip_type];var product_category=["AWARD-TOPUP"];var qty="";var price="";break;case'INSURANCE':var cabin_code=p['cabin']||d.itinerary.cabin;var cabin=cxTealium.helper.cabin_name(cabin_code);var provider=p['provider'];var trip_type=cxDataLayer.itinerary.trip_type;var product_id=['INSURANCE',route,trip_type,cabin,provider].join("::");var product_name=['INSURANCE',route,trip_type,cabin].join("::");var product_category=['INSURANCE',trip_type].join("::");var qty=p['qty']||1;var price=parseFloat(p['price']).toFixed(2)||0;break;case'DEEPLINK':var product_id="";var product_name="";var product_category="";var qty="";var price="";break;case'LEGROOM':var product_id=p.product_id.replace("LEGROOM","EXL");var product_name=p.product_name.replace("LEGROOM","EXL");var product_category="EXL";var qty=p['qty'];var price=parseFloat(p['price']).toFixed(2)||0;break;};return{product_id:product_id.toUpperCase(),product_name:product_name.toUpperCase(),product_category:product_category.toUpperCase(),ffcode:ffcode,qty:qty,price:price,price_with_currency:[currency,price].join('_'),tax_and_surcharge:tax_and_surcharge,tax_and_surcharge_with_currency:[currency,tax_and_surcharge].join('_')};};DataLayer.Transaction=function(d){try{if(d.transaction){var t=d.transaction;var p=d.page;var currency=p.currency;var subtotal=parseFloat(t.payment.subtotal).toFixed(2);var surcharge=parseFloat(t.payment.surcharge).toFixed(2);var total=parseFloat(t.payment.total).toFixed(2);var surcharge_and_tax=parseFloat(this.surcharge_and_tax(d)).toFixed(2);var fxmp_currency=t.payment.fxmp.currency||currency;var fxmp_total=t.payment.fxmp.total||total;var transaction={pnr:t.pnr,insurance_ref:this.insurance_ref(d.products),order_id:this.order_id(d),ffp:{points:t.ffp.points,type:t.ffp.type},hold_till:moment().add(25,'hours').format('YYYY-MM-DDTHH:00Z'),payment:{currency:currency,fxmp:{currency:fxmp_currency,total:fxmp_total,total_with_currency:[fxmp_currency,fxmp_total].join('_')},method:t.payment.method||'BOH',subtotal:subtotal,subtotal_in_hkd:(function(){try{return cxTealium.currency.convert(subtotal,currency,"HKD")}catch(e){}}()),subtotal_with_currency:[currency,subtotal].join('_'),surcharge:surcharge||0,tax:t.payment.tax||0,surcharge_and_tax:surcharge_and_tax||0,surcharge_and_tax_with_currency:[currency,surcharge_and_tax].join('_'),total:total,total_with_currency:[currency,total].join('_')}}
return transaction}}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.transaction] "+e.message})}};DataLayer.Transaction.prototype.order_id=function(d){var p=d.page;var date_local=moment(p.timestamp).zone('+0800').format('YYYY-MM-DD');var country=p.country;var brand=p.brand;var system=p.system.name;var stream=p.system.params.stream.substring(0,3);;var pnr=d.transaction.pnr;var order_id=[date_local,country,brand,system,stream,pnr,d.itinerary.pax.combination].join('::')
return order_id.toUpperCase();};DataLayer.Transaction.prototype.surcharge_and_tax=function(d){if(d.page.system.params.stream!=='ATC'){var tax_and_surcharge=d.transaction.payment.tax+d.transaction.payment.surcharge;}else{var tax_and_surcharge=cxTealium.helper.sum(DataLayer.Helper.map(d.products,'tax_and_surcharge_diff'));}
return tax_and_surcharge;};DataLayer.Transaction.prototype.insurance_ref=function(products){try{return DataLayer.Helper.map(products,'ref_no').toString().replace(/,/g,"")}catch(e){};};DataLayer.Indicator=function(d){try{var i=d.indicator;var indicator={pnr_with_departure_date:this.pnr_with_departure_date(d),atc_indicator:this.atc_indicator(d),lsa_indicator:i.lsa_indicator,holdable:i.holdable,booking_on_hold:i.booking_on_hold||false,upsell_tracking:this.upsell_tracking(d),upsell_revenue:i.upsell_revenue}
return indicator}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.indicator] "+e.message})};};DataLayer.Indicator.prototype.pnr_with_departure_date=function(d){if(d.transaction){date_depart=d.itinerary.outbound.date
date_return=d.itinerary.inbound.date
date_depart_and_date_return=[date_depart,date_return].join('|')
var p=date_depart_and_date_return+'_'+d.transaction.pnr}
return(p);};DataLayer.Indicator.prototype.atc_indicator=function(d){if(d.page.page_code=='COFR'){var date_local=moment(d.page.timestamp).zone('+0800').format('YYYY-MM-DDTHHmm');var pnr=d.transaction.pnr;var pax=d.itinerary.pax;var pax_count=pax.adult+pax.child+pax.infant;var route=d.itinerary.route;var country=d.itinerary.origin_country;var currency=d.transaction.payment.currency;var atc_tkts=d.products;var total_fare_diff=cxTealium.helper.sum_with_qty(atc_tkts,'fare_diff');var total_tax_and_surcharge_diff=cxTealium.helper.sum_with_qty(atc_tkts,'tax_and_surcharge_diff');var change_fee=cxTealium.helper.sum(DataLayer.Helper.map(atc_tkts,'change_fee'))
var nra=cxTealium.helper.sum(DataLayer.Helper.map(atc_tkts,'nra'))
return[date_local,pnr,route,country,pax.adult,pax.child,pax.infant,pax_count,currency,total_fare_diff,total_tax_and_surcharge_diff,change_fee,nra].join('::');}};DataLayer.Indicator.prototype.upsell_tracking=function(d){var u=d.indicator.upsell_tracking
if(u=='NOUP_Y'||u=='NOUP_W'||u=='NOUP_C'||u=='NOUP_F'){upsell_tracking='N/A'}else{upsell_tracking=u}
return upsell_tracking};DataLayer.Helper={};DataLayer.Helper.farefamily_brand_name=function(ffcode,flow){var farefamily_brands={flex:{'ECOPR':'SUPERSAVER','ECOVR':'SAVE','ECORS':'SPECIAL','ECOSR':'CORE','ECOSF':'STANDARD','ECOFF':'FLEX','PEYSF':'STANDARD','PEYFF':'FLEX','BUSRS':'SAVE','BUSSF':'STANDARD','BUSFF':'FLEX','FIRSF':'STANDARD','FIRFF':'FLEX'},flex_complex:{'100':'Flex','200':'Standard','300':'Flex','400':'Standard','500':'Save','520':'Flex','550':'Standard','600':'Flex','700':'Standard','800':'Core','900':'Special','1000':'Save','1100':'Supersaver'},promotion:{'GV':'GV','STU':'Student','SNR':'Senior','SBS':'SBS','LEV':'LEVERAGE','LBR':'Domestic-Helper','GS':'fanfares','CC':'Credit-Card','CUG':'CUG','MIC':'MICE','SF':'SPECIAL-FARE','SEA':'SEAMAN'},redemption:{'STDECO':'Standard','STDBUS':'Standard','STDPEY':'Standard','STDFIR':'Standard','PIRECO':'Pirority'}};flow=flow.toUpperCase();if(ffcode.length=='1'){var farefamily_brand_name='SCHEDULE';}else if(flow=='REVENUE_FLEXPRICER'||flow=='REVENUE_COTS'||flow=='ATC_STANDARD_SHOPPER'||flow=='REVENUE_COMPLEXFLEX'||flow=='REVENUE_BOH'){if(ffcode.indexOf('RES_SL')!==-1){var ff_brand_code=ffcode.replace('RES_SL','')
var farefamily_brand_name=farefamily_brands['flex_complex'][ff_brand_code];}else{var cabin_codes=['ECO','BUS','PEY','FIR']
for(var n=0;n<cabin_codes.length;n++){if(ffcode.substring(1).indexOf(cabin_codes[n])!==-1){var ff_brand_code=cabin_codes[n]+ffcode.split(cabin_codes[n])[1].substring(0,2);var farefamily_brand_name=farefamily_brands['flex'][ff_brand_code];break;}}}}else if(flow.indexOf('PROMOTION_')!==-1&&flow.indexOf('REDEMPTION')==-1){var suffix=ffcode.slice(-3)
var promo_identifiers=['YH','GV','STU','SNR','SBS','LEV','LBR','GS','CC','MIC','CUG','SF','SEA']
for(var n=0;n<promo_identifiers.length;n++){if(suffix.indexOf(promo_identifiers[n])!==-1){var ff_brand_code=promo_identifiers[n]
var farefamily_brand_name=farefamily_brands['promotion'][ff_brand_code];break;}}}else if(flow.indexOf('REDEMPTION')){var farefamily_brand_name=farefamily_brands['redemption'][ffcode];}else{var farefamily_brand_name=ffcode};return farefamily_brand_name||ffcode;};DataLayer.Helper.map=function(array,attr){var attrs=[];for(var i=0;i<array.length;i++){attrs.push(eval("array[i]"+'["'+attr.replace(/\./g,'"]["')+'"]'))};return attrs;};DataLayer.Helper.map_with_qty=function(array,attr){var attrs=[];for(var i=0;i<array.length;i++){for(var q=0;q<array[i].qty;q++){attrs.push(eval("array[i]"+'["'+attr.replace(/\./g,'"]["')+'"]'))};};return attrs;};DataLayer.Helper.sum_with_qty=function(array,attr){floats=[];mapped_items=this.map_with_qty(array,attr)
for(var i=0;i<mapped_items.length;i++){floats.push(parseFloat(mapped_items[i]));};var sum=this.sum(floats)
return parseFloat(parseFloat(sum).toFixed(2))};DataLayer.Helper.flatten=function(array){var the_array=[];for(var i=0;i<array.length;i++){var item=array[i]
var qty=item.qty
for(n=0;n<qty;n++){the_array.push(item)}};return the_array;};DataLayer.Helper.pad=function(str,_char,len,to){if(!str||!_char||str.length>=len){return str;}
to=to||0;var ret=str;var max=(len-str.length)/_char.length+1;while(--max){ret=(to)?ret+_char:_char+ret;}
return ret;};DataLayer.Helper.flatten=function(ob){var toReturn={};for(var i in ob){if(!ob.hasOwnProperty(i))continue;if(typeof ob[i]=='object'&&!(ob[i]instanceof Array)){var flatObject=DataLayer.Helper.flatten(ob[i]);for(var x in flatObject){if(!flatObject.hasOwnProperty(x))continue;toReturn[i+'.'+x]=flatObject[x];}}else{toReturn[i]=ob[i];}}
return toReturn;};DataLayer.Collection=function(d){if(d.products){this.product=this.product(d.products)};};DataLayer.Collection.prototype.product=function(p){m=DataLayer.Helper.map
return{product_ids:m(p,'product_id'),product_names:m(p,'product_name'),product_categories:m(p,'product_category'),prices:m(p,'price'),qtys:DataLayer.Helper.map(p,'qty'),price_with_currency:m(p,'price_with_currency'),tax_and_surcharge_with_currency:m(p,'tax_and_surcharge_with_currency'),ffcodes:m(p,'ffcode'),insurance_ref:m(p,'ref_no'),equipments:cxTealium.helper.map(cxDataLayer.itinerary.segments,"equipment")}}
DataLayer.Event=function(d){try{if(d.indicator.booking_on_hold){return{event_id:["BoH_Hold_Flight",d.itinerary.origin.airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:2,event_point:0}};if(d.page.page_id=='IBE::Revenue::Revenue_BOH::Payment'){return{event_id:['BOH_PAYMENT',d.itinerary.origin.airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:1,event_point:0}};if(d.page.page_id=='IBE::Revenue::Revenue_BOH::Confirmation'){return{event_id:['BOH_PAYMENT',d.itinerary.origin.airport].join('::'),event_category:'BOOKING_ON_HOLD',action_type:2,event_point:0}};}catch(e){cxTealium.track.exception({name:"cxDataLayer",message:"[cxDataLayer.event] "+e.message})};};datalayer=new DataLayer(cxDataLayer);cxTealium.log('datalayer ready.');utag_data=cxTealium.helper.flatten(datalayer);}catch(e){}};if(!utag_condload){try{if(datalayer.page.page_id.indexOf('-newsletter-subscription')!==-1){datalayer.event={event_id:"CXpecials Subscription",action_type:"1",category_id:"CXpecials",points:'0'}};}catch(e){}};if(!utag_condload){try{if(datalayer.page.page_id.indexOf('/calculate-and-offset-your-carbon-emissions-result')!==-1){datalayer.event={event_id:"Trip-based::Search",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};if(datalayer.page.page_id.indexOf('/calculate-and-offset-your-carbon-emissions-payment')!==-1){datalayer.event={event_id:"Trip-based::Payment",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};if(datalayer.page.page_id.indexOf('make-a-one-off-contribution-payment')!==-1){datalayer.event={event_id:"Lump Sum::Donation",action_type:"2",category_id:"Carbon Offset Program",points:'0'}};}catch(e){}};if(!utag_condload){try{try{if(typeof(localStorage.tealium_va)!="undefined"){var audiences=JSON.parse(localStorage.tealium_va)["audiences"]
a=typeof(audiences.cathaypacific_main_242)!="undefined"
b=typeof(audiences.cathaypacific_main_243)!="undefined"
if(a){window['optimizely']=window['optimizely']||[];window['optimizely'].push(["bucketVisitor","3621512699","3623382777"]);};if(b){window['optimizely']=window['optimizely']||[];window['optimizely'].push(["bucketVisitor","3621512699","3605043145"]);}}
if(document.referrer.indexOf("utm_term=checkout-recovery")!=-1){window['optimizely']=window['optimizely']||[];window['optimizely'].push(["bucketVisitor","3621512699","3605043145"]);};}catch(e){};}catch(e){}};if(!utag_condload){try{try{cxOptimizely.dimension('country',cxDataLayer.page.country);cxOptimizely.dimension('language',cxDataLayer.page.language);cxOptimizely.dimension('locale',cxDataLayer.page.locale);if(typeof(cxDataLayer.itinerary)!="undefined")cxOptimizely.dimension('route',cxDataLayer.itinerary.route);if(typeof(cxDataLayer.itinerary)!="undefined")cxOptimizely.dimension('cabin',cxDataLayer.itinerary.cabin);if(document.domain=="book.cathaypacific.com")cxOptimizely.dimension('flow',cxDataLayer.page.system.params.flow);if(cxDataLayer.page.page_category=="TRP::PACKAGE")cxOptimizely.dimension('flow','Package')
if(cxDataLayer.page.page_category=="TRP::HOTEL")cxOptimizely.dimension('flow','Hotel')
if(typeof(cxDataLayer.itinerary)!="undefined"){var pax=cxDataLayer.itinerary.pax;var pax_type="default";if(pax.child>0||pax.infant>0){pax_type="Family";}
else if(pax.adult==2&&pax.child==0&&pax.infant==0){pax_type="Companion";}
else if(pax.adult>2&&pax.child==0&&pax.infant==0){pax_type="Group";}
else if(pax.adult==1){pax_type="Solo";}
cxOptimizely.dimension('pax_type',pax_type);};}catch(e){cxTagLogger(e);};}catch(e){}};if(!utag_condload){try{if(Arg("optimizely_event")){cxOptimizely.event(Arg("optimizely_event"))};if(document.domain=="book.cathaypacific.com"){if(cxDataLayer.page.system.params.stream.toUpperCase()=="REVENUE"&&(cxDataLayer.page.page_code=="FFPR"||cxDataLayer.page.page_code=="FFCO"||cxDataLayer.page.page_code=="AVAI")){cxOptimizely.event("Total Flight Search")};if(cxDataLayer.page.system.params.stream.toUpperCase()=="REVENUE"&&cxDataLayer.page.page_code=="FARE"){cxOptimizely.event("Total Fare Details Pageview")};if(cxDataLayer.page.system.params.stream.toUpperCase()=="REVENUE"&&cxDataLayer.page.page_code=="ALPI"){cxOptimizely.event("Total Passengers Pageview")};if(cxDataLayer.page.system.params.stream.toUpperCase()=="REVENUE"&&cxDataLayer.page.page_code=="PURC"){cxOptimizely.event("Total Payment Pageview")};if(cxDataLayer.page.system.params.stream.toUpperCase()=="REVENUE"&&cxDataLayer.page.page_code=="CONF"){cxOptimizely.event("Total Bookings (Revenue)")};if((c=="CONF"||c=="AWCF")&&datalayer.transaction.insurance_ref.indexOf("-")!=-1){cxOptimizely.event("booking_with_insurance")};if(cxDataLayer.page.system.params.flow.toUpperCase()=="REVENUE_FLEXPRICER"){var c=cxDataLayer.page.page_code
var e=(function(c){if(c=="FFCR"||c=="FRCL"){e="[IBE][REV][FP][Step-1] Select Dates"}
else if(c=="FFPR"||c=="FFCO"){e="[IBE][REV][FP][Step-2] Select Flights"}
else if(c=="FARE"){e="[IBE][REV][FP][Step-3] Fare Details"}
else if(c=="ALPI"){e="[IBE][REV][FP][Step-4] Passengers"}
else if(c=="PURC"){e="[IBE][REV][FP][Step-5] Payment"}
else if(c=="CONF"){e="[IBE][REV][FP][Step-6] Confirmation"}
else if(c=="GERR"){e="[IBE][REV][FP][ERROR] Error Page"}
return e})(cxDataLayer.page.page_code)||"";cxOptimizely.event(e);if(c=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")!=-1){cxOptimizely.event("[IBE][REV][FP][Step-6] Confirmation (BOH)")}else if(c=="CONF"){cxOptimizely.event("[IBE][REV][FP][Step-6] Confirmation (Confirmed)")}}
if(cxDataLayer.page.system.params.flow.toUpperCase()=="REVENUE_SCHEDULEDRIVEN"){var c=cxDataLayer.page.page_code
var e=(function(c){if(c=="AVAI"){e="[IBE][REV][SD][Step-1] Select Flights"}
else if(c=="FARE"){e="[IBE][REV][SD][Step-2] Fare Details"}
else if(c=="ALPI"){e="[IBE][REV][SD][Step-3] Passengers"}
else if(c=="PURC"){e="[IBE][REV][SD][Step-4] Payment"}
else if(c=="CONF"){e="[IBE][REV][SD][Step-5] Confirmation"}
else if(c=="GERR"){e="[IBE][REV][SD][ERROR] Error Page"}
return e})(cxDataLayer.page.page_code)||"";cxOptimizely.event(e);if(c=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")!=-1){cxOptimizely.event("[IBE][REV][SD][Step-5] Confirmation (BOH)")}else if(c=="CONF"){cxOptimizely.event("[IBE][REV][SD][Step-5] Confirmation (Confirmed)")}}
if(cxDataLayer.page.system.params.flow.toUpperCase().indexOf("PROMOTION")!=-1){var c=cxDataLayer.page.page_code
var e=(function(c){if(c=="FFCR"||c=="FRCL"){e="[IBE][REV][PROMO][Step-1] Select Dates"}
else if(c=="FFPR"||c=="FFCO"){e="[IBE][REV][PROMO][Step-2] Select Flights"}
else if(c=="FARE"){e="[IBE][REV][PROMO][Step-3] Fare Details"}
else if(c=="ALPI"){e="[IBE][REV][PROMO][Step-4] Passengers"}
else if(c=="PURC"){e="[IBE][REV][PROMO][Step-5] Payment"}
else if(c=="CONF"){e="[IBE][REV][PROMO][Step-6] Confirmation"}
else if(c=="GERR"){e="[IBE][REV][PROMO][ERROR] Error Page"}
return e})(cxDataLayer.page.page_code)||"";cxOptimizely.event(e);if(c=="CONF"&&cxDataLayer.page.page_id.toUpperCase().indexOf("CONFIRMATION-BOH")!=-1){cxOptimizely.event("[IBE][REV][PROMO][Step-6] Confirmation (BOH)")}else if(c=="CONF"){cxOptimizely.event("[IBE][REV][PROMO][Step-6] Confirmation (Confirmed)")}}};(function(p){if(document.domain=="holidays.cathaypacific.com"){var e=(function(p){if(p=="TRP::HOTEL::SELECT"){e="[TRP][REV][HOTEL][Step-1] Select"}else if(p=="TRP::HOTEL::REVIEW"){e="[TRP][REV][HOTEL][Step-2] Review[1]"}else if(p=="TRP::HOTEL::SHOPPINGCART"){e="[TRP][REV][HOTEL][Step-3] Review[2]"}else if(p=="TRP::HOTEL::PASSENGERS"){e="[TRP][REV][HOTEL][Step-4] Passengers"}else if(p=="TRP::HOTEL::PAYMENT"){e="[TRP][REV][HOTEL][Step-5] Payment"}else if(p=="TRP::HOTEL::CONFIRMATION"){e="[TRP][REV][HOTEL][Step-6] Confirmation"}
return e})(p)||"";cxOptimizely.event(e);}})(cxDataLayer.page.page_id);(function(p){if(document.domain=="holidays.cathaypacific.com"){var e=(function(p){if(p=="TRP::PACKAGE::SELECT"){e="[TRP][REV][PACKAGE][Step-1] Select"}else if(p=="TRP::PACKAGE::REVIEW"){e="[TRP][REV][PACKAGE][Step-2] Review[1]"}else if(p=="TRP::PACKAGE::SHOPPINGCART"){e="[TRP][REV][PACKAGE][Step-3] Review[2]"}else if(p=="TRP::PACKAGE::PASSENGERS"){e="[TRP][REV][PACKAGE][Step-4] Passengers"}else if(p=="TRP::PACKAGE::PAYMENT"){e="[TRP][REV][PACKAGE][Step-5] Payment"}else if(p=="TRP::PACKAGE::CONFIRMATION"){e="[TRP][REV][PACKAGE][Step-6] Confirmation"}
return e})(p)||"";cxOptimizely.event(e);}})(cxDataLayer.page.page_id);(function(){if(document.URL.indexOf("/book-a-trip/timetable.html")!=-1){cxOptimizely.event("[Timetable] Visit Timetable")}})();(function(){if(document.URL.indexOf("/manage-booking/")!=-1){cxOptimizely.event("[MMB] Visit MMB")}})();(function(){if(document.referrer.indexOf("optimizely=x3686404209")!=-1){cxOptimizely.event("015_cta_click")}})();(function(o){if(cxDataLayer.page.page_code=="CONF"&&JSON.stringify(cxDataLayer.products).toUpperCase().indexOf("INSURANCE")!=-1){o.event("booking_with_insurance")}})(cxOptimizely);}catch(e){}};if(!utag_condload){try{window.FlightSearchModule=(function($){var $flightBookingPanel=$('.trip-form');var $targetForm;var $targetButton;var maxRecentItem=3;var module={submitForm:function(){$targetForm.find('input[name=ORIGIN]').val($targetForm.find('input[name=depart-label]').data('airport-code'));$targetForm.find('input[name=DESTINATION]').val($targetForm.find('input[name=destination-label]').data('airport-code'));var formID=$targetForm.closest('.trip-type-panel').attr('id');if(_.isUndefined(formID)){formID=$targetForm.closest('.flight-booking-panel').attr('id');}
$targetForm.find('input[name=ERRORURL]').val($targetForm.find('input[name=ERRORURL]').val()+'?FORMID='+formID);var cabinClassValue=$targetForm.find('input[name=cabin-class]:checked').val();$targetForm.find('input[name=CABINCLASS]').val(cabinClassValue);var tripTypeValue=$targetForm.find('input[name=round-trip]:checked').val();$targetForm.find('input[name=TRIPTYPE]').val(tripTypeValue);var departureDate=$targetForm.find('.calendar-depart').val().replace(/-/g,'');$targetForm.find('input[name=DEPARTUREDATE]').val(departureDate);var returnDate=$targetForm.find('.calendar-return').val().replace(/-/g,'');$targetForm.find('input[name=ARRIVALDATE]').val(returnDate);if(tripTypeValue==='O'){$targetForm.find('input[name=ARRIVALDATE]').val(departureDate);}
$targetForm.find('input[name=ADULT]').val($targetForm.find('[name=passenger-adults]').val());$targetForm.find('input[name=CHILD]').val($targetForm.find('[name=passenger-children]').val());if($targetForm.find('[name=passenger-infants]').parent().hasClass('is-visually-hidden')){$targetForm.find('input[name=INFANT]').val(0);}else{$targetForm.find('input[name=INFANT]').val($targetForm.find('[name=passenger-infants]').val());}
if($targetForm.find('[name=flexible-dates]').is(':checked')){$targetForm.find('input[name=FLEXIBLEDATE]').val('true');}else{$targetForm.find('input[name=FLEXIBLEDATE]').val('false');}
return false;},toggleSubmitFormAction:function(event){$targetForm=$(event.target);module.saveRecentSearch();module.submitForm();},bindEvents:function(){$flightBookingPanel.on('submit',module.toggleSubmitFormAction);},saveRecentSearch:function(){var recentAirports=[];var destinationCode=$targetForm.find('[name=destination-label]').data('airport-code');if(destinationCode!==null&&destinationCode!==''){var strRecentDestination=foundation.getCookie('recentDestinations');var cookieAirports=[];if(strRecentDestination){cookieAirports=strRecentDestination.split(',');}
var cookieAirportsLength=cookieAirports.length;for(var i=0;i<cookieAirportsLength&&recentAirports.length<maxRecentItem-1;i++){var cookieAirport=cookieAirports[cookieAirportsLength-1-i];if(cookieAirport!==destinationCode){recentAirports.push(cookieAirport);}}
recentAirports.reverse();recentAirports.push(destinationCode);foundation.setCookie('recentDestinations',recentAirports.toString(),30);}
return recentAirports;},init:function(){module.bindEvents();if(Arg("destination")){$("#filter-panel-destination").val(Arg("destination"));label=$("select#filter-panel-destination > option[value="+Arg("destination")+"]").text();$("div.flight-destination span.custom-select-text").text(label);};}};return module;})(jQuery);}catch(e){}};if(!utag_condload){try{if(document.URL.indexOf("/manage-booking/manage-booking/")!==-1){core_pageID=datalayer.page.page_id;};}catch(e){}};if(!utag_condload){try{if(document.URL.indexOf("trp-interstitial-page-cx.html")>1){trp_promo_profile_id=window.sessionStorage["targetUrl"].split("ProfileId=")[1].split("&")[0];Cookies.set('trp_promo_profile_id',trp_promo_profile_id);};}catch(e){}};if(!utag_condload){try{window.cxDataLayer.registration=cxDataLayer.registration||{};window.cxDataLayer.registration.track=function(user_profile){if(user_profile){if(!user_profile.errors){datalayer.member.member_id=user_profile.membershipNumber;datalayer.member.email=user_profile.email;datalayer.member.tier=user_profile.currentTier;datalayer.member.membership_no=user_profile.membershipNumber;datalayer.member.last_name=user_profile.familyName;datalayer.member.title=user_profile.title;datalayer.member.asia_miles=user_profile.asiaMiles;datalayer.member.club_sectors=user_profile.clubSectors;datalayer.member.club_miles=user_profile.clubMiles;datalayer.member.age_group=(function(a){a=moment().diff(a,'years');if(a<18){g="0-18"}else if(a<24){g="19-24"}else if(a<35){g="25-34"}else if(a<45){g="35-44"}else if(a<55){g="45-54"}else if(a>=55){g="55+"}else{g=""};return g})(user_profile.dateOfBirth);m=datalayer.member
utag.link({"page.page_event":"registration","member.member_id":m.member_id,"member.email":m.email,"member.membership_no":m.membership_no,"member.age_group":m.age_group,"member.tier":m.tier,"member.club_sectors":m.club_sectors,"member.club_miles":m.club_miles,"member.asia_miles":m.asia_miles,"member.title":m.title.toUpperCase(),"registration.last_name":m.last_name,"registration.title":m.title.toUpperCase(),"registration.type":m.tier});cxTealium.log("[REG] MEMBER");}}};}catch(e){}};if(!utag_condload){try{try{if(cxDataLayer.page.env=="prod"&&cxDataLayer.page.page_id.startsWith('IBE::Revenue::')){window.CE_SNAPSHOT_NAME=cxDataLayer.page.page_id;if(cxDataLayer.page.page_id=='IBE::Revenue::Revenue_FlexPricer::Passengers'){var total_qty=0;for(var i=0;i<cxDataLayer.products.length;i++){total_qty+=cxDataLayer.products[i].qty}
if(total_qty>1){window.CE_SNAPSHOT_NAME=""}}
if(cxDataLayer.page.page_id=='IBE::Revenue::Revenue_FlexPricer::Payment'){if(cxDataLayer.page.country=="HK"||cxDataLayer.page.country=="SG"||cxDataLayer.page.country=="AU"||cxDataLayer.page.country=="GB"){}else{window.CE_SNAPSHOT_NAME=""}}}}catch(e){}}catch(e){}};if(typeof utag=="undefined"&&!utag_condload){var utag={id:"cathaypacific.main",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_cathaypacific.main_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(a,b,c,d,f){try{if(typeof utag.data['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(utag.data['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0}}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}}}}}}catch(e){utag.DB(e)}},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=eval("document."+"referrer");o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=b||utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}
o["_t_visitor_id"]=o["cp.utag_main_v_id"];o["_t_session_id"]=o["cp.utag_main_ses_id"];},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;o["ut.event"]=a||"view";try{o["ut.account"]=utag.cfg.utid.split("/")[0];o["ut.profile"]=utag.cfg.utid.split("/")[1];o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}},RD:function(o,a,b,c,d){utag.DB("utag.loader.RD");utag.DB(o);if(!utag.loader.rd_flag){a=(new Date()).getTime();b=utag.loader.RC();c=a+parseInt(utag.cfg.session_timeout);d=a;if(!b.utag_main){b.utag_main={};}else if(b.utag_main.ses_id&&typeof b.utag_main._st!="undefined"&&parseInt(b.utag_main._st)<a){delete b.utag_main.ses_id;}
if(!b.utag_main.v_id){b.utag_main.v_id=utag.ut.vi(a);}
if(!b.utag_main.ses_id){b.utag_main.ses_id=d+'';b.utag_main._ss=b.utag_main._pn=1;b.utag_main._sn=1+parseInt(b.utag_main._sn||0);}else{d=b.utag_main.ses_id;b.utag_main._ss=0;b.utag_main._pn=1+parseInt(b.utag_main._pn);b.utag_main._sn=parseInt(b.utag_main._sn);}
if(isNaN(b.utag_main._sn)||b.utag_main._sn<1){b.utag_main._sn=b.utag_main._pn=1}
b.utag_main._st=c+'';utag.loader.SC("utag_main",{"v_id":b.utag_main.v_id,"_sn":b.utag_main._sn,"_ss":b.utag_main._ss,"_pn":b.utag_main._pn+";exp-session","_st":c,"ses_id":d+";exp-session"});}
utag.loader.rd_flag=1;this.RDqp(o);this.RDmeta(o);this.RDcp(o,b);this.RDdom(o);this.RDut(o);this.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();(function(a,b,c,l){if(typeof utag_err!='undefined'&&utag_err.length>0){a='//uconnect.tealiumiq.com/ulog/_error?utid='+utag.cfg.utid;l=utag_err.length>5?5:utag_err.length;for(b=0;b<l;b++){c=utag_err[b];a+='&e'+b+'='+encodeURIComponent(c.t+'::'+c.l+'::'+c.s+'::'+c.e);}
utag.dbi.push((new Image()).src=a);}})();v=".tiqcdn.com";w=utag.cfg.path.indexOf(v);if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:utag.cfg.path.substring(0,w)+v+"/ut"+"ag/tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){utag.db_log=[];b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a,cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a,cfg:{cb:c,uids:d}})},track:function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c}};for(d in utag.loader.GV(utag.o)){try{utag.o[d].handler.trigger(a.event||"view",a.data||a,a.cfg)}catch(e){utag.DB(e)};}
if(a.cfg&&a.cfg.cb)try{a.cfg.cb()}catch(e){utag.DB(e)};return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(utag.data);utag.loader.loadrules();utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.cfg.noview=false;utag.ut.merge(b,this.df,0);utag.loader.RDqp(b);utag.loader.RDcp(b);utag.loader.RDdom(b);utag.loader.RDmeta(b);utag.loader.RDut(b,a);utag.loader.RDva(b);function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2&&utag.loader.cfg[d].s2s!=1){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];sendTag(a,b,d);}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");utag.ut.merge(utag.data,b,1);this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");utag.loader.SC("utag_main",{"_st":((new Date()).getTime()+parseInt(utag.cfg.session_timeout))});},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l){a=document;if(o.type=="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l]}
b.src=o.src;}
if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}};utag.o['cathaypacific.main']=utag;utag.cfg={template:"ut4.39.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),path:"//tags.tiqcdn.com/utag/cathaypacific/main/prod/",utid:"cathaypacific/main/201604220435"};utag.cfg.v=utag.cfg.template+"201604220435";utag.cond={100:0,102:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,121:0,122:0,123:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,14:0,150:0,151:0,152:0,153:0,156:0,157:0,158:0,159:0,15:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,180:0,181:0,182:0,184:0,185:0,186:0,190:0,191:0,196:0,197:0,198:0,199:0,212:0,213:0,214:0,216:0,219:0,220:0,221:0,224:0,227:0,228:0,22:0,232:0,233:0,23:0,24:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,268:0,269:0,270:0,271:0,272:0,273:0,27:0,28:0,29:0,2:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,3:0,40:0,41:0,42:0,43:0,44:0,47:0,48:0,4:0,52:0,53:0,55:0,58:0,5:0,63:0,64:0,68:0,69:0,6:0,70:0,71:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,7:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,8:0,90:0,91:0,92:0,93:0,94:0,95:0,97:0,98:0,99:0,9:0};utag.pagevars=function(ud){ud=ud||utag.data;try{ud['js_page.cxDataLayer.cart.pnr']=cxDataLayer.cart.pnr}catch(e){utag.DB(e)};try{ud['js_page.optimizely.data.visitor.ip']=optimizely.data.visitor.ip}catch(e){utag.DB(e)};try{ud['js_page.optimizely.data.visitor.location.city']=optimizely.data.visitor.location.city}catch(e){utag.DB(e)};try{ud['js_page.optimizely.data.visitor.location.country']=optimizely.data.visitor.location.country}catch(e){utag.DB(e)};try{ud['js_page.optimizely.data.visitor.location.continent']=optimizely.data.visitor.location.continent}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.trp.subtotal']=cxDataLayer.trp.subtotal}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.trp.tax']=cxDataLayer.trp.tax}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.trp.total']=cxDataLayer.trp.total}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.itinerary.destination_airport']=cxDataLayer.itinerary.destination_airport}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.itinerary.origin_airport']=cxDataLayer.itinerary.origin_airport}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.page.page_id']=cxDataLayer.page.page_id}catch(e){utag.DB(e)};try{ud['js_page.cxDataLayer.error']=cxDataLayer.error}catch(e){utag.DB(e)};};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'100':try{c[100]|=(d['page.country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'102':try{c[102]|=(d['dom.url'].toString().indexOf('/destinations/hotels-in')>-1)}catch(e){utag.DB(e)};break;case'108':try{c[108]|=(d['dom.url'].toString().indexOf('/destinations/-holiday-packages')>-1)}catch(e){utag.DB(e)};break;case'109':try{c[109]|=(d['dom.url'].toString().indexOf('/offers-from-')>-1)}catch(e){utag.DB(e)};break;case'110':try{c[110]|=(d['dom.url'].toString().indexOf('/offers-from--to-all-destinations')>-1)}catch(e){utag.DB(e)};break;case'111':try{c[111]|=(d['dom.url'].toString().indexOf('/offers.html')>-1)}catch(e){utag.DB(e)};break;case'112':try{c[112]|=(/[\/]offers-from-([\w\s\t\r\n\f-]*)-to-([\w\s\t\r\n\f-]*).html/.test(d['dom.url']))}catch(e){utag.DB(e)};break;case'113':try{c[113]|=(d['dom.url'].toString().indexOf('en_HK/offers/flight/fly-non-stop-hong-kong-dusseldorf.html')>-1)}catch(e){utag.DB(e)};break;case'114':try{c[114]|=(d['dom.url'].toString().indexOf('zh_HK/offers/flight/fly-non-stop-hong-kong-dusseldorf.html')>-1)}catch(e){utag.DB(e)};break;case'115':try{c[115]|=(d['dom.url'].toString().indexOf('/travel-information/hiroshima-port/hiroshima-route')>-1)}catch(e){utag.DB(e)};break;case'116':try{c[116]|=(d['dom.url'].toString().indexOf('/travel-information/hiroshima-port/hiroshima-route')>-1)}catch(e){utag.DB(e)};break;case'121':try{c[121]|=(/^IBE/i.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Passengers')>-1)}catch(e){utag.DB(e)};break;case'122':try{c[122]|=(d['dom.url'].toString().indexOf('en_AU/offers/collection/uk-europe-earlybird-2016')>-1)}catch(e){utag.DB(e)};break;case'123':try{c[123]|=(d['dom.url'].toString().indexOf('en_AU/offers/collection/usa-canada-earlybird-2016.htm')>-1)}catch(e){utag.DB(e)};break;case'125':try{c[125]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-amsterdam.htm')>-1)}catch(e){utag.DB(e)};break;case'126':try{c[126]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/business-class-to-uk-europe')>-1)}catch(e){utag.DB(e)};break;case'127':try{c[127]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-frankfurt-dusseldorf-zurich')>-1)}catch(e){utag.DB(e)};break;case'128':try{c[128]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-rome-milan')>-1)}catch(e){utag.DB(e)};break;case'129':try{c[129]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-paris.html')>-1)}catch(e){utag.DB(e)};break;case'130':try{c[130]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/premium-economy-class-to-uk-europe')>-1)}catch(e){utag.DB(e)};break;case'131':try{c[131]|=(d['dom.url'].toString().indexOf('TBC')>-1)}catch(e){utag.DB(e)};break;case'132':try{c[132]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-europe-flights-2016/economy-class-to-london-manchester')>-1)}catch(e){utag.DB(e)};break;case'133':try{c[133]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/business-class-to-usa-canada')>-1)}catch(e){utag.DB(e)};break;case'134':try{c[134]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/economy-class-to-canada')>-1)}catch(e){utag.DB(e)};break;case'135':try{c[135]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/economy-class-to-usa')>-1)}catch(e){utag.DB(e)};break;case'136':try{c[136]|=(d['dom.url'].toString().indexOf('en_AU/offers/flight/earlybird-usa-canada-flights-2016/premium-economy-class-to-usa-canada')>-1)}catch(e){utag.DB(e)};break;case'137':try{c[137]|=(d['dom.url'].toString().indexOf('/offers/collection/australia-well-travelled')>-1)}catch(e){utag.DB(e)};break;case'138':try{c[138]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-adelaide-origin-')>-1)}catch(e){utag.DB(e)};break;case'139':try{c[139]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-brisbane-origin-')>-1)}catch(e){utag.DB(e)};break;case'14':try{c[14]|=(d['page.country']=='GB')}catch(e){utag.DB(e)};break;case'140':try{c[140]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-cairns-origin-')>-1)}catch(e){utag.DB(e)};break;case'141':try{c[141]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-melbourne-origin-')>-1)}catch(e){utag.DB(e)};break;case'142':try{c[142]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-perth-origin-')>-1)}catch(e){utag.DB(e)};break;case'143':try{c[143]|=(d['dom.url'].toString().indexOf('/offers/flight/travel-well-in-sydney-origin-')>-1)}catch(e){utag.DB(e)};break;case'144':try{c[144]|=(d['dom.url'].toString().toLowerCase().indexOf('/offers/flight/flights-to-hong-kong/economy-class-to-hong-kong.html'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'145':try{c[145]|=(d['dom.url'].toString().toLowerCase().indexOf('/offers/flight/flights-to-hong-kong/premium-economy-class-to-hong-kong.html'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'146':try{c[146]|=(d['dom.url'].toString().toLowerCase().indexOf('/offers/flight/flights-to-hong-kong/business-class-to-hong-kong.html'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'147':try{c[147]|=(d['dom.url'].toString().indexOf('latest-offers/other-offers/other-offers/asia-miles-fall-bonus-offer')>-1)}catch(e){utag.DB(e)};break;case'148':try{c[148]|=(d['dom.url'].toString().indexOf('latest-offers/corporate-travel-solutions')>-1)}catch(e){utag.DB(e)};break;case'149':try{c[149]|=(d['dom.url'].toString().indexOf('/offers/collection/autumn-leaves-specials-2015')>-1)}catch(e){utag.DB(e)};break;case'15':try{c[15]|=(d['page.page_type']=='homepage')}catch(e){utag.DB(e)};break;case'150':try{c[150]|=(d['dom.url'].toString().indexOf('en_AU')>-1&&d['dom.url'].toString().indexOf('uk-europe-earlybird-2016')>-1)}catch(e){utag.DB(e)};break;case'151':try{c[151]|=(d['dom.url'].toString().indexOf('en_AU')>-1&&d['dom.url'].toString().indexOf('usa-canada-earlybird-2016')>-1)}catch(e){utag.DB(e)};break;case'152':try{c[152]|=(d['dom.url'].toString().indexOf('en_AU/book-a-trip/book-flights/book-flights-now/multi-city-stopover.html')>-1)}catch(e){utag.DB(e)};break;case'153':try{c[153]|=(d['dom.url'].toString().toLowerCase().indexOf('ibe/checkout/Confirmation.do'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'156':try{c[156]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('HOTEL')>-1&&d['page.page_id'].toString().indexOf('CONFIRMATION')>-1)}catch(e){utag.DB(e)};break;case'157':try{c[157]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('PACKAGE')>-1&&d['page.page_id'].toString().indexOf('SELECT')>-1)}catch(e){utag.DB(e)};break;case'158':try{c[158]|=(d['dom.url'].toString().indexOf('ibe/hotel/searchResults.do')>-1)}catch(e){utag.DB(e)};break;case'159':try{c[159]|=(d['dom.url'].toString().indexOf('/ibe/package/reservePackage.do')>-1)}catch(e){utag.DB(e)};break;case'160':try{c[160]|=(d['dom.url'].toString().indexOf('/ibe/checkout/shoppingCart.do')>-1)}catch(e){utag.DB(e)};break;case'161':try{c[161]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('PACKAGE')>-1&&d['page.page_id'].toString().indexOf('SHOPPINGCART')>-1)}catch(e){utag.DB(e)};break;case'162':try{c[162]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('HOTEL')>-1&&d['page.page_id'].toString().indexOf('SHOPPINGCART')>-1)}catch(e){utag.DB(e)};break;case'163':try{c[163]|=(d['dom.url'].toString().indexOf('ibe/checkout/passengerDetails.do')>-1)}catch(e){utag.DB(e)};break;case'164':try{c[164]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('HOTEL')>-1&&d['page.page_id'].toString().indexOf('PASSENGERS')>-1)}catch(e){utag.DB(e)};break;case'165':try{c[165]|=(d['page.page_id'].toString().indexOf('TRP')>-1&&d['page.page_id'].toString().indexOf('PACKAGE')>-1&&d['page.page_id'].toString().indexOf('PAYMENT')>-1)}catch(e){utag.DB(e)};break;case'166':try{c[166]|=(d['dom.url'].toString().indexOf('offers/flight/business-class-aanbieding/business-class-vroegboekkorting')>-1)}catch(e){utag.DB(e)};break;case'167':try{c[167]|=(d['dom.url'].toString().indexOf('/offers/online-bonus/dragonair-30th-anniversary')>-1)}catch(e){utag.DB(e)};break;case'169':try{c[169]|=(d['page.country'].toString().toLowerCase()=='NZ'.toLowerCase())}catch(e){utag.DB(e)};break;case'170':try{c[170]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/economy-class-to-amsterdam-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'171':try{c[171]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/economy-class-to-paris-madrid-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'172':try{c[172]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/economy-class-to-rome-milan-Vence-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'173':try{c[173]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/economy-class-to-frankfurt-dusseldorf-zurich-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'174':try{c[174]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/business-class-to-uk-europe-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'175':try{c[175]|=(d['dom.url'].toString().indexOf('offers/collection/uk-europe-earlybird-2016')>-1)}catch(e){utag.DB(e)};break;case'176':try{c[176]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/premium-economy-class-to-uk-europe-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'177':try{c[177]|=(d['dom.url'].toString().indexOf('offers/flight/earlybird-europe-flights-2016/economy-class-to-london-manchester-origin-auckland')>-1)}catch(e){utag.DB(e)};break;case'178':try{c[178]|=(d['dom.url'].toString().indexOf('offers/collection/xmas-specials-2015')>-1)}catch(e){utag.DB(e)};break;case'180':try{c[180]|=(d['dom.url'].toString().indexOf('/event/popupngo-university-student-fares')>-1)}catch(e){utag.DB(e)};break;case'181':try{c[181]|=(d['dom.url'].toString().indexOf('latest-offers/flights/black-friday-2015')>-1)}catch(e){utag.DB(e)};break;case'182':try{c[182]|=(d['dom.url'].toString().indexOf('latest-offers/other-offers/other-offers/singapore-50-usa')>-1)}catch(e){utag.DB(e)};break;case'184':try{c[184]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Select_Flights')>-1&&d['page.page_id'].toString().indexOf('Revenue_FlexPricer')>-1)}catch(e){utag.DB(e)};break;case'185':try{c[185]|=(d['dom.url'].toString().indexOf('offers/collection/die-reise-ihres-lebens-origin-dusseldorf')>-1)}catch(e){utag.DB(e)};break;case'186':try{c[186]|=(d['page.country'].toString().indexOf('DE')>-1)}catch(e){utag.DB(e)};break;case'190':try{c[190]|=(d['page.page_id'].toString().indexOf('OLCI::Flight Details')>-1)}catch(e){utag.DB(e)};break;case'191':try{c[191]|=(d['page.page_id'].toString().indexOf('OLCI::Baggage Notice')>-1)}catch(e){utag.DB(e)};break;case'196':try{c[196]|=(d['page.country'].toString().indexOf('MY')>-1)}catch(e){utag.DB(e)};break;case'197':try{c[197]|=(d['dom.url'].toString().indexOf('offers/flight/vantage-pass')>-1)}catch(e){utag.DB(e)};break;case'198':try{c[198]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Select_Dates')>-1&&d['page.page_id'].toString().indexOf('ATC_Standard_Shopper')>-1)}catch(e){utag.DB(e)};break;case'199':try{c[199]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Select_Flights')>-1&&d['page.page_id'].toString().indexOf('ATC_Standard_Shopper')>-1)}catch(e){utag.DB(e)};break;case'2':try{c[2]|=(/^IBE::/.test(d['page.page_id']))}catch(e){utag.DB(e)};break;case'212':try{c[212]|=(d['page.language'].toString().indexOf('ms')>-1)}catch(e){utag.DB(e)};break;case'213':try{c[213]|=(d['dom.url'].toString().indexOf('/hidden-pages/special-updates/')>-1)}catch(e){utag.DB(e)};break;case'214':try{c[214]|=(d['dom.url'].toString().indexOf('/manage-booking/manage-booking-now.html')>-1)}catch(e){utag.DB(e)};break;case'216':try{c[216]|=(d['config.tag_type']=='error')}catch(e){utag.DB(e)};break;case'219':try{c[219]|=(d['dom.url'].toString().indexOf('/manage-booking/manage-booking-now/view-summary.html')>-1)}catch(e){utag.DB(e)};break;case'22':try{c[22]|=(d['dom.domain'].toString().indexOf('cathaypacific.com')>-1)}catch(e){utag.DB(e)};break;case'220':try{c[220]|=(d['cp.country'].toString().toLowerCase()=='US'.toLowerCase())}catch(e){utag.DB(e)};break;case'221':try{c[221]|=(d['dom.url'].toString().toLowerCase().indexOf('icheckin2/baggageNotice_r3.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('icheckin2/displayPaxDetails.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('icheckin2a/baggageNotice_r3.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('icheckin2a/displayPaxDetails.do'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'224':try{c[224]|=(d['dom.url'].toString().indexOf('new-gatwick-service')>-1)}catch(e){utag.DB(e)};break;case'227':try{c[227]|=(d['dom.url'].toString().toLowerCase().indexOf('icheckin2/allocateSeat.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('icheckin2a/allocateSeat.do'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'228':try{c[228]|=(d['dom.url'].toString().toLowerCase().indexOf('icheckin2/passengerDetails.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('icheckin2a/passengerDetails.do'.toLowerCase())>-1)||(d['page.page_id'].toString().toLowerCase().indexOf('OLCI::Seat Map'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'23':try{c[23]|=(d['dom.domain'].toString().indexOf('dragonair.com')>-1)}catch(e){utag.DB(e)};break;case'232':try{c[232]|=(d['dom.url'].toString().indexOf('travel-information/oneworld/fare-products')>-1)}catch(e){utag.DB(e)};break;case'233':try{c[233]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Fare_Details')>-1&&d['page.page_id'].toString().indexOf('ATC_Standard_Shopper')>-1)}catch(e){utag.DB(e)};break;case'24':try{c[24]|=(/^IBE/i.test(d['page.page_id'])&&d['page.page_id'].toString().toLowerCase().indexOf('CONFIRMATION'.toLowerCase())>-1&&d['page.page_id'].toString().toLowerCase().indexOf('CONFIRMATION-BOH'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'251':try{c[251]|=(d['dom.url'].toString().indexOf('/offers/collection/valentines-2016')>-1)}catch(e){utag.DB(e)};break;case'252':try{c[252]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Payment')>-1&&d['page.page_id'].toString().indexOf('ATC_Standard_Shopper')>-1)}catch(e){utag.DB(e)};break;case'253':try{c[253]|=(/^IBE/.test(d['js_page.cxDataLayer.page.page_id'])&&d['js_page.cxDataLayer.page.page_id'].toString().toLowerCase().indexOf('Confirmation'.toLowerCase())>-1&&d['js_page.cxDataLayer.page.page_id'].toString().toLowerCase().indexOf('ATC'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'254':try{c[254]|=(d['page.page_id'].toString().toLowerCase().indexOf('OLCI::Cancelcheckin'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('/icheckin2a/displayCancelCheckIn.do'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('/icheckin2/displayCancelCheckIn.do'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'255':try{c[255]|=(d['itinerary.origin.country'].toString().indexOf('AU')>-1)}catch(e){utag.DB(e)};break;case'256':try{c[256]|=(d['dom.url'].toString().indexOf('/offers/flight/matta-fair-specials')>-1)}catch(e){utag.DB(e)};break;case'257':try{c[257]|=(d['dom.url'].toString().indexOf('/offers/collection/cherry-blossom-specials-2016')>-1)}catch(e){utag.DB(e)};break;case'258':try{c[258]|=(!/^IBE/i.test(d['page.page_id']))}catch(e){utag.DB(e)};break;case'260':try{c[260]|=(d['dom.url'].toString().indexOf('/offers/collection/australia-well-travelled')>-1)}catch(e){utag.DB(e)};break;case'261':try{c[261]|=(d['page.country'].toString().toLowerCase()=='HK'.toLowerCase())||(d['page.country'].toString().toLowerCase()=='AU'.toLowerCase())||(d['page.country'].toString().toLowerCase()=='JP'.toLowerCase())||(d['page.country'].toString().toLowerCase()=='MY'.toLowerCase())||(d['page.country'].toString().toLowerCase()=='CN'.toLowerCase())||(d['page.country'].toString().toLowerCase()=='KR'.toLowerCase())}catch(e){utag.DB(e)};break;case'262':try{c[262]|=(d['itinerary.destination.airport'].toString().indexOf('MAN')>-1)}catch(e){utag.DB(e)};break;case'263':try{c[263]|=(d['dom.url'].toString().indexOf('/offers/flight/business-class-aanbieding/business-class-vroegboekkorting')>-1)}catch(e){utag.DB(e)};break;case'264':try{c[264]|=(d['dom.url'].toString().indexOf('/offers/flight/business-class-aanbieding/australie')>-1)}catch(e){utag.DB(e)};break;case'265':try{c[265]|=(d['dom.url'].toString().indexOf('/hidden-pages/event/popupngo-university-student-fares')>-1)}catch(e){utag.DB(e)};break;case'266':try{c[266]|=(d['dom.url'].toString().indexOf('/destinations/')>-1)}catch(e){utag.DB(e)};break;case'268':try{c[268]|=(d['page.country'].toString().toLowerCase()=='ES'.toLowerCase())}catch(e){utag.DB(e)};break;case'269':try{c[269]|=(d['dom.url'].toString().indexOf('/offers/online-bonus/double-asia-miles-from-singapore-to-north-america-origin-singapore')>-1)}catch(e){utag.DB(e)};break;case'27':try{c[27]|=(d['dom.url'].toString().indexOf('/frequent-flyers/about-asia-miles.html')>-1)}catch(e){utag.DB(e)};break;case'270':try{c[270]|=(d['page.country'].toString().indexOf('SG')>-1)}catch(e){utag.DB(e)};break;case'271':try{c[271]|=(d['dom.url'].toString().indexOf('/explore-destinations/port-launch/madrid')>-1)}catch(e){utag.DB(e)};break;case'272':try{c[272]|=(d['dom.url'].toString().indexOf('/offers/flight/uk-europe-flights-multi-cities-online-ports/economy-class-to-europe-frm-akl-to-europe')>-1)}catch(e){utag.DB(e)};break;case'273':try{c[273]|=(d['dom.url'].toString().indexOf('/offers/flight/flight-offers-to-uk-europe/economy-class-to-madrid-origin-hong-kong')>-1)}catch(e){utag.DB(e)};break;case'28':try{c[28]|=(d['dom.url'].toString().indexOf('/frequent-flyers/about-the-club.html')>-1)}catch(e){utag.DB(e)};break;case'29':try{c[29]|=(d['dom.url'].toString().indexOf('/book-a-trip.html')>-1)}catch(e){utag.DB(e)};break;case'3':try{c[3]|=(/^IBE::/.test(d['page.page_id'])&&d['page.page_code'].toString().toLowerCase()=='CONF'.toLowerCase())}catch(e){utag.DB(e)};break;case'30':try{c[30]|=(d['dom.url'].toString().indexOf('/book-a-trip/book-flights/book-flights-now.html')>-1)}catch(e){utag.DB(e)};break;case'31':try{c[31]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/business-class.html')>-1)}catch(e){utag.DB(e)};break;case'32':try{c[32]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/new-regional-business-class.html')>-1)}catch(e){utag.DB(e)};break;case'33':try{c[33]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/business-class/regional-business-class.html')>-1)}catch(e){utag.DB(e)};break;case'34':try{c[34]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/economy-class/economy.html')>-1)}catch(e){utag.DB(e)};break;case'35':try{c[35]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/first-class/first-class.html')>-1)}catch(e){utag.DB(e)};break;case'36':try{c[36]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/economy-class/new-economy-class.html')>-1)}catch(e){utag.DB(e)};break;case'37':try{c[37]|=(d['dom.url'].toString().indexOf('/travel-information/inflight/travel-classes/premium-economy-class/premium-economy-class.html')>-1)}catch(e){utag.DB(e)};break;case'38':try{c[38]|=(d['dom.url'].toString().indexOf('/destinations/flights-to')>-1)}catch(e){utag.DB(e)};break;case'39':try{c[39]|=(d['dom.url'].toString().indexOf('/destinations.html')>-1)}catch(e){utag.DB(e)};break;case'4':try{c[4]|=(/^IBE/.test(d['js_page.cxDataLayer.page.page_id'])&&d['js_page.cxDataLayer.page.page_id'].toString().indexOf('Fare_Details')>-1)}catch(e){utag.DB(e)};break;case'40':try{c[40]|=(d['dom.url'].toString().indexOf('/destinations/things-to-do-in')>-1)}catch(e){utag.DB(e)};break;case'41':try{c[41]|=(d['dom.url'].toString().indexOf('/frequent-flyers.html')>-1)}catch(e){utag.DB(e)};break;case'42':try{c[42]|=(d['dom.url'].toString().indexOf('/latest-offers.html')>-1)||(d['dom.url'].toString().indexOf('/offers.html')>-1)}catch(e){utag.DB(e)};break;case'43':try{c[43]|=(d['dom.url'].toString().indexOf('/latest-offers/subscribe-offers/newsletter-subscription.html')>-1)}catch(e){utag.DB(e)};break;case'44':try{c[44]|=(d['dom.url'].toString().indexOf('cxholidays.com/chl/r/homepage')>-1)}catch(e){utag.DB(e)};break;case'47':try{c[47]|=(d['page.page_id'].toString().indexOf('fanfares Landing Page')>-1)}catch(e){utag.DB(e)};break;case'48':try{c[48]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Select_Dates')>-1)}catch(e){utag.DB(e)};break;case'5':try{c[5]|=(/^IBE/i.test(d['page.page_id'])&&d['page.page_id'].toString().toLowerCase().indexOf('Passengers'.toLowerCase())>-1&&d['page.page_id'].toString().toLowerCase().indexOf('Revenue_FlexPricer'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'52':try{c[52]|=(d['dom.url'].toString().indexOf('/campaign/marketing/life-well-travelled')>-1)||(d['dom.url'].toString().indexOf('lifewelltravelled.cathaypacific.com')>-1)}catch(e){utag.DB(e)};break;case'53':try{c[53]|=(d['page.country'].toString().toLowerCase()=='JP'.toLowerCase())}catch(e){utag.DB(e)};break;case'55':try{c[55]|=(d['page.country'].toString().toLowerCase()=='CA'.toLowerCase())}catch(e){utag.DB(e)};break;case'58':try{c[58]|=(d['page.currency'].toString().toLowerCase()=='GBP'.toLowerCase())}catch(e){utag.DB(e)};break;case'6':try{c[6]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Select_Dates')>-1&&d['page.page_id'].toString().indexOf('Revenue_FlexPricer')>-1)}catch(e){utag.DB(e)};break;case'63':try{c[63]|=(d['dom.url'].toString().indexOf('fr_FR/flightoffer.vols-classe-economique.html')>-1)}catch(e){utag.DB(e)};break;case'64':try{c[64]|=(d['page.country'].toString().toLowerCase()=='HK'.toLowerCase())}catch(e){utag.DB(e)};break;case'68':try{c[68]|=(d['dom.url'].toString().indexOf('cx/fr_FR/flightoffer.vols-classe-affaires-magic-summer.html')>-1)}catch(e){utag.DB(e)};break;case'69':try{c[69]|=(d['page.country'].toString().toLowerCase()=='US'.toLowerCase())}catch(e){utag.DB(e)};break;case'7':try{c[7]|=(/^IBE/i.test(d['page.page_id'])&&d['page.page_id'].toString().toLowerCase().indexOf('Select_Flights'.toLowerCase())>-1)||(d['page.page_id'].toString().toLowerCase().indexOf('ScheduleDrivenAvailability'.toLowerCase())>-1&&/^IBE/i.test(d['page.page_id']))}catch(e){utag.DB(e)};break;case'70':try{c[70]|=(d['dom.url'].toString().indexOf('/cx/zh_HK/hidden-pages/special-highlight/travel-information/manchester-port/manchester-route.html')>-1)}catch(e){utag.DB(e)};break;case'71':try{c[71]|=(d['dom.url'].toString().indexOf('/cx/en_HK/hidden-pages/special-highlight/travel-information/manchester-port/manchester-route.html')>-1)}catch(e){utag.DB(e)};break;case'73':try{c[73]|=(d['page.country'].toString().toLowerCase()=='AU'.toLowerCase())}catch(e){utag.DB(e)};break;case'74':try{c[74]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-hong-kong.html')>-1)}catch(e){utag.DB(e)};break;case'75':try{c[75]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-chengdu.html')>-1)}catch(e){utag.DB(e)};break;case'76':try{c[76]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-fuzhou.html')>-1)}catch(e){utag.DB(e)};break;case'77':try{c[77]|=(d['dom.url'].toString().indexOf('destinations/flights-to-sapporo.html')>-1)}catch(e){utag.DB(e)};break;case'78':try{c[78]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-shanghai.html')>-1)}catch(e){utag.DB(e)};break;case'79':try{c[79]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-beijing.html')>-1)}catch(e){utag.DB(e)};break;case'8':try{c[8]|=(/^IBE/.test(d['page.page_id'])&&d['page.page_id'].toString().indexOf('Payment')>-1&&d['page.page_id'].toString().indexOf('Revenue_FlexPricer')>-1)}catch(e){utag.DB(e)};break;case'80':try{c[80]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-london.html')>-1)}catch(e){utag.DB(e)};break;case'81':try{c[81]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-paris.html')>-1)}catch(e){utag.DB(e)};break;case'82':try{c[82]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-rome.html')>-1)}catch(e){utag.DB(e)};break;case'83':try{c[83]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-frankfurt.html')>-1)}catch(e){utag.DB(e)};break;case'84':try{c[84]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-zurich.html')>-1)}catch(e){utag.DB(e)};break;case'85':try{c[85]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-manchester.html')>-1)}catch(e){utag.DB(e)};break;case'86':try{c[86]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-new-york.html')>-1)}catch(e){utag.DB(e)};break;case'87':try{c[87]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-boston.html')>-1)}catch(e){utag.DB(e)};break;case'88':try{c[88]|=(d['dom.url'].toString().indexOf('/destinations/flights-to-vancouver.html')>-1)}catch(e){utag.DB(e)};break;case'9':try{c[9]|=(d['page.system.params.stream'].toString().toLowerCase().indexOf('REVENUE'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'90':try{c[90]|=(d['page.country'].toString().toLowerCase().indexOf('NL'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'91':try{c[91]|=(d['page.language'].toString().indexOf('zh')>-1)}catch(e){utag.DB(e)};break;case'92':try{c[92]|=(d['page.language'].toString().indexOf('en')>-1)}catch(e){utag.DB(e)};break;case'93':try{c[93]|=(d['page.language'].toString().indexOf('nl')>-1)}catch(e){utag.DB(e)};break;case'94':try{c[94]|=(d['dom.url'].toString().indexOf('/flightoffer.vliegtickets-amsterdam-australie.economy-class.html')>-1)}catch(e){utag.DB(e)};break;case'95':try{c[95]|=(d['dom.url'].toString().indexOf('/latest-offers/other-offers/other-offers/family/')>-1)}catch(e){utag.DB(e)};break;case'97':try{c[97]|=(d['dom.url'].toString().indexOf('/latest-offers/other-offers/other-offers/3rd-sfo-hkg-flight.html')>-1)}catch(e){utag.DB(e)};break;case'98':try{c[98]|=(d['page.country'].toString().toLowerCase()=='KR'.toLowerCase())}catch(e){utag.DB(e)};break;case'99':try{c[99]|=(/(.*)(australia-well-travelled|australiawelltravelled)(.*)/.test(d['dom.url']))}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();utag.pagevars();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){if(datalayer.page.page_id=='TRP::PACKAGE::CONFIRMATION'||datalayer.page.page_id=='TRP::HOTEL::CONFIRMATION'){utag_data["transaction.payment.total"]=document.getElementById("totalPayment").innerHTML.replace(/[^0-9\.]+/g,"");utag_data["transaction.payment.total_with_currency"]=[cxDataLayer.page.currency,utag_data["transaction.payment.total"]].join("_");var pnr_super=document.getElementById("booking-reference").innerHTML.split("&nbsp;").pop();var pnr=document.getElementsByTagName("h2")[0].innerHTML.split(" - ").pop().substr(0,6);utag_data["transaction.pnr"]=[pnr_super,pnr].join("|");};},function(a,b){if(!window.localStorage.getItem("registration.mm_id")){utag.ut.getMediaMathID=function(o){try{if(o.uuid&&o.uuid!=""){b["registration.mm_id"]=o.uuid;window.localStorage.setItem("registration.mm_id",o.uuid);}}catch(e){utag.DB(e)}}
utag.ut.loader({id:"tealium_mm_uuid_##UTID##",src:"//pixel.mathtag.com/event/js?mt_id=900000&mt_adid=158433&mt_nsync=1&no_attr=1&cs_jsonp=utag.ut.getMediaMathID"});}else{b["registration.mm_id"]=window.localStorage.getItem("registration.mm_id");}}];utag.handler.cfg_extend=[{"alr":1,"bwq":0,"id":"164","blr":0,"end":0},{"alr":0,"bwq":0,"id":"286","blr":0,"end":1}];utag.loader.initcfg=function(){utag.loader.cfg={"655":{load:utag.cond[216],send:1,v:201512100227,wait:1,tid:15015},"693":{load:utag.cond[24],send:1,v:201512220220,wait:1,tid:15015},"84":{load:4,send:1,v:201601210410,wait:1,tid:3101},"76":{load:4,send:1,v:201604220435,wait:1,tid:7110},"80":{load:utag.cond[24],send:1,v:201511280742,wait:1,tid:7110},"56":{load:1,send:1,v:201512150731,wait:1,tid:20064},"224":{load:(utag.cond[22]&&utag.cond[100]),send:1,v:201510260316,wait:1,tid:3015},"606":{load:utag.cond[100],send:1,v:201601280600,wait:1,tid:19087},"421":{load:1,send:1,v:201510260316,wait:1,tid:19003},"118":{load:(utag.cond[6]&&utag.cond[9]),send:1,v:201512040054,wait:1,tid:4001},"133":{load:(utag.cond[7]&&utag.cond[9]),send:1,v:201512040054,wait:1,tid:4001},"134":{load:(utag.cond[4]&&utag.cond[9]),send:1,v:201512040054,wait:1,tid:4001},"135":{load:(utag.cond[5]&&utag.cond[9]),send:1,v:201512040054,wait:1,tid:4001},"136":{load:(utag.cond[8]&&utag.cond[9]),send:1,v:201512040054,wait:1,tid:4001},"137":{load:(utag.cond[3]&&utag.cond[9]),send:1,v:201512220220,wait:1,tid:4001},"138":{load:utag.cond[27],send:1,v:201512040054,wait:1,tid:4001},"139":{load:utag.cond[28],send:1,v:201512040054,wait:1,tid:4001},"140":{load:utag.cond[29],send:1,v:201512040054,wait:1,tid:4001},"141":{load:utag.cond[30],send:1,v:201512040054,wait:1,tid:4001},"142":{load:utag.cond[31],send:1,v:201512040054,wait:1,tid:4001},"143":{load:utag.cond[32],send:1,v:201512040054,wait:1,tid:4001},"144":{load:utag.cond[33],send:1,v:201512040054,wait:1,tid:4001},"145":{load:utag.cond[34],send:1,v:201512040054,wait:1,tid:4001},"146":{load:utag.cond[35],send:1,v:201512040054,wait:1,tid:4001},"147":{load:utag.cond[36],send:1,v:201512040054,wait:1,tid:4001},"148":{load:utag.cond[37],send:1,v:201512040054,wait:1,tid:4001},"149":{load:utag.cond[15],send:1,v:201512040054,wait:1,tid:4001},"150":{load:utag.cond[38],send:1,v:201512040054,wait:1,tid:4001},"151":{load:utag.cond[39],send:1,v:201512040054,wait:1,tid:4001},"152":{load:utag.cond[40],send:1,v:201512040054,wait:1,tid:4001},"153":{load:utag.cond[41],send:1,v:201512040054,wait:1,tid:4001},"154":{load:utag.cond[42],send:1,v:201512040054,wait:1,tid:4001},"155":{load:utag.cond[43],send:1,v:201512040054,wait:1,tid:4001},"156":{load:utag.cond[44],send:1,v:201512040054,wait:1,tid:4001},"157":{load:utag.cond[47],send:1,v:201512040054,wait:1,tid:4001},"221":{load:utag.cond[52],send:1,v:201512040054,wait:1,tid:4001},"164":{load:(utag.cond[53]&&utag.cond[6]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"167":{load:(utag.cond[53]&&utag.cond[7]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"168":{load:(utag.cond[53]&&utag.cond[4]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"169":{load:(utag.cond[53]&&utag.cond[5]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"170":{load:(utag.cond[53]&&utag.cond[8]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"171":{load:(utag.cond[53]&&utag.cond[3]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20067},"172":{load:(utag.cond[53]&&utag.cond[27]),send:1,v:201512040136,wait:1,tid:20067},"173":{load:(utag.cond[53]&&utag.cond[28]),send:1,v:201512040136,wait:1,tid:20067},"174":{load:(utag.cond[53]&&utag.cond[29]),send:1,v:201512040136,wait:1,tid:20067},"175":{load:(utag.cond[53]&&utag.cond[30]),send:1,v:201512040136,wait:1,tid:20067},"176":{load:(utag.cond[53]&&utag.cond[31]),send:1,v:201512040136,wait:1,tid:20067},"177":{load:(utag.cond[53]&&utag.cond[32]),send:1,v:201512040136,wait:1,tid:20067},"178":{load:(utag.cond[53]&&utag.cond[33]),send:1,v:201512040136,wait:1,tid:20067},"179":{load:(utag.cond[53]&&utag.cond[34]),send:1,v:201512040136,wait:1,tid:20067},"180":{load:(utag.cond[53]&&utag.cond[35]),send:1,v:201512040136,wait:1,tid:20067},"181":{load:(utag.cond[53]&&utag.cond[36]),send:1,v:201512040136,wait:1,tid:20067},"182":{load:(utag.cond[53]&&utag.cond[37]),send:1,v:201512040136,wait:1,tid:20067},"183":{load:(utag.cond[53]&&utag.cond[15]),send:1,v:201512040136,wait:1,tid:20067},"184":{load:(utag.cond[53]&&utag.cond[38]),send:1,v:201512040136,wait:1,tid:20067},"185":{load:(utag.cond[53]&&utag.cond[39]),send:1,v:201512040136,wait:1,tid:20067},"186":{load:(utag.cond[53]&&utag.cond[40]),send:1,v:201512040136,wait:1,tid:20067},"187":{load:(utag.cond[53]&&utag.cond[41]),send:1,v:201512040136,wait:1,tid:20067},"188":{load:(utag.cond[53]&&utag.cond[42]),send:1,v:201512040136,wait:1,tid:20067},"189":{load:(utag.cond[53]&&utag.cond[43]),send:1,v:201512040136,wait:1,tid:20067},"190":{load:(utag.cond[53]&&utag.cond[47]),send:1,v:201512040136,wait:1,tid:20067},"165":{load:(utag.cond[53]&&utag.cond[47]),send:1,v:201512040136,wait:1,tid:20040},"191":{load:(utag.cond[48]&&utag.cond[9]&&utag.cond[53]),send:1,v:201512040136,wait:1,tid:20040},"192":{load:(utag.cond[53]&&utag.cond[7]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20040},"193":{load:(utag.cond[53]&&utag.cond[4]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20040},"194":{load:(utag.cond[53]&&utag.cond[5]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20040},"195":{load:(utag.cond[53]&&utag.cond[8]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20040},"196":{load:(utag.cond[53]&&utag.cond[3]&&utag.cond[9]),send:1,v:201512040136,wait:1,tid:20040},"197":{load:(utag.cond[53]&&utag.cond[27]),send:1,v:201512040136,wait:1,tid:20040},"198":{load:(utag.cond[53]&&utag.cond[28]),send:1,v:201512040136,wait:1,tid:20040},"199":{load:(utag.cond[53]&&utag.cond[29]),send:1,v:201512040136,wait:1,tid:20040},"200":{load:(utag.cond[53]&&utag.cond[30]),send:1,v:201512040136,wait:1,tid:20040},"201":{load:(utag.cond[53]&&utag.cond[31]),send:1,v:201512040136,wait:1,tid:20040},"202":{load:(utag.cond[53]&&utag.cond[32]),send:1,v:201512040136,wait:1,tid:20040},"203":{load:(utag.cond[53]&&utag.cond[33]),send:1,v:201512040136,wait:1,tid:20040},"204":{load:(utag.cond[53]&&utag.cond[34]),send:1,v:201512040136,wait:1,tid:20040},"205":{load:(utag.cond[53]&&utag.cond[35]),send:1,v:201512040136,wait:1,tid:20040},"206":{load:(utag.cond[53]&&utag.cond[36]),send:1,v:201512040136,wait:1,tid:20040},"207":{load:(utag.cond[53]&&utag.cond[37]),send:1,v:201512040136,wait:1,tid:20040},"208":{load:(utag.cond[53]&&utag.cond[38]),send:1,v:201512040136,wait:1,tid:20040},"209":{load:(utag.cond[53]&&utag.cond[39]),send:1,v:201512040136,wait:1,tid:20040},"210":{load:(utag.cond[53]&&utag.cond[40]),send:1,v:201512040136,wait:1,tid:20040},"211":{load:(utag.cond[53]&&utag.cond[41]),send:1,v:201512040136,wait:1,tid:20040},"212":{load:(utag.cond[53]&&utag.cond[42]),send:1,v:201512040136,wait:1,tid:20040},"213":{load:(utag.cond[53]&&utag.cond[43]),send:1,v:201512040136,wait:1,tid:20040},"227":{load:(utag.cond[14]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:18016},"228":{load:(utag.cond[14]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20067},"229":{load:(utag.cond[14]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20067},"230":{load:(utag.cond[14]&&utag.cond[30]),send:1,v:201510260316,wait:1,tid:20067},"231":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,v:201512220220,wait:1,tid:18016},"232":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,v:201510260316,wait:1,tid:20067},"233":{load:(utag.cond[14]&&utag.cond[3]&&utag.cond[9]),send:1,v:201510260316,wait:1,tid:20067},"237":{load:(utag.cond[55]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20067},"261":{load:(utag.cond[14]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20067},"264":{load:(utag.cond[14]&&utag.cond[4]&&utag.cond[9]),send:1,v:201510260316,wait:1,tid:20067},"265":{load:(utag.cond[14]&&utag.cond[5]&&utag.cond[9]),send:1,v:201510260316,wait:1,tid:20067},"266":{load:utag.cond[14],send:1,v:201510260316,wait:1,tid:7115},"267":{load:(utag.cond[14]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20067},"268":{load:(utag.cond[14]&&utag.cond[8]&&utag.cond[9]),send:1,v:201510260316,wait:1,tid:20067},"270":{load:utag.cond[63],send:1,v:201510260316,wait:1,tid:4001},"275":{load:(utag.cond[14]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20067},"287":{load:utag.cond[68],send:1,v:201603150329,wait:1,tid:4001},"288":{load:utag.cond[69],send:1,v:201603150329,wait:1,tid:7115},"289":{load:(utag.cond[53]&&utag.cond[15]),send:1,v:201512040045,wait:1,tid:20067},"290":{load:(utag.cond[53]&&utag.cond[48]),send:1,v:201512040045,wait:1,tid:20067},"291":{load:(utag.cond[53]&&utag.cond[4]),send:1,v:201512040045,wait:1,tid:20067},"294":{load:(utag.cond[53]&&utag.cond[24]),send:1,v:201512040045,wait:1,tid:20067},"295":{load:(utag.cond[53]&&utag.cond[52]),send:1,v:201512040045,wait:1,tid:20067},"297":{load:(utag.cond[53]&&utag.cond[15]),send:1,v:201512030752,wait:1,tid:20040},"298":{load:(utag.cond[53]&&utag.cond[48]),send:1,v:201512030752,wait:1,tid:20040},"299":{load:(utag.cond[53]&&utag.cond[4]),send:1,v:201512030752,wait:1,tid:20040},"300":{load:(utag.cond[53]&&utag.cond[24]),send:1,v:201512030752,wait:1,tid:20040},"301":{load:utag.cond[52],send:1,v:201512030752,wait:1,tid:20040},"302":{load:(utag.cond[53]&&utag.cond[4]),send:1,v:201512040045,wait:1,tid:7117},"303":{load:(utag.cond[53]&&utag.cond[24]),send:1,v:201512040045,wait:1,tid:7117},"304":{load:(utag.cond[53]&&utag.cond[48]),send:1,v:201512040045,wait:1,tid:7117},"305":{load:utag.cond[53],send:1,v:201512040045,wait:1,tid:7115},"307":{load:(utag.cond[53]&&utag.cond[7]),send:1,v:201512040045,wait:1,tid:20067},"308":{load:(utag.cond[53]&&utag.cond[4]),send:1,v:201512040045,wait:1,tid:20067},"309":{load:(utag.cond[53]&&utag.cond[24]),send:1,v:201512040045,wait:1,tid:20067},"337":{load:utag.cond[70],send:1,v:201510260316,wait:1,tid:4001},"338":{load:utag.cond[71],send:1,v:201510260316,wait:1,tid:4001},"342":{load:1,send:1,v:201510260316,wait:1,tid:7127},"365":{load:(utag.cond[53]&&utag.cond[48]),send:1,v:201510260316,wait:1,tid:20067},"366":{load:(utag.cond[53]&&utag.cond[4]),send:1,v:201510260316,wait:1,tid:20067},"367":{load:(utag.cond[53]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20067},"382":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[74]),send:1,v:201510260316,wait:1,tid:6025},"384":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[75]),send:1,v:201510260316,wait:1,tid:6025},"385":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[76]),send:1,v:201510260316,wait:1,tid:6025},"386":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[77]),send:1,v:201510260316,wait:1,tid:6025},"387":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[78]),send:1,v:201510260316,wait:1,tid:6025},"388":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[79]),send:1,v:201510260316,wait:1,tid:6025},"389":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[80]),send:1,v:201510260316,wait:1,tid:6025},"390":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[81]),send:1,v:201510260316,wait:1,tid:6025},"391":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[82]),send:1,v:201510260316,wait:1,tid:6025},"392":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[83]),send:1,v:201510260316,wait:1,tid:6025},"393":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[84]),send:1,v:201510260316,wait:1,tid:6025},"394":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[85]),send:1,v:201510260316,wait:1,tid:6025},"395":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[86]),send:1,v:201510260316,wait:1,tid:6025},"396":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[87]),send:1,v:201510260316,wait:1,tid:6025},"397":{load:(utag.cond[73]&&utag.cond[92]&&utag.cond[88]),send:1,v:201510260316,wait:1,tid:6025},"398":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[48]),send:1,v:201510260316,wait:1,tid:20040},"399":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20040},"403":{load:(utag.cond[90]&&utag.cond[93]&&utag.cond[94]),send:1,v:201510260316,wait:1,tid:20040},"404":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[15]),send:1,v:201512040045,wait:1,tid:4001},"405":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[15]),send:1,v:201512040045,wait:1,tid:4001},"407":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[95]),send:1,v:201512040045,wait:1,tid:4001},"408":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[95]),send:1,v:201512040045,wait:1,tid:4001},"410":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[95]),send:1,v:201512040045,wait:1,tid:4001},"411":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[95]),send:1,v:201512040045,wait:1,tid:4001},"412":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[92]&&utag.cond[97]),send:1,v:201512040045,wait:1,tid:4001},"413":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[92]&&utag.cond[97]),send:1,v:201512040045,wait:1,tid:4001},"417":{load:(utag.cond[22]&&utag.cond[53]&&utag.cond[5]),send:1,v:201512040045,wait:1,tid:20067},"419":{load:(utag.cond[22]&&utag.cond[53]&&utag.cond[92]&&utag.cond[15]),send:1,v:201512040045,wait:1,tid:20067},"422":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[48]),send:1,v:201510260316,wait:1,tid:4001},"423":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:4001},"425":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[93]&&utag.cond[94]),send:1,v:201510260316,wait:1,tid:4001},"428":{load:(utag.cond[22]&&utag.cond[99]),send:1,v:201510260316,wait:1,tid:20011},"429":{load:(utag.cond[22]&&utag.cond[55]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20010},"430":{load:(utag.cond[22]&&utag.cond[55]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20010},"431":{load:(utag.cond[22]&&utag.cond[53]),send:1,v:201510260316,wait:1,tid:20010},"432":{load:(utag.cond[22]&&utag.cond[53]),send:1,v:201510260316,wait:1,tid:20067},"439":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20078},"452":{load:utag.cond[102],send:1,v:201511280742,wait:1,tid:4001},"458":{load:utag.cond[108],send:1,v:201511280742,wait:1,tid:4001},"460":{load:utag.cond[110],send:1,v:201511280742,wait:1,tid:4001},"464":{load:utag.cond[111],send:1,v:201511280742,wait:1,tid:4001},"465":{load:utag.cond[109],send:1,v:201511280742,wait:1,tid:4001},"467":{load:utag.cond[112],send:1,v:201510260316,wait:1,tid:4001},"469":{load:(utag.cond[98]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:4001},"470":{load:(utag.cond[98]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20040},"474":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[113]),send:1,v:201512040045,wait:1,tid:4001},"475":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[114]),send:1,v:201512040045,wait:1,tid:4001},"476":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[92]&&utag.cond[115]),send:1,v:201512040045,wait:1,tid:4001},"477":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[91]&&utag.cond[115]),send:1,v:201512040045,wait:1,tid:4001},"481":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[92]&&utag.cond[113]),send:1,v:201512040045,wait:1,tid:20067},"482":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[91]&&utag.cond[114]),send:1,v:201512040045,wait:1,tid:20067},"483":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[48]),send:1,v:201512040045,wait:1,tid:20067},"486":{load:(utag.cond[22]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20011},"487":{load:(utag.cond[2]&&utag.cond[92]),send:1,v:201510260316,wait:1,tid:20010},"488":{load:(utag.cond[2]&&utag.cond[91]),send:1,v:201510260316,wait:1,tid:20010},"489":{load:(utag.cond[23]&&utag.cond[64]&&utag.cond[116]),send:1,v:201512040045,wait:1,tid:4001},"492":{load:(utag.cond[98]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20010},"503":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[122]),send:1,v:201512040045,wait:1,tid:4001},"504":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[123]),send:1,v:201512040045,wait:1,tid:4001},"505":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[125]),send:1,v:201512040045,wait:1,tid:4001},"506":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[126]),send:1,v:201512040045,wait:1,tid:4001},"507":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[127]),send:1,v:201512040045,wait:1,tid:4001},"508":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[128]),send:1,v:201512040045,wait:1,tid:4001},"509":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[129]),send:1,v:201512040045,wait:1,tid:4001},"510":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[130]),send:1,v:201512040045,wait:1,tid:4001},"511":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[131]),send:1,v:201512040045,wait:1,tid:4001},"512":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[132]),send:1,v:201512040045,wait:1,tid:4001},"513":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[133]),send:1,v:201512040045,wait:1,tid:4001},"514":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[134]),send:1,v:201512040045,wait:1,tid:4001},"515":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[135]),send:1,v:201512040045,wait:1,tid:4001},"516":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[136]),send:1,v:201603150329,wait:1,tid:4001},"517":{load:(utag.cond[22]&&utag.cond[137]),send:1,v:201510260316,wait:1,tid:4001},"518":{load:(utag.cond[22]&&utag.cond[138]),send:1,v:201510260316,wait:1,tid:4001},"519":{load:(utag.cond[22]&&utag.cond[139]),send:1,v:201510260316,wait:1,tid:4001},"520":{load:(utag.cond[22]&&utag.cond[140]),send:1,v:201510260316,wait:1,tid:4001},"521":{load:(utag.cond[22]&&utag.cond[141]),send:1,v:201510260316,wait:1,tid:4001},"522":{load:(utag.cond[22]&&utag.cond[142]),send:1,v:201510260316,wait:1,tid:4001},"523":{load:(utag.cond[22]&&utag.cond[143]),send:1,v:201510260316,wait:1,tid:4001},"527":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[144]),send:1,v:201510260316,wait:1,tid:7117},"528":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[145]),send:1,v:201510260316,wait:1,tid:7117},"529":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[146]),send:1,v:201510260316,wait:1,tid:7117},"531":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[147]),send:1,v:201510260316,wait:1,tid:4001},"532":{load:utag.cond[148],send:1,v:201510260316,wait:1,tid:4001},"535":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:18016},"538":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,v:201510260316,wait:1,tid:20067},"545":{load:(utag.cond[22]&&utag.cond[149]),send:1,v:201510260316,wait:1,tid:4001},"546":{load:(utag.cond[22]&&utag.cond[149]),send:1,v:201510260316,wait:1,tid:4001},"547":{load:utag.cond[150],send:1,v:201512040045,wait:1,tid:7117},"548":{load:utag.cond[151],send:1,v:201512040045,wait:1,tid:7117},"549":{load:utag.cond[152],send:1,v:201512040045,wait:1,tid:7117},"550":{load:(utag.cond[73]&&utag.cond[6]),send:1,v:201512040045,wait:1,tid:7117},"551":{load:(utag.cond[73]&&utag.cond[24]),send:1,v:201512040045,wait:1,tid:7117},"552":{load:utag.cond[153],send:1,v:201510260316,wait:1,tid:4001},"553":{load:utag.cond[156],send:1,v:201510260316,wait:1,tid:4001},"554":{load:utag.cond[157],send:1,v:201510260316,wait:1,tid:4001},"555":{load:utag.cond[159],send:1,v:201510260316,wait:1,tid:4001},"556":{load:utag.cond[161],send:1,v:201510260316,wait:1,tid:4001},"557":{load:utag.cond[163],send:1,v:201510260316,wait:1,tid:4001},"558":{load:utag.cond[165],send:1,v:201510260316,wait:1,tid:4001},"563":{load:utag.cond[158],send:1,v:201510260316,wait:1,tid:4001},"564":{load:utag.cond[160],send:1,v:201510260316,wait:1,tid:4001},"565":{load:utag.cond[162],send:1,v:201510260316,wait:1,tid:4001},"566":{load:utag.cond[164],send:1,v:201510260316,wait:1,tid:4001},"570":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[166]),send:1,v:201510260316,wait:1,tid:6026},"572":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[24]),send:1,v:201512040045,wait:1,tid:20040},"573":{load:(utag.cond[23]&&utag.cond[167]),send:1,v:201510260316,wait:1,tid:4001},"575":{load:(utag.cond[55]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:20006},"577":{load:(utag.cond[55]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:4001},"580":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[147]),send:1,v:201510260316,wait:1,tid:18016},"587":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[15]),send:1,v:201510260316,wait:1,tid:7115},"590":{load:utag.cond[7],send:1,v:201510260316,wait:1,tid:20011},"591":{load:utag.cond[24],send:1,v:201510300612,wait:1,tid:4001},"592":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[15]),send:1,v:201603150329,wait:1,tid:4001},"593":{load:utag.cond[48],send:1,v:201510300612,wait:1,tid:4001},"594":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[170]),send:1,v:201510300612,wait:1,tid:4001},"595":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[171]),send:1,v:201510300612,wait:1,tid:4001},"596":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[172]),send:1,v:201510300612,wait:1,tid:4001},"597":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[173]),send:1,v:201510300612,wait:1,tid:4001},"598":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[174]),send:1,v:201510300612,wait:1,tid:4001},"599":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[175]),send:1,v:201510300612,wait:1,tid:4001},"600":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[176]),send:1,v:201510300612,wait:1,tid:4001},"601":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[177]),send:1,v:201510300612,wait:1,tid:4001},"605":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[178]),send:1,v:201511050822,wait:1,tid:4001},"611":{load:utag.cond[180],send:1,v:201511090832,wait:0,tid:20067,src:"//assets.cathaypacific.com/tags/utag.611.js"},"612":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[181]),send:1,v:201512040054,wait:1,tid:4001},"613":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[181]),send:1,v:201512040054,wait:1,tid:18016},"615":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[181]),send:1,v:201512040054,wait:1,tid:20011},"616":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[182]),send:1,v:201512040054,wait:1,tid:20011},"624":{load:(utag.cond[22]&&utag.cond[186]&&utag.cond[185]),send:1,v:201511171246,wait:1,tid:20067},"625":{load:(utag.cond[22]&&utag.cond[186]&&utag.cond[24]),send:1,v:201511171246,wait:1,tid:20067},"636":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[92]&&utag.cond[15]),send:1,v:201511280742,wait:1,tid:7115},"637":{load:(utag.cond[23]&&utag.cond[196]&&utag.cond[92]&&utag.cond[15]),send:1,v:201511280742,wait:1,tid:7115},"638":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[197]),send:1,v:201511280742,wait:1,tid:4001},"653":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[212]&&utag.cond[15]),send:1,v:201512010221,wait:1,tid:7115},"660":{load:1,send:1,v:201512100227,wait:1,tid:15015},"664":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[190]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/Flight_Details.rules.min.js"},"665":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[191]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/Baggage_Notice.rules.min.js"},"666":{load:(utag.cond[22]&&utag.cond[220]&&utag.cond[221]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/Passage_Details.rules.min.js"},"669":{load:(utag.cond[22]&&utag.cond[220]&&utag.cond[227]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/OLCI-Confirmation.rules.min.js"},"670":{load:(utag.cond[22]&&utag.cond[220]&&utag.cond[228]),send:1,v:201512110532,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/Seat_Map.rules.min.js"},"671":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[6]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Select_Dates.rules.min.js"},"672":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[224]),send:1,v:201512110049,wait:1,tid:4001},"673":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[184]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Select_Flights.rules.min.js"},"674":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[4]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Fare_Details.rules.min.js"},"675":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[5]),send:1,v:201602190859,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Passengers.rules.min.js"},"676":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[8]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Payment.rules.min.js"},"677":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,v:201512110521,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/Confirmation.rules.min.js"},"683":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[214]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/mmb/manage-booking.rules.min.js"},"684":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[213]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/mmb/Travel_Alerts.rules.min.js"},"685":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[219]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/mmb/View_Manage_Booking_Summary.rules.min.js"},"686":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[198]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/ATC-Select_Dates.rules.min.js"},"687":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[199]),send:1,v:201512110527,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/ATC-Select_Flights.rules.min.js"},"662":{load:(utag.cond[22]&&utag.cond[14]&&utag.cond[24]),send:1,v:201602191516,wait:1,tid:6026},"692":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[232]),send:1,v:201512241305,wait:1,tid:4001},"697":{load:(utag.cond[14]&&utag.cond[121]),send:1,v:201512241305,wait:1,tid:20010},"723":{load:(utag.cond[22]&&utag.cond[98]&&utag.cond[15]),send:1,v:201601210410,wait:1,tid:20067},"728":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[251]),send:1,v:201601210410,wait:1,tid:4001},"735":{load:(utag.cond[22]&&utag.cond[261]&&utag.cond[24]),send:1,v:201603170229,wait:1,tid:20011},"737":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[15]),send:1,v:201601210410,wait:1,tid:20067},"738":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[7]),send:1,v:201601210410,wait:1,tid:20011},"740":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[15]),send:1,v:201601280600,wait:1,tid:6026},"741":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[24]),send:1,v:201601280600,wait:1,tid:6026},"749":{load:(utag.cond[22]&&utag.cond[220]&&utag.cond[254]),send:1,v:201602110844,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/olci/Cancel-Check-In.rules.min.js"},"751":{load:utag.cond[73],send:1,v:201602161218,wait:1,tid:1066},"754":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[258]),send:1,v:201603090705,wait:1,tid:6026},"757":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[255]&&utag.cond[24]),send:1,v:201602260245,wait:1,tid:4001},"767":{load:(utag.cond[22]&&utag.cond[14]&&utag.cond[24]&&utag.cond[9]),send:1,v:201602251509,wait:1,tid:6026},"768":{load:(utag.cond[22]&&utag.cond[14]&&utag.cond[8]&&utag.cond[9]),send:1,v:201602251509,wait:1,tid:6026},"769":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[24]&&utag.cond[9]),send:1,v:201603010648,wait:1,tid:6026},"770":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[256]),send:1,v:201603010648,wait:1,tid:6026},"771":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[257]),send:1,v:201603010648,wait:1,tid:4001},"772":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[233]),send:1,v:201603010733,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/ATC-Fare_Details.rules.min.js"},"773":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[69]&&utag.cond[252]),send:1,v:201603010733,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/ATC-Payment.rules.min.js"},"774":{load:(utag.cond[22]&&utag.cond[220]&&utag.cond[253]),send:1,v:201603010733,wait:1,tid:20067,src:"//assets.cathaypacific.com/libs/accessibility/ibe/ATC-Confirmation.rules.min.js"},"775":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[7]),send:1,v:201603040328,wait:1,tid:6026},"780":{load:(utag.cond[22]&&utag.cond[196]&&utag.cond[256]),send:1,v:201603080125,wait:1,tid:4001},"781":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[7]),send:1,v:201603090705,wait:1,tid:6026},"782":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[24]&&utag.cond[9]),send:1,v:201603090705,wait:1,tid:6026},"787":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[15]),send:1,v:201604040413,wait:1,tid:13051},"789":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[266]),send:1,v:201604071221,wait:1,tid:13051},"790":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[48]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"832":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[7]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"833":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[4]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"834":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[121]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"835":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[8]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"836":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[24]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:13051},"798":{load:1,send:1,v:201603110314,wait:1,tid:2013},"799":{load:(utag.cond[22]&&utag.cond[69]&&utag.cond[15]),send:1,v:201603140332,wait:1,tid:18016},"800":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[260]),send:1,v:201603140505,wait:1,tid:20040},"804":{load:(utag.cond[22]&&utag.cond[73]&&utag.cond[262]&&utag.cond[24]),send:1,v:201603170229,wait:1,tid:4001},"806":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[263]),send:1,v:201603290417,wait:1,tid:4001},"807":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[166]),send:1,v:201603290417,wait:1,tid:20040},"808":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[48]),send:1,v:201603290417,wait:1,tid:20040},"809":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[24]),send:1,v:201603290417,wait:1,tid:20040},"811":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[264]),send:1,v:201603311709,wait:1,tid:20040},"812":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[265]),send:1,v:201603290417,wait:1,tid:4001},"823":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[92]&&utag.cond[48]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:6023},"824":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[92]&&utag.cond[7]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:6023},"825":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[92]&&utag.cond[4]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:6023},"826":{load:(utag.cond[2]&&utag.cond[22]&&utag.cond[92]&&utag.cond[24]&&utag.cond[9]),send:1,v:201604080328,wait:1,tid:6023},"837":{load:(utag.cond[22]&&utag.cond[92]&&utag.cond[266]),send:1,v:201604071221,wait:1,tid:6023},"827":{load:(utag.cond[22]&&utag.cond[90]&&utag.cond[264]),send:1,v:201603311709,wait:1,tid:4001},"831":{load:(utag.cond[22]&&utag.cond[261]&&utag.cond[24]),send:1,v:201604061339,wait:1,tid:4001},"840":{load:(utag.cond[22]&&utag.cond[14]&&utag.cond[58]&&utag.cond[24]&&utag.cond[9]),send:1,v:201604071459,wait:1,tid:1115},"847":{load:(utag.cond[69]&&utag.cond[15]),send:1,v:201604190511,wait:1,tid:20010},"848":{load:(utag.cond[22]&&utag.cond[270]&&utag.cond[269]),send:1,v:201604151028,wait:1,tid:20011},"854":{load:(utag.cond[69]&&utag.cond[3]),send:1,v:201604190511,wait:1,tid:20010},"856":{load:(utag.cond[22]&&utag.cond[268]&&utag.cond[15]),send:1,v:201604181946,wait:1,tid:23013},"860":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[271]),send:1,v:201604181946,wait:1,tid:4001},"861":{load:(utag.cond[22]&&utag.cond[24]&&utag.cond[9]),send:1,v:201604191407,wait:1,tid:20011},"863":{load:(utag.cond[22]&&utag.cond[48]),send:1,v:201604191407,wait:1,tid:20011},"869":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[271]),send:1,v:201604200436,wait:1,tid:25018},"871":{load:(utag.cond[22]&&utag.cond[169]&&utag.cond[272]),send:1,v:201604200436,wait:1,tid:4001},"872":{load:(utag.cond[22]&&utag.cond[64]&&utag.cond[273]),send:1,v:201604220435,wait:1,tid:4001}};utag.loader.cfgsort=["655","693","84","76","80","56","224","606","421","118","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","221","164","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","165","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","227","228","229","230","231","232","233","237","261","264","265","266","267","268","270","275","287","288","289","290","291","294","295","297","298","299","300","301","302","303","304","305","307","308","309","337","338","342","365","366","367","382","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","403","404","405","407","408","410","411","412","413","417","419","422","423","425","428","429","430","431","432","439","452","458","460","464","465","467","469","470","474","475","476","477","481","482","483","486","487","488","489","492","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","527","528","529","531","532","535","538","545","546","547","548","549","550","551","552","553","554","555","556","557","558","563","564","565","566","570","572","573","575","577","580","587","590","591","592","593","594","595","596","597","598","599","600","601","605","611","612","613","615","616","624","625","636","637","638","653","660","664","665","666","669","670","671","672","673","674","675","676","677","683","684","685","686","687","662","692","697","723","728","735","737","738","740","741","749","751","754","757","767","768","769","770","771","772","773","774","775","780","781","782","787","789","790","832","833","834","835","836","798","799","800","804","806","807","808","809","811","812","823","824","825","826","837","827","831","840","847","848","854","856","860","861","863","869","871","872"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(var i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[i]=utag_cfg_ovrd[i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1&&b.s2s!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{window.doCoreMetrixPort=function(origin,destination,resultsReturned){var core_attlist=core_attribute1+core_delim+core_attribute2;var pageID=pathSearchByOdADR;var searchTerm='Flight Status::Route::'+origin+'_'+destination;cxDataLayer={'page':{'page_id':pageID,'page_category':'','page_name':"Flight Status",'search':{'keyword':searchTerm,'results':resultsReturned},'brand':cm_site,'country':countryCode,"language":languageCode,"env":cxDataLayerEnv}};tmsCoremetricsPageViewTag(pageID,core_categoryID,searchTerm,resultsReturned,core_attlist);}}catch(e){utag.DB(e)};try{if(document.URL.indexOf('-newsletter-subscription.html')!==-1){window.doSuccessMS2=function(){console.log('doSuccessMS2');if(userProfile!=null){memberID=userProfile.membershipNumber;memberType=userProfile.currentTier;if(memberType!="AM"){memberType="MPO";}}else{memberID="";memberType="";}
var optAttributes='{"key":"memberID", "value":"'+memberID+'"},';optAttributes+='{"key":"memberType", "value":"'+memberType+'"}';callCISEventLog('CXPECIALS','513',locale,'',optAttributes);var submissionPath=currentNodePath+".member-thankyou.html?ruSubscribe=n";$.ajax({type:'POST',url:submissionPath,contentType:"application/json; charset=utf-8",success:(function(data){$("#enewsletter-signup-content").html(data);cmCreateConversionEventTag("CXpecials Un-subscription","2","CXpecials");})});window.scrollTo(0,0);}
window.doTagThankyou=function(){try{cmCreateConversionEventTag("CXpecials Subscription","2","CXpecials");}catch(e){console.log("coremetrics not implemented");}}}}catch(e){utag.DB(e)};try{try{if(typeof(datalayer.itinerary)!="undefined"&&datalayer.page.page_code=="PURC"){var days_advance="> 2 weeks bookers";switch(datalayer.itinerary.days_advance){case 0:days_advance="Same day bookers";break;case 1:case 2:case 3:days_advance="Day 1-3 last minuate bookers";break;case 4:case 5:case 6:case 7:days_advance="Day 4-7 adhoc bookers ";break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:days_advance="2 weeks bookers";break;}
cxOptimizely.dimension('days advance',days_advance);};}catch(e){cxTagLogger(e);};}catch(e){utag.DB(e)};try{if(cxDataLayerEnv||"dev"){if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[132]=='undefined'){utag.runonce[132]=1;$(".flight-booking-panel #depart").bind('mousedown',function(e){utag.link({"element.element_id":"Search Panel::Book a trip::Depart","element.element_category":'Search Panel::Book a trip'})});}}}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[109]=='undefined'){utag.runonce[109]=1;jQuery('#change-region').bind('mousedown',function(e){utag.link({"element.element_id":"Change Region","element.element_category":"Header"});});}}catch(e){};}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[126]=='undefined'){utag.runonce[126]=1;$("a.mpo-trigger").bind('mousedown',function(e){if($(this).attr("aria-expanded")=="false"){status="Slide down"}else{status="Slide up"}
utag.link({"element.element_id":"MPO Sign-in::"+status,"element.element_category":"Header"});});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[108]=='undefined'){utag.runonce[108]=1;jQuery('.home-tabs > .tabs >  a').bind('mousedown',function(e){utag.link({"element.element_id":$(this).attr("data-tab-id"),"element.element_category":'Homepage::Search Panel'})});}}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[110]=='undefined'){utag.runonce[110]=1;setTimeout(function(){jQuery('select.destination-list').bind('change',function(e){utag.link({"element.element_id":"Fare Table::"+$(this).val(),"element.element_category":"Homepage::Fare Table"});})},1000);}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[112]=='undefined'){utag.runonce[112]=1;setTimeout(function(){$("a.expand-button").bind('mousedown',function(e){if($(this).parent().attr('aria-expanded')=="false"){type=$(this).parent().attr("data-item-category").toUpperCase();utag.link({"element.element_id":"Expand Icon::"+type,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});}});}(),2000)}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[116]=='undefined'){utag.runonce[116]=1;$("section.featured-locations > div > div > div.tabs > a").bind('mousedown',function(e){utag.link({"element.element_id":"Featured Location Tab","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[113]=='undefined'){utag.runonce[113]=1;$("input.ui-checkbox-input").bind('change',function(e){if(this.checked){utag.link({"element.element_id":"Inspire me Filter::"+$(this).attr('data-filter-id'),"element.element_category":"Explore Destination::Inspire me"});}});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[115]=='undefined'){utag.runonce[115]=1;$("a.explore-more").bind('mousedown',function(e){if(document.URL.indexOf('inspire-me.html')==-1){utag.link({"element.element_id":"See more::"+datalayer.page.meta.city,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city})}else{utag.link({"element.element_id":"See more guides","element.element_category":"Explore Destination::Inspire me"})}});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[118]=='undefined'){utag.runonce[118]=1;$("div.things-to-do > div.header > div > div > select").bind('change',function(e){var location=$(this).parent().children("span").children("span").html()
category=$(this).val().toUpperCase()||"ALL"
utag.link({"element.element_id":"Things to do::"+category,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[120]=='undefined'){utag.runonce[120]=1;$("div.header.parbase > div.navigation > ul > li").bind('mousedown',function(e){var element_id="Navigation Icon::";var link=$(this).find("a").first().attr("href")
if(link=="#"){element_id+=document.URL.split('/').pop().replace(/\.html/g,'').replace(/\./g,'-').replace(/#/g,"")}else{element_id+=link.split('/').pop().replace(/\.html/g,'').replace(/\./g,'-').replace(/#/g,"")}
utag.link({"element.element_id":element_id,"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){};}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[122]=='undefined'){utag.runonce[122]=1;$("#destination-item-listing > a").bind('mousedown',function(e){city_name=$(this).attr("href").split(".")[1].toUpperCase();utag.link({"element.element_id":"Destination Picture:: "+city_name,"element.element_category":"Explore Destination::Inspire me"});});$("li.cities-group > a").bind('mousedown',function(e){city_name=$(this).attr("href").split(".")[1].toUpperCase();utag.link({"element.element_id":"Destination Name:: "+city_name,"element.element_category":"Explore Destination::Inspire me"});});$("div.guide-menu-tabs > div > a").bind('mousedown',function(e){tab_text=$(this).text();utag.link({"element.element_id":"Destination Guide Tab:: "+tab_text,"element.element_category":"Explore Destination::Inspire me"});});$('section.related-destinations > ul > li > a').bind('mousedown',function(e){utag.link({"element.element_id":"Destination Picture::"+$(this).attr("href").replace(/\.html/g,'').split(".").pop(),"element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city})});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[124]=='undefined'){utag.runonce[124]=1;$("div.button-inspire > a").bind('mousedown',function(e){utag.link({"element.element_id":"Inspire me","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[128]=='undefined'){utag.runonce[128]=1;$(".flex-prev").bind('mousedown',function(e){utag.link({"element.element_id":"Image Navigation::Prev","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});$(".flex-next").bind('mousedown',function(e){utag.link({"element.element_id":"Image Navigation::Next","element.element_category":"Explore Destination::Destination Page::"+datalayer.page.meta.city});});}}catch(e){utag.DB(e)};try{if(document.URL.indexOf("/latest-offers/subscribe-offers/newsletter-subscription.html")>-1||document.URL.indexOf("/latest-offers/subscribe-offers/ka-specials-newsletter-subscription.html")>-1){$("select#title").prepend(new Option('Please select...','',true,true));$("select#title option:first").attr("selected","selected");}}catch(e){utag.DB(e)};try{if(cxDataLayer.page.env!=='prod'){if((datalayer.page.page_code="PURC"||datalayer.page.page_code=="CONF")){window.insertInsuranceCaption=function(msg){$('<span style="display:block;" id="insurance_caption"><p>'+msg+'</p></span>').insertAfter($(".price-amount.redFont.clear").last())};window.removeInsuranceCaption=function(msg){$('#insurance_caption').remove();};var msg;switch(cxDataLayer.page.country){case"HK":if(cxDataLayer.page.language=='en'){msg="Travel insurance premium is charged separately and will be collected by QBE Hong Kong & Shanghai Insurance Ltd.";}else{msg="旅遊保險收費將經由昆士蘭聯保保險有限公司收取。";};break;case"AU":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (Australia) Limited ABN 78 0003 191 035 ";break;case"GB":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (Europe) Limited";break;case"SG":msg="Travel insurance premium is charged separately and will be collected by QBE Insurance (International) Limited - Singapore Branch";break;};};};if(datalayer.page.page_code="PURC"){$('.greenCheck').click(function(){checked=$('input[name="INSCHECKHCI"]').is(":checked")
if(checked){insertInsuranceCaption(msg);}else{removeInsuranceCaption(msg);}});};if(datalayer.page.page_code=="CONF"&&($(cxDataLayer.products).last().attr("type")=="insurance")){insertInsuranceCaption(msg);};}catch(e){utag.DB(e)};try{if(document.domain=="book.cathaypacific.com"||document.domain=="book.dragonair.com"){if(datalayer.page.page_id=="IBE::Revenue::Revenue_BOH::Payment"){$("label[for*=ACE_insurance_no3]").click();$("#insurance_div_3").hide();};};}catch(e){utag.DB(e)};try{try{if($('#cross-sell-banner > a').length>0){$('#cross-sell-banner > a').attr('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-TOPBANNER")
cmCreateManualImpressionTag(cxDataLayer.page.country+"-_-AML-_-XSELL-TOPBANNER");}}catch(e){};try{if($('#hotelsList > div.hotel-item > div.hotel-content > div.button > a').length>0){for(var i=0;i<$('#hotelsList > div.hotel-item > div.hotel-content').length;i++){var hotel_link=$('#hotelsList > div.hotel-item > div.hotel-content > div.button > a')[i];var hotel_name=$('#hotelsList > div.hotel-item > div.hotel-content > div.hotel-name-container > h3.hotel-name')[i].textContent.replace(/[^a-zA-Z0-9]/g,'_');var manual_cm_sp=cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-HOTEL-"+hotel_name;console.log(i+'/'+$('#hotelsList > div.hotel-item > div.hotel-content').length+'='+manual_cm_sp);hotel_link.setAttribute('manual_cm_sp',manual_cm_sp);cmCreateManualImpressionTag(manual_cm_sp);}}}catch(e){console(e.msg)};try{if($('#carsList > div.car-item > div.car-content > div.button > a').length>0){for(var i=0;i<$('#carsList > div.car-item > div.car-content').length;i++){var car_link=$('#carsList > div.car-item > div.car-content > div.button > a')[i];var car_name=$('#carsList > div.car-item > div.car-content > h3.car-name')[i].textContent.replace(/[^a-zA-Z0-9]/g,'_');car_link.setAttribute("manual_cm_sp",cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-CAR-"+car_name);cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-"+cxDataLayer.itinerary.destination_city+"-CAR-"+car_name);}}}catch(e){console(e.msg)};try{if($('#carListContainer > div.more-hotels > div > a').length>0){var see_more_btn=$('div.more-hotels > div > a')[0];see_more_btn.setAttribute('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-HOTEL-SEE_MORE_BTN");cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-HOTEL-SEE_MORE_BTN");see_more_btn=$('div.more-hotels > div > a')[1];see_more_btn.setAttribute('manual_cm_sp',cxDataLayer.page.country+"-_-AML-_-XSELL-CAR-SEE_MORE_BTN");cmCreateManualImpressionTag(cxDataLayer.page.page_id,cxDataLayer.page.country+"-_-AML-_-XSELL-CAR-SEE_MORE_BTN");}}catch(e){console(e.msg)};}catch(e){utag.DB(e)};try{if(document.URL.indexOf("/cx/en_US.html")!=-1||document.URL.indexOf("/cx/en_CA.html")!=-1||document.URL.indexOf("/cx/en_GB.html")!=-1){window.jQuery(document).ajaxComplete(function(event,xhr,settings){if(xhr.responseText.indexOf('primaryPromotions')!=-1){cxOptimizely.activate(3251090104)}});}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};if(typeof utag.runonce[190]=='undefined'){if(cxDataLayer.page.page_code=="ALPI"){(function($){$("input[name='Submit'][type='button']").mousedown(function(){email=$("input[name='CONTACT_POINT_EMAIL_1'").val();last_name=$("input[name='LAST_NAME_1'").val();title=$("select#SELECT_TITLE_1").next().find("span.selectBox-label").text().toUpperCase();if(/\S+@\S+\.\S+/.test(email)&&last_name!=""&&title!="-"){cxTealium.utag.link({registration:{email:email,last_name:last_name,title:title}});}});})(jQuery)};};}catch(e){utag.DB(e)};try{if(((cxDataLayer.page.page_code=="FFPR"||cxDataLayer.page.page_code=="FFCO")&&cxDataLayer.page.language!="en")){$('span.lastSeat.Version-A-_-LSA-ON-_-w\\/seat-no').show()
$('span.lastSeat.Version-B-_-LSA-ON-_-wo\\/seat-no').hide()};}catch(e){utag.DB(e)};try{if(document.domain=="book.cathaypacific.com"||document.domain=="book.dragonair.com"){if(cxDataLayer.page.error_code){cxDataLayer.errors=cxDataLayer.page.error_code.split("|").map(function(e){description=$("input[name=ERROR_MSG_"+e.split("::")[2].replace("E","")+"]").val();return{error_code:e.replace("IBE::ERROR","ERROR::IBE"),error_category:"ERROR::IBE",error_description:description};})
cxTealium.track.errors();};};}catch(e){utag.DB(e)};try{url=document.URL;if(url.indexOf(".ete.")==-1){if(url.indexOf("/en_HK.html")!=-1||url.indexOf("/zh_HK.html")!=-1){$(".secondarypar").remove();};};}catch(e){utag.DB(e)};try{if(document.domain.indexOf(".ete.")==-1&&!cxDataLayer.member.member_id&&cxDataLayer.application.name=="IBE"){if(cxDataLayer.page.page_code=="CONF"&&cxDataLayer.indicator.ru.indexOf("RU")==-1){if(cxDataLayer.page.brand=="CX"){html='<div style="width:190px;float:left;margin:5px"><a class="right-arrow-icon" style="color:#0f7e92;line-height:23px;text-decoration:none;" target="_blank" href="//www.cathaypacific.com/cx/'+cxDataLayer.page.language+'_'+cxDataLayer.page.country+'/account-registration.html">Subscribe to Latest Offers</a></div>'
jQuery("div#Dyc_CONF_body_1 > div.dync_content > h2").after(html)}else if(cxDataLayer.page.brand=="KA"){html='<div style="width:190px;float:left;margin:5px"><a class="right-arrow-icon" style="color:#0f7e92;line-height:23px;text-decoration:none;" target="_blank" href="//www.dragonair.com/ka/'+cxDataLayer.page.language+'_'+cxDataLayer.page.country+'/account-registration.html">Subscribe to Latest Offers</a></div>'
jQuery("div#Dyc_CONF_body_1 > div.dync_content > h2").after(html)}else{}};};}catch(e){utag.DB(e)};try{if(document.URL.indexOf("/icheckin2/")!=-1){cxTealium.track.errors();};}catch(e){utag.DB(e)};try{if(cxDataLayer.page.page_type=="fanfares"){$("#cxholidays").remove();};}catch(e){utag.DB(e)};try{if(d.page.brand=='CX'){if(d.itinerary.cabin=='Y'&&d.page.page_code=='PURC'&&d.page.system.params.stream=='Revenue'){if(d.page.country=='HK'||d.page.country=='PH'||d.page.country=='PH'||d.page.country=='US'||d.page.country=='VN'){if(d.page.currency=='HKD'){if(utag_data['page.language']=='zh'){$("<img src='//assets.cathaypacific.com/temp/PURC_EXL_HKD_ZH.jpg' width='896px'></img>").insertBefore("h2#pax4-title2");}else if(utag_data['page.language']=='en'){$("<img src='//assets.cathaypacific.com/temp/PURC_EXL_HKD_EN.jpg' width='896px'></img>").insertBefore("h2#pax4-title2");}}else if(d.page.currency=='USD'){if(utag_data['page.language']=='vi'){$("<img src='//assets.cathaypacific.com/temp/PURC_EXL_USD_VN.jpg' width='896px'></img>").insertBefore("h2#pax4-title2");}else if(utag_data['page.language']=='en'){$("<img src='//assets.cathaypacific.com/temp/PURC_EXL_USD_EN.jpg' width='896px'></img>").insertBefore("h2#pax4-title2");}}}}}}catch(e){utag.DB(e)};try{setTimeout(function(){u=document.URL;if(u.indexOf("/fanfares/")!=-1&&u.indexOf("#hero")!=-1){$("#heroBookNow").click()}},1000);}catch(e){utag.DB(e)};try{if(cxDataLayer.page.page_id=='OLCI::Confirmation'){function tealium_olci_method(m){if(m=="PRINT"){return{event_id:"OLCI::GET_BOARDING_PASS::PRINT",event_category:"OLCI",event_action:"OLCI::GET_BOARDING_PASS",event_label:"OLCI::GET_BOARDING_PASS::PRINT",event_value:"0"}}else if(m=="MBP"){return{event_id:"OLCI::GET_BOARDING_PASS::MBP",event_category:"OLCI",event_action:"OLCI::GET_BOARDING_PASS",event_label:"OLCI::GET_BOARDING_PASS::MBP",event_value:"0"}}else{}}
$('#sendBP').click(function(){var tealium_event_data=tealium_olci_method("MBP");cxTealium.track.event(tealium_event_data);});$('#sendBPContinue').click(function(){var tealium_event_data=tealium_olci_method("MBP");cxTealium.track.event(tealium_event_data);});$('#printBoardingPass').click(function(){var tealium_event_data=tealium_olci_method("PRINT");cxTealium.track.event(tealium_event_data);});}}catch(e){utag.DB(e)};try{if(document.domain.indexOf(".ete.")>0||document.domain.indexOf("www-dev")>0||document.cookie.indexOf('cxRs')>0){if(!sessionStorage.getItem('country')){sessionStorage.setItem('country',cxDataLayer.page.country);}
window.clearRsCookie=(function(b){if(b=='cx'){Cookies.set('cxRs','domain=cathaypacific.com',{path:'/',domain:'cathaypacific.com',expires:'Thu, 01 Jan 1970 00:00:01 GMT'});}else{Cookies.set('cxRs','domain=dragonair.com',{path:'/',domain:'dragonair.com',expires:'Thu, 01 Jan 1970 00:00:01 GMT'});}})
if(sessionStorage.getItem('country')&&cxDataLayer.page.country!=sessionStorage.getItem('country')){clearRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka');}
function setRsCookie(b,exdays){function fillRsValues(){rsTempValue='{';rsTempValue+='"c"'+':"'+cxDataLayer.itinerary.cabin+'",';rsTempValue+='"t"'+':"'+cxDataLayer.itinerary.trip_type+'",';rsTempValue+='"o_d"'+':"'+cxDataLayer.itinerary.outbound.date+'",';rsTempValue+='"o_apt"'+':"'+cxDataLayer.itinerary.origin.airport+'",';rsTempValue+='"i_d"'+':"'+cxDataLayer.itinerary.inbound.date+'",';rsTempValue+='"d_apt"'+':"'+cxDataLayer.itinerary.destination.airport+'",';rsTempValue+='"pa"'+':"'+cxDataLayer.itinerary.pax.adult+'",';rsTempValue+='"py"'+':"0",';rsTempValue+='"pc"'+':"'+cxDataLayer.itinerary.pax.child+'",';rsTempValue+='"pi"'+':"'+cxDataLayer.itinerary.pax.infant+'"';rsTempValue+='}';return rsTempValue;}
var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();if(b=='cx'){document.cookie="cxRs="+fillRsValues()+"; "+expires+";domain=cathaypacific.com; path=/";}else{document.cookie="kaRs="+fillRsValues()+"; "+expires+";domain=dragonair.com; path=/";}
}
if(cxDataLayer.itinerary&&cxDataLayer.itinerary.trip_type!='M'&&cxDataLayer.page.stream=="REV"&&cxDataLayer.page.page_id.match(/^IBE::Revenue/)){setRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka',30);}
if(cxDataLayer.itinerary&&cxDataLayer.itinerary.trip_type=='M'&&cxDataLayer.page.stream=="REV"){clearRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka');}
if((cxDataLayer.page.stream=="REV"||cxDataLayer.page.stream=="BOH")&&cxDataLayer.page.page_id.match(/^IBE::Revenue.*::Confirmation.*$/)){clearRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka');}
if(cxDataLayer.itinerary&&cxDataLayer.page.country!=cxDataLayer.itinerary.origin.country){clearRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka');}
$(document).ready(function(){$('body > header > div.header-items > div > div > div.regions-wrapper > ul > li').click(function(){if(cxDataLayer.page.country!=$(this).data('region')){clearRsCookie(cxDataLayer.page.brand=='CX'?'cx':'ka');}})})}}catch(e){utag.DB(e)};try{var p=cxDataLayer.page;if(p.country=='KR'&&p.brand=='CX'&&p.page_code=='ALPI'&&p.language=='en'){$('#registerCX > div:nth-child(8) > p').html('<strong>Latest news and offers</strong> Agree to receive travel and loyalty programme-related offers, promotions and news from Cathay Pacific. I understand and agree with the <u><a href="http://www.cathaypacific.com/cx/en_KR/hidden-pages/cx-newsletter-consent-form.html" target="_blank">conditions</a></u> on collection and use of personal information (agreement is required to receive offers).')}}catch(e){utag.DB(e)};try{if(document.URL.indexOf('/offers/flight/disneyland-happy-family-package')>=0||document.URL.indexOf('/offers/flight/hong-kong-disneyland-happy-family-package')>=0){var set_pax_comb=setInterval(function(){cxTealium.log('running');if($("[id^='passenger-adults'] > [value='2']").length>0){$("[id^='passenger-adults'] > [value='2']").attr("selected","true");$("[id^='passenger-children'] > [value='1']").attr("selected","true");$('[id^="passenger-adults"]').click();$('[id^="passenger-adults"]').val("2").change();$('[id^="passenger-children"]').click();$('[id^="passenger-children"]').val("1").change();$("[id^='passenger-adults'] > [value='1']").remove();$("[id^='passenger-adults'] > [value='3']").remove();$("[id^='passenger-adults'] > [value='4']").remove();$("[id^='passenger-adults'] > [value='5']").remove();$("[id^='passenger-adults'] > [value='6']").remove();$("[id^='passenger-children'] > [value='0']").remove();$("[id^='passenger-children'] > [value='2']").remove();$("[id^='passenger-children'] > [value='3']").remove();$("[id^='passenger-children'] > [value='4']").remove();$("[id^='passenger-children'] > [value='5']").remove();cxTealium.log('set');}
if($('.table-list-detail').length>1){clearInterval(set_pax_comb);cxTealium.log('clear');}},500);}
if(document.URL.indexOf('/hidden-pages/promotional-offers/single-fare-standard-offers')>=0&&(document.URL.indexOf('GV3PHHKG')>=0||document.URL.indexOf('GV3KAPHHKG')>=0||document.URL.indexOf('GV3SINHKGFAM')>=0)){var set_pax_comb=setInterval(function(){cxTealium.log('running');if($("#ADULT option").length>0){$('#ADULT').val("2").change();$('#CHILD').val("1").change();$("#ADULT  > [value='1'] ").remove();$("#ADULT  > [value='3'] ").remove();$("#ADULT  > [value='4'] ").remove();$("#ADULT  > [value='5'] ").remove();$("#ADULT  > [value='6'] ").remove();$("#CHILD  > [value='0'] ").remove();$("#CHILD  > [value='2'] ").remove();$("#CHILD  > [value='3'] ").remove();$("#CHILD  > [value='4'] ").remove();$("#CHILD  > [value='5'] ").remove();$('#ADULT').attr('style','color:#C6C2C1');$('#CHILD').attr('style','color:#C6C2C1');cxTealium.log('set');}
if($("#ADULT option").length>0){clearInterval(set_pax_comb);cxTealium.log('clear');}},500);}}catch(e){utag.DB(e)};try{if(cxDataLayer.page.page_id.indexOf('IBE::')>=0&&cxDataLayer.page.page_id.indexOf('::Payment')>=0&&cxDataLayer.page.stream=='REV'){$('#purchaseButton').click(function(){if($('#WDSErrorContainer > ul > li').length==0&&$('#payNowRadio').attr('checked')=='checked'){var card_type=$('input[name=CC_TYPE]:checked','#PURC_FORM').val();if(card_type=='CA'){card_type='MC'};var tealium_event_data={event_id:'IBE::PAYMENT::'+card_type,event_category:'IBE',event_action:'IBE::PAYMENT',event_label:'IBE::PAYMENT::'+card_type,event_value:0};cxTealium.track.event(tealium_event_data);}})}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.76 ut4.0.201604220435, Copyright 2016 Tealium.com Inc. All Rights Reserved.
window.GoogleAnalyticsObject=""||"ga";window[window.GoogleAnalyticsObject]=window[window.GoogleAnalyticsObject]||function(){(window[window.GoogleAnalyticsObject].q=window[window.GoogleAnalyticsObject].q||[]).push(arguments);};try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState==='complete'||this.readyState==='loaded')&&!b.hFlag){b.hFlag=1;o.cb();}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb();}};}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={'view':1,'link':1};u.o=window[window.GoogleAnalyticsObject];u.require_eh=false;u.created=false;u.all=function(e,o,v,a,b){for(var i=0;i<u.data.account.length;i++){var t=(u.data.name[i]?u.data.name[i]+".":"");if(o==="event"){u.o(t+e,o,v,a,b)}else if(v){u.o(t+e,o,v)}else{u.o(t+e,o);}}};u.setHitData=function(g,a,b,f){for(var d in utag.loader.GV(u.data[a])){if(b&&d.indexOf("enh_"+b+"-")!==0){continue;}
var idx=d.split("-")[1],val=u.data[a][d];if(u.typeOf(val)!=="array"){g[idx]=val;}else{g[idx]=val[f];}}};u.addEvent=function(v){if(typeof v.eventCategory=="undefined"||typeof v.eventAction=="undefined"){utag.DB("GA event Category or Action is not set");return;}
if(isNaN(parseInt(v.eventValue))){utag.DB("GA event Value is not a number");v.eventValue=null;}else{v.eventValue=parseInt(v.eventValue)||null;}
u.data.ga_events.push(v);};u.addproduct=function(event_type,len,imp){var g={},i,j;if(imp===true){for(i=0;i<u.data.enh_impression_id.length;i++){g={};g.id=u.data.enh_impression_id[i];g.name=(u.data.enh_impression_name[i]?u.data.enh_impression_name[i]:u.data.enh_impression_id[i]);g.brand=(u.data.enh_impression_brand[i]?u.data.enh_impression_brand[i]:"");g.variant=(u.data.enh_impression_variant[i]?u.data.enh_impression_variant[i]:"");g.category=(u.data.enh_impression_category[i]?u.data.enh_impression_category[i]:"");g.list=(u.data.enh_impression_list[i]?u.data.enh_impression_list[i]:"");g.price=(u.data.enh_impression_price[i]?u.data.enh_impression_price[i]:"");g.position=(u.data.enh_impression_position[i]?u.data.enh_impression_position[i]:"");u.setHitData(g,"enhecom_events",event_type,i);u.all('ec:addImpression',g);}}else{for(i=0;i<len;i++){g={};if(u.data.autofill_params==="true"){for(j=0;j<u.data.product_id.length;j++){u.data.product_name[j]=u.data.product_name[j]||u.data.product_id[j];u.data.product_unit_price[j]=u.data.product_unit_price[j]||"1.00";u.data.product_quantity[j]=u.data.product_quantity[j]||"1";}}
g.id=u.data.product_id[i];g.name=(u.data.product_name[i]?u.data.product_name[i]:"");g.brand=(u.data.product_brand[i]?u.data.product_brand[i]:"");g.variant=(u.data.product_variant[i]?u.data.product_variant[i]:"");g.category=(u.data.product_category[i]?u.data.product_category[i]:"");g.price=(u.data.product_unit_price[i]?u.data.product_unit_price[i]:"");g.quantity=(u.data.product_quantity[i]?u.data.product_quantity[i]:"");g.coupon=(u.data.product_discount[i]?u.data.product_discount[i]:"");g.position=(u.data.product_position[i]?u.data.product_position[i]:"");u.setHitData(g,"enhecom_events",event_type,i);u.all('ec:addProduct',g);}}};u.addpromo=function(action,event){var f,g;for(f=0;f<u.data.enh_promo_id.length;f++){g={};g.id=u.data.enh_promo_id[f];g.name=(u.data.enh_promo_name[f]?u.data.enh_promo_name[f]:u.data.enh_promo_id[f]);g.creative=(u.data.enh_promo_creative[f]?u.data.enh_promo_creative[f]:"");g.position=(u.data.enh_promo_position[f]?u.data.enh_promo_position[f]:"");u.all('ec:addPromo',g);}
if(action==="promo_click"&&event==="link"){u.all('ec:setAction',u.data.enh_action);u.all('send','event','Internal Promotions','click',(g.name?g.name:g.id));}};u.initTracker=function(){var c;if(!u.created){u.created=true;for(f=0;f<u.data.account.length;f++){c={};if(u.data.siteSpeedSampleRate){c.siteSpeedSampleRate=parseInt(u.data.siteSpeedSampleRate);}
if(u.data.sampleRate){c.sampleRate=parseInt(u.data.sampleRate);}
c.cookieDomain=u.data.cookieDomain;if(u.data.cookieExpires||u.data.cookieExpires==="0"){c.cookieExpires=parseInt(u.data.cookieExpires);}
if(u.data.legacyCookieDomain){c.legacyCookieDomain=u.data.legacyCookieDomain;}
c.allowLinker=u.data.allowLinker;if(typeof u.data.name[f]!=="undefined"&&u.data.name[f]!==""){c.name=u.data.name[f];}
u.o("create",u.data.account[f],c);}
if(u.data.optimizely==="true"){window.optimizely=window.optimizely||[];window.optimizely.push(['activateUniversalAnalytics']);}}};window.utag.tagsettings=window.utag.tagsettings||{};window.utag.tagsettings.gua=window.utag.tagsettings.gua||{};window.utag.tagsettings.gua.trackernames=window.utag.tagsettings.gua.trackernames||0;u.map={"config.ga.tracker_id":"account","page.page_id_slashified":"page","dom.url":"location","dom.title":"title","page.country":"pageview-dimension1","page.language":"pageview-dimension2","page.locale":"pageview-dimension3","indicator.pax_indicator":"dimension15","utm.medium":"campaignMedium","utm.content":"campaignContent","utm.source":"campaignSource","utm.campaign":"campaignName","utm.term":"campaignKeyword","event.event_action":"eventAction","event.event_category":"eventCategory","event.event_label":"eventLabel","event.event_value":"eventValue","error.error_code":"eventAction","error.error_category":"eventCategory","error.error_description":"eventLabel","exception.exp_description":"exception_reason","application.env":"dimension9"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){u.o=window[window.GoogleAnalyticsObject];b.ga_events=b.ga_events||[];var c,d,e,f,g,tn;if(u.data&&u.data.name){tn=u.data.name;}
u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"","a":a,"cookieDomain":""||utag.loader.lh(),"name":tn||"","account":"","anonymizeIp":("false"==="true"),"allowLinker":("false"==="true"),"crossDomainTrack":"","enhancedLinkAttribution":"true","enhancedecommerce":"false","displayfeatures":"true","screenView":"false","enh_action":"","enh_event_cb":"","enh_checkout_step":"","enh_checkout_option":"","product_action_list":"","product_variant":[],"enh_impression_id":[],"enh_impression_name":[],"enh_impression_price":[],"enh_impression_category":[],"enh_impression_brand":[],"enh_impression_variant":[],"enh_impression_list":[],"enh_impression_position":[],"enh_promo_id":[],"enh_promo_name":[],"enh_promo_creative":[],"enh_promo_position":[],"id":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_position":[],"optimizely":"false","init_before_extensions":"false","ga_events":[],"sessionControl":""};if(u.data.init_before_extensions==="true"){u.initTracker();}
c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("a.")===0){u.data["a"][e[f].substring(2)]=b[d];}else{u.data[e[f]]=b[d];}}}}
if(u.typeOf(u.data.ga_events)==="array"&&u.typeOf(b.ga_events)==="array"){if(u.data.ga_events.length===0&&b.ga_events.length>0){u.data.ga_events=b.ga_events;}else if(u.data.ga_events.length>0&&b.ga_events.length>0){u.data.ga_events=u.data.ga_events.concat(b.ga_events);}}
u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";u.data.order_store=u.data.order_store||b._cstore||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||b._cpromo||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_brand.length===0&&b._cbrand!==undefined){u.data.product_brand=b._cbrand.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(u.data.product_discount.length===0&&b._cpdisc!==undefined){u.data.product_discount=b._cpdisc.slice(0);}
if(typeof u.data.account==="string"){u.data.account=u.data.account.replace(/\s/g,"").split(",");}
if(typeof u.data.name==="string"&&u.data.name!==""){u.data.name=u.data.name.replace(/\s/g,"").split(",");}
if(!u.data.name||u.data.name.length!==u.data.account.length){var start=u.data.name.length!==u.data.account.length?u.data.name.length:0;tn=utag.tagsettings.gua.trackernames;u.data.name=u.data.name||[];for(i=start;i<u.data.account.length;i++){u.data.name.push("tealium_"+(i+tn));}
utag.tagsettings.gua.trackernames=tn+i;}
if(u.data.init_before_extensions!=="true"){u.initTracker();}
if(u.data.enhancedecommerce==="true"&&!u.require_eh){u.require_eh=true;u.all("require","ec");}
u.data.app_id=u.data.app_id||u.data.appId||b.app_id;u.data.app_name=u.data.app_name||u.data.appName||b.app_name;u.data.app_version=u.data.app_version||u.data.appVersion||b.app_version;u.data.app_rdns=u.data.app_rdns||u.data.appInstallerId||b.app_rdns;u.data.screen_title=u.data.screen_title||u.data.screenName||b.screen_title;if(u.data.app_id||u.data.app_name){g={};g.appName=u.data.app_name;g.appId=u.data.app_id||"";g.appVersion=u.data.app_version;g.appInstallerId=u.data.app_rdns;u.all("set",g);}
u.data.exception_reason=u.data.exception_reason||b.exception_reason;if(u.data.exception_reason){g={};g.exDescription=u.data.exception_reason;g.exFatal=true;u.all("send","exception",g);}
if(u.data.allowLinker===true&&u.data.crossDomainTrack!==undefined&&typeof u.data.crossDomainTrack==="string"){u.all("require","linker");u.data.crossDomainTrack=u.data.crossDomainTrack.split(",");u.all("linker:autoLink",u.data.crossDomainTrack);}
if(u.data.anonymizeIp){u.all("set",'anonymizeIp',true);}
if(u.data.uid){u.all("set","&uid",u.data.uid);}
if(u.data.page){u.all("set","page",u.data.page);}
if(u.data.title){u.all("set","title",u.data.title);}
if(u.data.location){u.all("set","location",u.data.location);}
if(u.data.campaignName){u.all("set","campaignName",u.data.campaignName);}
if(u.data.campaignSource){u.all("set","campaignSource",u.data.campaignSource);}
if(u.data.campaignMedium){u.all("set","campaignMedium",u.data.campaignMedium);}
if(u.data.campaignContent){u.all("set","campaignContent",u.data.campaignContent);}
if(u.data.campaignKeyword){u.all("set","campaignKeyword",u.data.campaignKeyword);}
if(u.data.displayfeatures==="true"||u.data.displayfeatures===true){u.all("require","displayfeatures");}
u.data.transaction_events={};u.data.pageview_events={};u.data.link_events={};u.data.enhecom_events={};for(d in utag.loader.GV(u.data)){if(d.indexOf("-")>-1&&(d.indexOf("metric")>-1||d.indexOf("dimension")>-1||d.indexOf("contentGroup")>-1)){if(d.indexOf("transaction-")===0){u.data.transaction_events[d]=u.data[d];}else if(d.indexOf("pageview-")===0){u.data.pageview_events[d]=u.data[d];}else if(d.indexOf("link-")===0){u.data.link_events[d]=u.data[d];}else if(u.data.enhancedecommerce==="true"&&d.indexOf("enh_")===0){u.data.enhecom_events[d]=u.data[d];}}else if(d.indexOf("metric")===0||d.indexOf("dimension")===0||d.indexOf("contentGroup")===0){u.all("set",d,u.data[d]);}}
if(u.data.enhancedLinkAttribution==="true"){u.all("require","linkid","linkid.js");}
u.data.order_id=(u.data.order_id?u.data.order_id:u.data.id);if(u.data.enhancedecommerce==="true"){u.all("set",'&cu',(u.data.currency?u.data.currency:u.data.order_currency));if(u.data.order_id&&u.data.enh_action==="refund"){if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.data.order_id=u.data.order_id[0];}
for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.product_id[f];g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.setHitData(g,"enhecom_events","product_refund",f);u.all('ec:addProduct',g);}
g={};g.id=u.data.order_id;u.setHitData(g,"enhecom_events","refund");u.all('ec:setAction','refund',g);}
else if(u.data.order_id){if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.data.order_id=u.data.order_id[0];}
u.addproduct("product_purchase",u.data.product_id.length,false);g={};g.id=u.data.order_id;g.affiliation=(u.data.affiliation?u.data.affiliation:u.data.order_store);g.revenue=(u.data.revenue?u.data.revenue:u.data.order_total);g.shipping=(u.data.shipping?u.data.shipping:u.data.order_shipping);g.tax=(u.data.tax?u.data.tax:u.data.order_tax);g.coupon=(u.data.coupon?u.data.coupon:u.data.order_coupon_code);u.setHitData(g,"enhecom_events","purchase");u.all('ec:setAction','purchase',g);}
else if(u.data.enh_action==="product_click"&&u.data.a==="link"){u.addproduct("product_click",1,false);u.all('ec:setAction','click',{list:u.data.product_action_list});u.all('send','event','UX','click','Results',{'hitCallback':window[u.data.enh_event_cb]});}
else if(u.data.enh_action==="detail"){u.addproduct("detail",1,false);u.all("ec:setAction","detail");}
else if(u.data.enh_action==="add"){u.addproduct("product_add",u.data.product_id.length,false);u.all('ec:setAction','add');if(u.data.a==="link"){u.all('send','event','UX','click','add to cart');}
}
else if(u.data.enh_action==="remove"){u.addproduct("product_remove",u.data.product_id.length,false);u.all('ec:setAction','remove');if(u.data.a==="link"){u.all('send','event','UX','click','remove from cart');}
}
else if(u.data.enh_action==="checkout"){u.addproduct("product_checkout",u.data.product_id.length,false);g={};g.step=u.data.enh_checkout_step||"1";g.option=u.data.enh_checkout_option;u.all('ec:setAction',u.data.enh_action,g);}
if(u.data.enh_action==="checkout_option"&&u.data.a==="link"){g={};g.step=u.data.enh_checkout_step||"1";g.option=u.data.enh_checkout_option;u.all('ec:setAction',u.data.enh_action,g);u.all('send','event','Checkout','Option',{'hitCallback':window[u.data.enh_event_cb]});}
if(u.data.enh_impression_id){u.addproduct("product_impression",u.data.enh_impression_id.length,true);}
if(u.data.enh_promo_id){u.addpromo(u.data.enh_action,u.data.a);}
g={};if(u.data.order_id){u.setHitData(g,"transaction_events");}
u.setHitData(g,"pageview_events");if(u.data.sessionControl==="start"||u.data.sessionControl==="end"){g.sessionControl=u.data.sessionControl;}
if(u.data.screenView==="true"||u.data.screenView===true){g.screenName=u.data.screen_title||"";u.all("send","screenview",g);}else if(u.data.a==="view"){g.hitType="pageview";u.all("send",g);}
}else if(u.data.a==="view"){g={};u.setHitData(g,"pageview_events");if(u.data.sessionControl==="start"||u.data.sessionControl==="end"){g.sessionControl=u.data.sessionControl;}
if(u.data.screenView==="true"||u.data.screenView===true){g.screenName=u.data.screen_title||"";u.all("send","screenview",g);}else{g.hitType="pageview";u.all("send",g);}
if(u.data.order_id&&!(u.data.order_id instanceof Array)){u.all("require","ecommerce","ecommerce.js");g={};u.setHitData(g,"transaction_events");g.id=u.data.order_id;g.affiliation=(u.data.affiliation?u.data.affiliation:u.data.order_store);g.revenue=(u.data.revenue?u.data.revenue:u.data.order_total);g.shipping=(u.data.shipping?u.data.shipping:u.data.order_shipping);g.tax=(u.data.tax?u.data.tax:u.data.order_tax);g.currency=(u.data.currency?u.data.currency:u.data.order_currency);u.all('ecommerce:addTransaction',g);for(f=0;f<u.data.product_id.length;f++){g={};g.id=u.data.order_id;g.sku=u.data.product_id[f];g.name=(u.data.product_name[f]?u.data.product_name[f]:u.data.product_id[f]);g.category=(u.data.product_category[f]?u.data.product_category[f]:"");g.price=(u.data.product_unit_price[f]?u.data.product_unit_price[f]:"1.00");g.quantity=(u.data.product_quantity[f]?u.data.product_quantity[f]:"1");u.setHitData(g,"transaction_events");u.all('ecommerce:addItem',g);}
u.all('ecommerce:send');}else if(u.data.order_id instanceof Array&&u.data.order_id.length>0){u.all("require","ecommerce","ecommerce.js");var lastindex=0;for(f=0;f<u.data.order_id.length;f++){if(f===u.data.order_id.length-1||(u.data.order_id[f]!==u.data.order_id[f+1])){g={};u.setHitData(g,"transaction_events");g.id=u.data.order_id[f];g.affiliation=(u.data.affiliation&&typeof u.data.affiliation[f]!=="undefined"?u.data.affiliation[f]:u.data.order_store);g.revenue=(u.data.revenue&&typeof u.data.revenue[f]!=="undefined"?u.data.revenue[f]:u.data.order_total);g.shipping=(u.data.shipping&&typeof u.data.shipping[f]!=="undefined"?u.data.shipping[f]:u.data.order_shipping);g.tax=(u.data.tax&&typeof u.data.tax[f]!=="undefined"?u.data.tax[f]:u.data.order_tax);g.currency=(u.data.currency?u.data.currency:u.data.order_currency);u.all('ecommerce:addTransaction',g);for(e=lastindex;e<f+1;e++){g={};g.id=u.data.order_id[f];g.sku=u.data.product_id[e];g.name=(u.data.product_name[e]?u.data.product_name[e]:u.data.product_id[e]);g.category=(u.data.product_category[e]?u.data.product_category[e]:"");g.price=(u.data.product_unit_price[e]?u.data.product_unit_price[e]:"1.00");g.quantity=(u.data.product_quantity[e]?u.data.product_quantity[e]:"1");u.setHitData(g,"transaction_events");u.all('ecommerce:addItem',g);}
lastindex=f+1;}}
u.all('ecommerce:send');}
}else if(u.data.screenView==="true"||u.data.screenView===true){g={};g.screenName=u.data.screen_title||"";u.all("send","screenview",g);}
if(u.data.eventCategory&&u.data.eventAction){g={};u.setHitData(g,"link_events");g.hitType="event";g.eventCategory=u.data.eventCategory;if(u.data.nonInteraction){g.nonInteraction=1;}
g.eventAction=u.data.eventAction;if(u.data.eventLabel){g.eventLabel=u.data.eventLabel;}
if(typeof u.data.eventValue!=="undefined"&&u.data.eventValue!==""){g.eventValue=u.data.eventValue;}
if(u.data.screenView==="true"||u.data.screenView===true){g.screenName=u.data.screen_title||"";}
if(u.data.sessionControl==="start"||u.data.sessionControl==="end"){g.sessionControl=u.data.sessionControl;}
u.all("send",g);u.data.eventCategory=u.data.eventAction=u.data.eventLabel=u.data.eventValue="";}
for(e=0;e<u.data.ga_events.length;e++){g={};u.setHitData(g,"link_events");g.hitType="event";g.eventCategory=u.data.ga_events[e].eventCategory;g.eventAction=u.data.ga_events[e].eventAction;g.eventLabel=u.data.ga_events[e].eventLabel;g.eventValue=u.data.ga_events[e].eventValue;if(u.data.ga_events[e].nonInteraction){g.nonInteraction=1;}
if(u.data.sessionControl==="start"||u.data.sessionControl==="end"){g.sessionControl=u.data.sessionControl;}
u.all("send",g);}
if(u.data.socialNetwork&&u.data.socialAction&&u.data.socialTarget){g={};g.hitType="social";g.socialNetwork=u.data.socialNetwork;g.socialAction=u.data.socialAction;g.socialTarget=u.data.socialTarget;u.all("send",g);u.data.socialNetwork=u.data.socialAction=u.data.socialTarget="";}
if(u.data.timingCategory&&u.data.timingVar&&u.data.timingValue){g={};g.hitType="timing";g.timingCategory=u.data.timingCategory;g.timingVar=u.data.timingVar;g.timingValue=u.data.timingValue;g.timingLabel=u.data.timingLabel||"";u.all("send",g);}
if(u.data["ga-disable"]){window["ga-disable-"+u.data["ga-disable"]]=true;}
(function(){var id='tealium-tag-7110';if(document.getElementById(id)){return;}
u.loader({"type":"script","src":'//www.google-analytics.com/analytics.js',"loc":"script","id":id});u.o.l=1*new Date();})();}};utag.o[loader].loader.LOAD(id);}('76','cathaypacific.main'));}catch(error){utag.DB(error);}

//tealium universal tag - utag.84 ut4.0.201604220435, Copyright 2016 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState==='complete'||this.readyState==='loaded')&&!b.hFlag){b.hFlag=1;o.cb();}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb();}};}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.event_lookup={"pageview":"1","registration":"2","order":"3","purchase":"3","shopaction9":"3","cart":"4","shopaction5":"4","productview":"5","prodview":"5","conversionevent":"14","conversion":"14","element":"15"};u.concat_attr=function(a,e,c,d,f,g){g="";for(f=1;f<=c;f++){if(typeof d!="undefined"&&u.data[e+a+f+""]instanceof Array){g+=((typeof u.data[e+a+f+""][d]!="undefined")?u.data[e+a+f+""][d]:"")+"-_-"}else{g+=((typeof u.data[e+a+f+""]!="undefined")?u.data[e+a+f+""]:"")+"-_-"}}
return g};u.map={"config.coremetrics.client_id":"ClientID","config.coremetrics.cookie_domain":"CookieDomain","config.coremetrics.datacollection_domain":"DataCollectionDomain","page.page_id":"PageviewTag_pi,ElementTag_e_a5,RegistrationTag_rg5","page.page_category":"PageviewTag_cg","page.country":"PageviewTag_pv_a2,ProductviewTag_pr_a2,ShopAction5Tag_s_a2,ShopAction9Tag_s_a2,ElementTag_e_a1,OrderTag_o_a2","page.language":"PageviewTag_pv_a3,ShopAction5Tag_s_a33,ShopAction9Tag_s_a33,ProductviewTag_pr_a33,OrderTag_o_a33","page.error_code":"PageviewTag_pv_a6","page.sub_error_code":"PageviewTag_pv_a7","page.timestamp":"PageviewTag_pv_a8,OrderTag_o_a32,ShopAction5Tag_s_a32,ShopAction9Tag_s_a32,ConversionEventTag_c_a19","transaction.pnr":"PageviewTag_pv_a9,ConversionEventTag_c_a8","page.system.params.stream":"PageviewTag_pv_a12","itinerary.origin.airport":"PageviewTag_pv_a13,OrderTag_o_a26,ShopAction5Tag_s_a26,ShopAction9Tag_s_a26","itinerary.destination.airport":"PageviewTag_pv_a14,OrderTag_o_a27,ShopAction5Tag_s_a27,ShopAction9Tag_s_a27","itinerary.route":"ShopAction5Tag_s_a3,ShopAction9Tag_s_a3,OrderTag_o_a3,ConversionEventTag_c_a2","itinerary.segmented_flights":"PageviewTag_pv_a16,ShopAction5Tag_s_a4,ShopAction9Tag_s_a4,OrderTag_o_a4,ConversionEventTag_c_a3","itinerary.segmented_carriers":"PageviewTag_pv_a17","page.system.params.date_depart_and_date_return":"PageviewTag_pv_a18","itinerary.trip_type":"PageviewTag_pv_a19","itinerary.segmented_cabins":"PageviewTag_pv_a20,ShopAction5Tag_s_a6,ShopAction9Tag_s_a6,OrderTag_o_a6,ConversionEventTag_c_a6","itinerary.segmented_rbds":"PageviewTag_pv_a21,ShopAction5Tag_s_a7,ShopAction9Tag_s_a7,OrderTag_o_a7,ConversionEventTag_c_a7","booking.pax.total":"PageviewTag_pv_a22,ShopAction5Tag_s_a11,ShopAction9Tag_s_a11,OrderTag_o_a11","member.tier":"PageviewTag_pv_a23,,RegistrationTag_rg1,ConversionEventTag_c_a5","transaction.payment.method":"PageviewTag_pv_a24,ShopAction5Tag_s_a16,ShopAction9Tag_s_a16,OrderTag_o_a16","transaction.payment.currency":"PageviewTag_pv_a25","transaction.payment.subtotal":"PageviewTag_pv_a26,OrderTag_tr,ShopAction9Tag_tr","page.system.params.office_id":"PageviewTag_pv_a28,ShopAction5Tag_s_a8,ShopAction9Tag_s_a8,OrderTag_o_a8","page.page_code":"PageviewTag_pv_a29","page.system.params.sitecode":"ShopAction5Tag_s_a9,ShopAction9Tag_s_a9,OrderTag_o_a9","indicator.upsell_tracking":"ShopAction5Tag_s_a13,ShopAction9Tag_s_a13,OrderTag_o_a13,ConversionEventTag_c_a16","indicator.upsell_revenue":"ShopAction5Tag_s_a14,ShopAction9Tag_s_a14,OrderTag_o_a14,ConversionEventTag_c_a17","page.system.params.flow":"ShopAction5Tag_s_a18,ShopAction9Tag_s_a18,OrderTag_o_a18,ConversionEventTag_c_a13,PageviewTag_pv_a11","page.system.promotion.promo_code":"ShopAction5Tag_s_a20,ShopAction9Tag_s_a20,OrderTag_o_a20,ConversionEventTag_c_a14","transaction.payment.fxmp.total_with_currency":"ShopAction9Tag_s_a21,OrderTag_o_a21","member.title":"RegistrationTag_rg1","member.membership_no":"RegistrationTag_cd,RegistrationTag_rg2","itinerary.origin.city":"ShopAction5Tag_s_a28,ShopAction9Tag_s_a28,OrderTag_o_a28","itinerary.destination.city":"ShopAction5Tag_s_a29,ShopAction9Tag_s_a29,OrderTag_o_a29","itinerary.origin.country":"ShopAction5Tag_s_a30,ShopAction9Tag_s_a30,OrderTag_o_a30","itinerary.destination.country":"ShopAction5Tag_s_a31,ShopAction9Tag_s_a31,OrderTag_o_a31","transaction.order_id":"ShopAction5Tag_s_a49,ShopAction9Tag_s_a49,PageviewTag_pv_a31,OrderTag_on,ShopAction9Tag_on","transaction.payment.total_with_currency":"PageviewTag_pv_a30,ShopAction5Tag_s_a25,ShopAction9Tag_s_a25,OrderTag_o_a25","js_page.cxDataLayer.error":"PageviewTag_pv_a50","itinerary.outbound.month":"ShopAction5Tag_s_a34,ShopAction9Tag_s_a34,OrderTag_o_a34","itinerary.days_advance":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35,OrderTag_o_a35","transaction.ffp.points":"ShopAction5Tag_s_a12,ShopAction9Tag_s_a12,OrderTag_o_a12","page.system.promotion.fare_id":"ShopAction5Tag_s_a19,ShopAction9Tag_s_a19,OrderTag_o_a19","transaction.payment.subtotal_with_currency":"ShopAction5Tag_s_a10,ShopAction9Tag_s_a10,OrderTag_o_a10,ConversionEventTag_c_a11","itinerary.trip_duration":"ShopAction5Tag_s_a36,ShopAction9Tag_s_a36,OrderTag_o_a36","itinerary.dates_depart":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35,OrderTag_o_a5,ConversionEventTag_c_a4","indicator.atc_indicator":"OrderTag_o_a22","cp.cm_mmc":"OrderTag_o_a37","page.search_keyword":"PageviewTag_se","page.search_results":"PageviewTag_sr","page.error_page_id":"PageviewTag_pv_a5","indicator.pax_indicator":"ShopAction5Tag_s_a41,ShopAction9Tag_s_a41,OrderTag_o_a41,ProductviewTag_pr_a41,ConversionEventTag_c_a12","page.system.params.route":"PageviewTag_pv_a15","page.system.params.jsession_id":"PageviewTag_pv_a50","indicator.pnr_with_departure_date":"ShopAction9Tag_s_a42,OrderTag_o_a42","page.timestamp_local":"PageviewTag_pv_a49,OrderTag_o_a49","transaction.hold_till":"ConversionEventTag_c_a18","transaction.payment.surcharge_and_tax_with_currency":"ConversionEventTag_c_a10","page.locale":"PageviewTag_pv_a27,ShopAction5Tag_s_a43,ShopAction9Tag_s_a43,OrderTag_o_a43,ProductviewTag_pr_a43,ConversionEventTag_c_a9","indicator.lsa_indicator":"ShopAction5Tag_s_a44,ShopAction9Tag_s_a44,OrderTag_o_a44","js_page.cxDataLayer.cart.pnr":"PageviewTag_pv_a31","cp.TRACKER_CX":"PageviewTag_pv_a1,ProductviewTag_pr_a1,ShopAction5Tag_s_a1,ShopAction9Tag_s_a1,OrderTag_o_a1","cp.TRACKER_KA":"PageviewTag_pv_a1,ProductviewTag_pr_a1,ShopAction5Tag_s_a1,ShopAction9Tag_s_a1,OrderTag_o_a1","va.badges.5122":"PageviewTag_pv_a46","page.meta.city":"PageviewTag_pv_a32","collection.product.prices":"ShopAction5Tag_bp,ShopAction9Tag_bp","collection.product.product_ids":"ProductviewTag_pr,ShopAction5Tag_pr,ShopAction9Tag_pr","collection.product.product_names":"ProductviewTag_pm,ShopAction5Tag_pm,ShopAction9Tag_pm","collection.product.product_categories":"ProductviewTag_cg,ShopAction5Tag_cg,ShopAction9Tag_cg","collection.product.qtys":"ShopAction5Tag_qt,ShopAction9Tag_qt","event.event_id":"ConversionEventTag_cid","event.action_type":"ConversionEventTag_cat","event.event_category":"ConversionEventTag_ccid","event.event_points":"ConversionEventTag_cpt","element.element_category":"ElementTag_ecat","element.element_id":"ElementTag_eid","page.page_event:registration":"Registration","page.page_event:order":"Order","page.page_event:product_view":"Productview","page.page_event:cart":"ShopAction5","page.page_event:booking_on_hold":"Conversion","page.page_event:purchase":"Order","transaction.payment.surcharge_and_tax":"OrderTag_sg","member.member_id":"ShopAction9Tag_cd,OrderTag_cd,,RegistrationTag_cd","collection.product.ffcodes":"ShopAction5Tag_s_a40,ShopAction9Tag_s_a40","collection.product.price_with_currency":"ShopAction5Tag_s_a38,ShopAction9Tag_s_a38","collection.product.tax_and_surcharge_with_currency":"ShopAction5Tag_s_a35,ShopAction9Tag_s_a35","member.email":"RegistrationTag_em","va.metrics.5325":"OrderTag_o_a48","js_page.cxDataLayer.trp.tax":"PageviewTag_pv_a46","js_page.cxDataLayer.trp.subtotal":"PageviewTag_pv_a47","js_page.cxDataLayer.trp.total":"PageviewTag_pv_a48","transaction.insurance_ref":"OrderTag_o_a47"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,g;u.data={"qsp_delim":"&","kvp_delim":"=","a":a,"base_url":"//assets.cathaypacific.com/libs/analytics/coremetrics/latest/eluminate.js"||"//libs.coremetrics.com/eluminate.js","ClientID":"","TestClientID":"","DataCollectionMethod":true,"DataCollectionDomain":"","CookieDomain":"","test_domains":",,","tid":{},"test":false,"pv_a":"","pv":"","s_a":"","sx":"","o_a":"","or":"","rg":"","pr_a":"","c_a":"","cx":"","e_a":"","order_id":"","order_subtotal":"","order_shipping":"","order_currency":"","customer_id":"","customer_city":"","customer_state":"","customer_zip":"","customer_country":"","product_id":[],"product_name":[],"product_category":[],"product_quantity":[],"product_unit_price":[]};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f]==="tid"){g=u.event_lookup[(""+b[d]).toLowerCase().replace("_","")]+"";if(g!==""){u.data.tid[g]=true;}else{u.data.tid[b[d]]=true;}}else{u.data[e[f]]=b[d];}}}else{c=d.split(":");if(c.length===2&&b[c[0]]===c[1]){g=""+u.event_lookup[u.map[d].toLowerCase().replace("_","")];if(g!==""){u.data.tid[g]=true}}}}
u.data.order_id=u.data.order_id||b._corder;u.data.order_subtotal=u.data.order_subtotal||b._csubtotal;u.data.order_shipping=u.data.order_shipping||b._cship;u.data.order_currency=u.data.order_currency||b._ccurrency||datalayer.page.currency;u.data.customer_id=u.data.customer_id||b._ccustid;u.data.customer_city=u.data.customer_city||b._ccity;u.data.customer_state=u.data.customer_state||b._cstate;u.data.customer_zip=u.data.customer_zip||b._czip;u.data.customer_country=u.data.customer_country||b._ccountry;if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.loader_cb=function(){if(!u.initialized){u.initialized=true;if(u.data.test_domains.indexOf(","+location.hostname+',')>-1){u.data.test=true;}
if(u.data.test){u.data.ClientID=u.data.TestClientID;u.data.DataCollectionMethod=u.data.TestDataCollectionMethod||false;u.data.DataCollectionDomain=u.data.TestDataCollectionDomain||"testdata.coremetrics.com";}
cmSetClientID(u.data.ClientID,u.data.DataCollectionMethod,u.data.DataCollectionDomain,u.data.CookieDomain);cxTealium.log("Client ID - "+u.data.ClientID);cxTealium.log("Data Collection Domain - "+u.data.DataCollectionDomain);cxTealium.log("Cookie Domain - "+u.data.CookieDomain);}
if(u.data.a==="view"){e="PageviewTag_";u.data.pv_a=u.concat_attr("pv_a",e,50);u.data.pv=u.concat_attr("pv",e,15);if(u.data["ManualPageviewTag_ul"]){f="ManualPageviewTag_";cmCreateManualPageviewTag(u.data[e+"pi"],u.data[e+"cg"],u.data[f+"ul"],u.data[f+"rf"],u.data.pv_a,u.data[e+"se"],u.data[e+"sr"],u.data.pv);}else{cmCreatePageviewTag(u.data[e+"pi"],u.data[e+"cg"],u.data[e+"se"],u.data[e+"sr"],u.data.pv_a,u.data.pv);cxTealium.log('Pageview Tag - Page ID - '+u.data[e+"pi"]);cxTealium.log('Pageview Tag - Page Category - '+u.data[e+"cg"]);if(typeof datalayer.page.error_code!="undefined"&&datalayer.page.error_code.length!=0&&datalayer.page.error_code.indexOf('WARNING')==-1){error_codes=datalayer.page.error_code.split('|');for(i=0;i<error_codes.length;i++){error_code_split=error_codes[i].split('::');error_type=[error_code_split[0],error_code_split[1]].join('::');cmCreatePageviewTag(error_codes[i],error_type,null,null,u.pv_a,u.pv);}}}}else if(u.data.a=="link"&&u.data["ManualLinkClickTag_hr"]){e="ManualLinkClickTag_";cmCreateManualLinkClickTag(u.data[e+"hr"],u.data[e+"nm"],u.data[e+"pi"]);u.data[e+"hr"]="";return;}
if(u.data["ManualImpressionTag_pi"]&&(u.data["ManualImpressionTag_cm_sp"]||u.data["ManualImpressionTag_cm_re"])){e="ManualImpressionTag_";cmStartTagSet();if(typeof u.data[e+"cm_re"]==="string"){u.data[e+"cm_re"]=u.data[e+"cm_re"].split(',');}
if(typeof u.data[e+"cm_sp"]==="string"){u.data[e+"cm_sp"]=u.data[e+"cm_sp"].split(',');}
if(u.data[e+"cm_re"]instanceof Array&&u.data[e+"cm_re"].length>0){for(f=0;f<u.data[e+"cm_re"].length;f++){var cm=new _cm("tid","9");cm.cm_re=u.data[e+"cm_re"][f];cm.pi=u.data[e+"pi"]||c1(cm.ci);cm.st=cm_ClientTS;cm.write(1);}}
if(u.data[e+"cm_sp"]instanceof Array&&u.data[e+"cm_sp"].length>0){for(f=0;f<u.data[e+"cm_sp"].length;f++){var cm=new _cm("tid","9");cm.cm_sp=u.data[e+"cm_sp"][f];cm.pi=u.data[e+"pi"]||c1(cm.ci);cm.st=cm_ClientTS;cm.write(1);}}
cmSendTagSet();u.data[e+"pi"]="";}
if(u.data.tid["3"]||b._cevent==="purchase"){if(u.data.order_currency)cmSetupOther({"cm_currencyCode":u.data.order_currency});e="ShopAction9Tag_";u.data[e+"on"]=u.data[e+"on"]||u.data.order_id;u.data[e+"tr"]=u.data[e+"tr"]||u.data.order_subtotal;u.data[e+"cd"]=u.data[e+"cd"]||u.data.customer_id||utag.data["cp.utag_main_ses_id"];u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"qt"]=u.data[e+"qt"]||u.data.product_quantity;u.data[e+"bp"]=u.data[e+"bp"]||u.data.product_unit_price;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;for(f=0;f<u.data[e+"pr"].length;f++){u.data.s_a=u.concat_attr("s_a",e,50,f);u.data.sx=u.concat_attr("sx",e,15,f);cmCreateShopAction9Tag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"qt"][f],u.data[e+"bp"][f],u.data[e+"cd"],u.data[e+"on"],u.data[e+"tr"],u.data[e+"cg"][f],u.data.s_a,u.data.sx);cxTealium.log('Shop9 Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]+' x '+u.data[e+"qt"][f]+' @'+u.data[e+"bp"][f]);cxTealium.log('Shop9 Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTealium.log('Shop9 Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}
cmDisplayShops();}
if(u.data.tid["3"]||b._cevent==="purchase"){e="OrderTag_";u.data[e+"on"]=u.data["ShopAction9Tag_on"]||u.data[e+"on"];u.data[e+"tr"]=u.data["ShopAction9Tag_tr"]||u.data[e+"tr"];u.data[e+"cd"]=u.data["ShopAction9Tag_cd"]||u.data[e+"cd"];u.data[e+"sg"]=u.data[e+"sg"]||u.data.order_shipping;u.data[e+"ct"]=u.data[e+"ct"]||u.data.customer_city;u.data[e+"sa"]=u.data[e+"sa"]||u.data.customer_state;u.data[e+"zp"]=u.data[e+"zp"]||u.data.customer_zip;u.data.o_a=u.concat_attr("o_a",e,50);u.data.or=u.concat_attr("or",e,15);cmCreateOrderTag(u.data[e+"on"],u.data[e+"tr"],u.data[e+"sg"],u.data[e+"cd"],u.data[e+"ct"],u.data[e+"sa"],u.data[e+"zp"],u.data.o_a,u.data.or);cxTealium.log('Order Tag - Order ID - '+u.data[e+"on"]);cxTealium.log('Order Tag - Subtotal - '+u.data[e+"tr"]);cxTealium.log('Order Tag - Surcharge - '+u.data[e+"sg"]);}
if(u.data.tid["3"]||u.data.tid["2"]||b._cevent==="register"||(u.data["RegistrationTag_em"]&&b._cevent==="purchase")){e="RegistrationTag_";u.data[e+"cd"]=u.data["ShopAction9Tag_cd"]||u.data[e+"cd"]||u.data.customer_id||utag.data["cp.utag_main_ses_id"];u.data[e+"ct"]=u.data[e+"ct"]||u.data.customer_city;u.data[e+"sa"]=u.data[e+"sa"]||u.data.customer_state;u.data[e+"zp"]=u.data[e+"zp"]||u.data.customer_zip;u.data[e+"cy"]=u.data[e+"cy"]||u.data.customer_country;u.data.rg=u.concat_attr("rg",e,50);cmCreateRegistrationTag(u.data[e+"cd"],u.data[e+"em"],u.data[e+"ct"],u.data[e+"sa"],u.data[e+"zp"],u.data[e+"cy"],u.data.rg);cxTealium.log('Registration Tag - Registration ID - '+u.data[e+"cd"]);}
if((u.data.tid["4"]&&b._cevent!="purchase")||b._cevent==="cartview"){if(u.data.order_currency)cmSetupOther({"cm_currencyCode":u.data.order_currency});e="ShopAction5Tag_";u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"qt"]=u.data[e+"qt"]||u.data.product_quantity;u.data[e+"bp"]=u.data[e+"bp"]||u.data.product_unit_price;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;for(f=0;f<u.data[e+"pr"].length;f++){u.data.s_a=u.concat_attr("s_a",e,50,f);u.data.sx=u.concat_attr("sx",e,15,f);cmCreateShopAction5Tag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"qt"][f],u.data[e+"bp"][f],u.data[e+"cg"][f],u.data.s_a,u.data.sx);cxTealium.log('Shop5 Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]+' x '+u.data[e+"qt"][f]+' @'+u.data[e+"bp"][f]);cxTealium.log('Shop5 Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTealium.log('Shop5 Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}
cmDisplayShops();}
if((u.data.tid["5"]&&b._cevent!="purchase")||b._cevent==="prodview"){e="ProductviewTag_";u.data[e+"pr"]=u.data[e+"pr"]||u.data.product_id;u.data[e+"pm"]=u.data[e+"pm"]||u.data.product_name;u.data[e+"cg"]=u.data[e+"cg"]||u.data.product_category;u.data.pr_a=u.concat_attr("pr_a",e,50);if(u.data[e+"pr"]instanceof Array&&u.data[e+"pr"].length>1){for(f=0;f<u.data[e+"pr"].length;f++){u.data.pr_a=u.concat_attr("pr_a",e,50,f);cmCreateProductviewTag(u.data[e+"pr"][f],u.data[e+"pm"][f],u.data[e+"cg"][f],u.data.pr_a);cxTealium.log('ProductView Tag - ['+(f+1)+']'+'Product ID - '+u.data[e+"pr"][f]);cxTealium.log('ProductView Tag - ['+(f+1)+']'+'Product Name - '+u.data[e+"pm"][f]);cxTealium.log('ProductView Tag - ['+(f+1)+']'+'Product Category - '+u.data[e+"cg"][f]);}}else{cmCreateProductviewTag(u.data[e+"pr"]+'',u.data[e+"pm"]+'',u.data[e+"cg"]+'',u.data.pr_a,u.data[e+"cm_vc"]);cxTealium.log('ProductView Tag - [1]'+'Product ID - '+u.data[e+"pr"]);cxTealium.log('ProductView Tag - [1]'+'Product Name - '+u.data[e+"pm"]);cxTealium.log('ProductView Tag - [1]'+'Product Category - '+u.data[e+"cg"]);}}
if(u.data.tid["14"]||u.data["ConversionEventTag_cid"]||b._cevent==="conversion"){e="ConversionEventTag_";u.data[e+"cid"]=u.data[e+"cid"]||"conversion";u.data[e+"cat"]=u.data[e+"cat"]||"2";u.data.c_a=u.concat_attr("c_a",e,50);u.data.cx=u.concat_attr("cx",e,5);cmCreateConversionEventTag(u.data[e+"cid"],u.data[e+"cat"],u.data[e+"ccid"],u.data[e+"cpt"],u.data.c_a,u.data.cx);u.data[e+"cid"]="";}
if(u.data.tid["15"]||u.data["ElementTag_eid"]){e="ElementTag_";u.data.e_a=u.concat_attr("e_a",e,50);cmCreateElementTag(u.data[e+"eid"],u.data[e+"ecat"],u.data.e_a);u.data[e+"eid"]="";}}
if(document.getElementById("tealium_cormetrics84")){u.loader_cb();}else{u.loader({"type":"script","src":u.data.base_url,"cb":u.loader_cb,"loc":"script","id":'tealium_cormetrics84'});}
}};utag.o[loader].loader.LOAD(id);}('84','cathaypacific.main'));}catch(error){utag.DB(error);}
if(typeof utag!='undefined'){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();}